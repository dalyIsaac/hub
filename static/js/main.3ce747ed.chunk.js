(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,n){e.exports=n(151)},151:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),i=n.n(c),o="/search",l=function(e,t){return"".concat(o,"/").concat(e,"/").concat(t)},s=function(e){try{return[e.params.param.toLowerCase(),e.params.query.toLowerCase()]}catch(t){throw Error("This isn't a search path.")}},d=n(65),u=n.n(d),m="/subjects",b=function(e,t){var n=t||"";return"".concat(m,"/").concat(n,"?").concat(u.a.stringify({display:e}))},p=function(e){return"".concat("/views","/").concat(e)},f={base:"/",search:o+"/:param/:query",subject:m+"/:parentId?",view:"/views/:viewId"},h=[f.search,f.subject,f.view,f.base],v=n(12),j=n(8),O=n(3),C=48,y=115,g=71,E=n(31),k=n(21),w=n(195),x=n(207),I=Object(k.z)({search:{display:"flex",flexDirection:"row"},searchBox:{flexGrow:1},searchDropdown:{width:150}}),S=[{key:"name",text:"Name"},{key:"description",text:"Description"},{key:"childname",text:"Child name"},{key:"childdescription",text:"Child description"}];function D(e){var t=e.history,n=e.match,c=Object(a.useState)("name"),i=Object(j.a)(c,2),o=i[0],d=i[1],u=Object(a.useState)(""),m=Object(j.a)(u,2),b=m[0],p=m[1];Object(a.useEffect)(function(){try{var e=s(n),t=Object(j.a)(e,2),a=t[0],r=t[1];d(a),p(r)}catch(c){d("name"),p("")}},[n]);var f=Object(a.useCallback)(function(e,t){var n=t?t.key:void 0;"string"===typeof n&&d(n)},[]),h=Object(a.useCallback)(function(e){t.push(l(o,e))},[t,o]);return r.a.createElement("div",{className:I.search},r.a.createElement(w.a,{options:S,selectedKey:o,className:I.searchDropdown,onChange:f}),r.a.createElement(x.a,{className:I.searchBox,value:b,placeholder:"Search",onSearch:h}))}var N=n(210),R=n(105),B=function(e){var t=u.a.parse(e.search),n=Object(R.isUndefined)(t.display)||Array.isArray(t.display)?"grid":t.display;return"list"===n?n:"grid"},T=n(4),L=Object(O.b)(),P=Object(O.c)({appBar:{alignItems:"center",backgroundColor:L.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"grid",gridTemplateColumns:"150px minmax(200px, auto) 150px",height:C},link:{color:L.palette.black,textDecoration:"none",selectors:{"&:hover":{color:L.palette.neutralLighter,textDecoration:"none"}}},searchDropdown:{width:150},title:{paddingLeft:24}});function _(e){var t=B(e.location),n=e.match,c=n.params,i=c.parentId,l=c.viewId,d=n.path===f.subject||n.path===m,u=n.path===f.search||n.path===o,p=n.path===f.view&&l,h=Object(T.c)(function(e){return e}),v=h.subjects,O=h.views;return Object(a.useEffect)(function(){var e=null,t=null;if(d)e="subjects",i&&(t=v.dict[i].name);else if(u){var a=s(n),r=Object(j.a)(a,2);e="search/"+r[0],t=r[1]}else p&&l&&(e="views",t=O.dict[l].name);document.title=e?t?"hub/".concat(e,": ").concat(t):"hub/".concat(e):"hub"},[d,i,v.dict,u,n,p,l,O.dict]),r.a.createElement("div",{className:P.appBar},r.a.createElement(E.b,{to:b(t),className:P.link},r.a.createElement(N.a,{className:P.title,variant:"xLarge"},"hub")),r.a.createElement(D,e),r.a.createElement("div",null))}var A=n(190),M=n(29),W=45,U=44,z=n(9),H=n(213),V=Object(k.w)(),F={borderBottom:"1px solid "+V.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",height:U,margin:0,padding:0,zIndex:10},J=Object(k.z)({leftWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},rightWrapper:{alignItems:"center",display:"flex",flexDirection:"row-reverse"},wrapper:Object(z.a)({},F,{alignItems:"center",backgroundColor:V.palette.white,display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:24,paddingRight:24,position:"relative"})}),G=Object(v.g)(function(e){var t=e.items,n=e.farItems,c=e.location,i=e.history,o=B(c),l=Object(a.useCallback)(function(){i.push(function(e,t){return"".concat(e.pathname,"?display=").concat(t)}(c,"grid"===o?"list":"grid"))},[o,i,c]);return r.a.createElement("div",{className:J.wrapper},r.a.createElement("div",{className:J.leftWrapper},t),r.a.createElement("div",{className:J.rightWrapper},n,r.a.createElement(H.a,{key:"toggleView",ariaLabel:"Toggle view",iconProps:{iconName:"list"===o?"BulletedListText":"GridViewMedium"},text:"list"===o?"List":"Grid",styles:{root:{background:V.palette.white,height:U}},menuProps:{directionalHintFixed:!0,items:["list"===o?{iconProps:{iconName:"GridViewMedium"},key:"gridButton",onClick:l,text:"Grid"}:{iconProps:{iconName:"BulletedListText"},key:"listButton",onClick:l,text:"List"}]}})))}),K=n(41),Y=n(192),q=n(10),Q=n(11);function $(e,t){var n=t.order,a=t.options,r=a.fields,c=a.separateCompletedItems,i=[],o=[],l=!0,s=!1,d=void 0;try{for(var u,m=n[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;e[b].completed&&c?o.push(b):i.push(b)}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}var p=function(e,t){function n(e,t,n,a){a&&(Array.isArray(e)&&Array.isArray(t)||"string"===typeof e&&"string"===typeof t?(e=e.length,t=t.length):e instanceof Set&&t instanceof Set&&(e=e.size,t=t.size));var r=!Object(Q.isUndefined)(e),c=!Object(Q.isUndefined)(t),i=n?-1:1;return r||c?r&&!c?1*i:!r&&c?-1*i:e<t?-1*i:e>t?1*i:0:0}return function(a,r){var c=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var d=l.value,u=d.key,m=d.desc,b=d.compareLength,p=t[a][u],h=t[r][u];"children"===u&&(p=p.order,h=h.order);var v=n(p,h,m,b);if(0!==v)return v}}catch(f){i=!0,o=f}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}return 0}}(r,e);return i.sort(p),o.sort(p),i.concat(o)}function X(e,t){if(t in e){var n=!0,a=!1,r=void 0;try{for(var c,i=e[t].parents[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=e[c.value].children;o.order=$(e,o)}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}var Z=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},ee=function(e,t){var n=t.subjectId,a=t.level;!function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if(void 0===t[n].completed&&(t[n].completed=r,X(t,n),a>1)){var c=!0,i=!1,o=void 0;try{for(var l,s=t[n].children.order[Symbol.iterator]();!(c=(l=s.next()).done);c=!0)e(t,l.value,a-1,r)}catch(d){i=!0,o=d}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}}}(e.dict,n,a)},te=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},ne=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},ae=function(e,t){return{subjectId:t,type:"REMOVE_CHILD_VIEW",viewId:e}},re={iconProps:{iconName:"Completed"},key:"complete-1-level",text:"Mark as complete"},ce={iconProps:{iconName:"CompletedSolid"},key:"complete-2-level",text:"Mark this and its children as complete"},ie={iconProps:{iconName:"Blocked2"},key:"uncomplete",text:"Mark as incomplete"},oe={iconProps:{iconName:"Remove"},key:"remove",text:"Remove this as a child"},le={iconProps:{iconName:"Delete"},key:"delete",text:"Delete this"};function se(e){var t=e.item,n=e.showCloseButton,c=e.ev,i=e.onDismiss,o=e.onEditClick,l=Object(T.b)(),s=t.id,d=t.viewId,u=Object(a.useCallback)(function(e,t,n){l(!0===t?Z(s,n):te(s))},[l,s]),m=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,1)},[u]),b=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,2)},[u]),p=Object(a.useCallback)(function(e,t){t&&u(e,!1)},[u]),f=Object(a.useCallback)(function(){l(ne(s))},[l,s]),h=Object(a.useCallback)(function(){o(t)},[t,o]),v=Object(a.useCallback)(function(){d&&s&&l(ae(d,s))},[l,s,d]),j=[Object(z.a)({},re,{onClick:m}),Object(z.a)({},ce,{onClick:b})],O=[Object(z.a)({},ie,{onClick:p})],C=[{iconProps:{iconName:"Edit"},key:"edit",onClick:h,text:"Edit"}].concat(Object(K.a)(t.subject.completed?O:j),[{iconProps:{iconName:"Delete"},key:"delete",onClick:f,text:"Delete this"}]);return n&&C.push({iconProps:{iconName:"Cancel"},key:"removeChildView",onClick:v,text:"Remove this subject from this view"}),r.a.createElement(Y.a,{items:C,target:c.target,directionalHint:q.a.bottomCenter,isBeakVisible:!1,onDismiss:i})}var de=n(200),ue=n(209),me=n(199),be=n(214),pe=n(198),fe=n(204),he=n(193),ve=n(109),je=Object(O.b)(),Oe=Object(O.c)({title:{border:"1px solid transparent",borderRadius:0,fontSize:ve.a.size28,height:32,outline:"none",paddingBottom:4,textAlign:"center",width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+je.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+je.palette.neutralTertiary,outline:"none"}}}});function Ce(e){var t=e.value,n=e.className,a=e.onBlur,c=e.onChange,i=e.textAlign,o=void 0===i?"left":i;return r.a.createElement("div",{className:n},r.a.createElement("input",{className:Oe.title,onChange:c,onBlur:a,value:t,style:{textAlign:o}}))}var ye=n(187);function ge(e,t,n){var a=[],r=n?n.parentId:void 0,c=n?n.viewId:void 0,i=!0,o=!1,l=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var u=s.value,m={id:u,parent:r,subject:e[u],viewId:c};(Object(Q.isUndefined)(n)||Object(Q.isUndefined)(n.condition)||n.condition(m))&&a.push(m)}}catch(b){o=!0,l=b}finally{try{i||null==d.return||d.return()}finally{if(o)throw l}}return a}var Ee=Object(O.c)({list:{overflow:"auto"}});function ke(e){var t=e.order,n=e.parentId,c=e.maxHeight,i=e.onRenderCell,o=e.illegalIds,l=e.notifyNoChildren,s=e.viewId,d=Object(T.c)(function(e){return e}).subjects,u=Object(a.useCallback)(function(e){return!!o&&!o.has(e.id)},[o]),m={condition:o?u:void 0,parentId:n,viewId:s},b=ge(d.dict,t,m);return r.a.createElement("div",{className:Ee.list,style:{maxHeight:c}},0===b.length&&l?r.a.createElement(N.a,null,"There's nothing here",r.a.createElement("span",{role:"img","aria-label":"Gust of Wind emoji"},"\ud83d\udca8")):r.a.createElement(ye.a,{items:b,onRenderCell:i}))}var we=function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}},xe=function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}},Ie=function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}},Se=n(194),De=n(202),Ne=function(e,t){return{child:t,subjectId:e,type:"APPEND_CHILD_SUBJECT"}},Re=function(e,t){var n=t.subjectId,a=t.child,r=e.dict[n].children;r.order.push(a),r.order=$(e.dict,r),e.dict[a].parents.add(n)},Be=n(203),Te=Object(k.w)(),Le="1px solid "+Te.palette.neutralTertiary,Pe=Object(k.z)({wrapper:{border:Le,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",gridTemplateRows:"auto auto",marginBottom:2},checkboxWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},checkbox:{margin:8},divider:{background:Te.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},button:{gridColumn:"3"},content:{gridColumn:"1 / 3",gridRow:"2",paddingLeft:8,paddingRight:8}});function _e(e){var t=e.button,n=e.checked,c=e.children,i=e.contextMenuItems,o=e.editable,l=e.key,s=e.label,d=e.onCheckboxChange,u=e.onEditableBlur,m=Object(a.useRef)(null),b=Object(a.useState)(s),p=Object(j.a)(b,2),f=p[0],h=p[1],v=Object(a.useState)(!1),O=Object(j.a)(v,2),C=O[0],y=O[1];Object(a.useEffect)(function(){h(s)},[s]);var g=Object(a.useCallback)(function(e){e.preventDefault(),y(!C)},[C]),E=Object(a.useCallback)(function(e,t){h(t||"")},[]),k=Object(a.useCallback)(function(){if(u){var e=f||"Untitled";u(e),h(e)}},[f,u]);return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:g,ref:m,key:l},r.a.createElement("div",{className:Pe.wrapper},r.a.createElement("div",{className:Pe.checkboxWrapper},r.a.createElement(Be.a,{checked:n,label:o?void 0:s,className:Pe.checkbox,onChange:d}),o?r.a.createElement(pe.a,{value:f,borderless:!0,onChange:u?E:void 0,onBlur:k}):null),r.a.createElement("div",{className:Pe.content},c),t?r.a.createElement("span",{className:Pe.divider}):null,r.a.createElement("div",{className:Pe.button},t||null)),r.a.createElement(Y.a,{hidden:!(i&&C),isBeakVisible:!1,onDismiss:g,target:m,directionalHint:q.a.bottomRightEdge,items:i}))}function Ae(e){var t=e.id,n=e.parent,c=e.subject,i=Object(T.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&i(Ne(n,t))},[i,t,n]);return r.a.createElement(_e,{checked:!1,label:c.name,onCheckboxChange:o})}function Me(e){if(e&&!Object(Q.isUndefined)(e.parent))return r.a.createElement(Ae,e)}var We=n(70),Ue=function(e,t){return{subjectId:t,type:"APPEND_CHILD_VIEW",viewId:e}},ze=function(e,t){var n=e.subjects,a=e.views,r=t.subjectId,c=t.viewId,i=a.dict[c].children;i.order.push(r),a.dict[c].children.order=$(n.dict,i)},He=function(e){return Object(z.a)({subjectId:Object(We.v4)(),type:"CREATE_SUBJECT"},e)},Ve=32,Fe=Object(k.w)(),Je=Object(k.z)({wrapper:{border:Le,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",marginBottom:1,marginTop:1},button:{alignItems:"center",background:Fe.palette.white,border:"none",cursor:"pointer",display:"flex",flexDirection:"row",height:Ve,outline:"none",padding:0,selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:focus":{outline:"1px solid "+Fe.palette.themePrimary},"&:hover":{filter:"brightness(90%)",outline:"none"}}},divider:{background:Fe.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},icon:{fontSize:12,margin:8,paddingLeft:4,textAlign:"center"},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),Ge=function(e){var t=e.parent,n=Object(a.useRef)(null),c=Object(T.b)(),i=Object(a.useState)(!1),o=Object(j.a)(i,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(j.a)(d,2),m=u[0],b=u[1],p=Object(a.useCallback)(function(){return s(!1)},[]),f=Object(a.useCallback)(function(){return s(!0)},[]),h=Object(a.useCallback)(function(){return b(!m)},[m]),v=Object(a.useCallback)(function(){return b(!1)},[]),O=Object(a.useCallback)(function(){c(He({parentId:t}))},[c,t]),C=Object(T.c)(function(e){return e}).subjects,g=[{iconProps:{iconName:"RowsChild"},key:"appendChildren",onClick:f,text:"Append child subjects"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Je.wrapper},r.a.createElement("button",{className:Je.button,style:{gridColumn:1},onClick:O},r.a.createElement(Se.a,{iconName:"Add",className:Je.icon}),r.a.createElement(N.a,{className:Je.text},"Add child")),r.a.createElement("span",{className:Je.divider}),r.a.createElement("button",{className:Je.button,onClick:h,ref:n,style:{gridColumn:3}},r.a.createElement(Se.a,{iconName:"ChevronDown",style:{width:"100%"}}))),r.a.createElement(De.a,{isOpen:l,isLightDismiss:!0,headerText:"Append Children",onDismiss:p},r.a.createElement(ke,{parentId:t,illegalIds:new Set(C.dict[t].children.order.concat(t)),order:C.order.order,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(y,")"),onRenderCell:Me})),r.a.createElement(Y.a,{hidden:!m,isBeakVisible:!1,onDismiss:v,target:n,directionalHint:q.a.bottomRightEdge,items:g}))},Ke=function(e,t){return{parent:t,subjectId:e,type:"REMOVE_CHILD_SUBJECT"}},Ye=Object(O.c)({open:{height:40,width:"100%"}});function qe(e){var t=e.id,n=e.parent,c=e.subject,i=Object(T.b)(),o=Object(a.useCallback)(function(e,n,a){i(!0===n?Z(t,a):te(t))},[i,t]),l=Object(a.useCallback)(function(e){i(we(t,e||"Untitled"))},[i,t]),s=Object(a.useCallback)(function(e,t){t&&o(e,!0,1)},[o]),d=Object(a.useCallback)(function(e,t){t&&o(e,!0,2)},[o]),u=Object(a.useCallback)(function(e,t){t&&o(e,!1)},[o]),m=Object(a.useCallback)(function(){i(Ke(t,n))},[i,t,n]),p=Object(a.useCallback)(function(){i(ne(t))},[i,t]),f=[Object(z.a)({},re,{onClick:s}),Object(z.a)({},ce,{onClick:d})],h=[Object(z.a)({},ie,{onClick:u})],v=[].concat(Object(K.a)(c.completed?h:f),[Object(z.a)({},oe,{onClick:m}),Object(z.a)({},le,{onClick:p})]),j="Open "+c.name,O=r.a.createElement(E.b,{to:b("grid",t),tabIndex:-1},r.a.createElement(be.a,{className:Ye.open,iconProps:{iconName:"OpenFile"},ariaLabel:j,title:j}));return r.a.createElement(_e,{editable:!0,onEditableBlur:l,checked:!!c.completed,label:c.name,onCheckboxChange:o,contextMenuItems:v,button:O})}function Qe(e){if(e&&!Object(Q.isUndefined)(e.parent))return r.a.createElement(qe,Object.assign({},e,{key:e.id}))}var $e=Object(O.b)(),Xe="1px solid "+$e.palette.neutralTertiary,Ze="1px solid "+$e.palette.themePrimary,et=Object(O.c)({headerWrapper:{borderTopLeftRadius:4,borderTopRightRadius:4,display:"grid",gridTemplateColumns:"32px auto 32px"},header:{alignItems:"center",borderTopLeftRadius:4,borderTopRightRadius:4,color:$e.palette.neutralLight,display:"flex",flexDirection:"column",gridColumn:"2",gridRow:"1",margin:-1,padding:5,zIndex:1},headerOpenButton:{background:$e.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,margin:0,marginTop:0,outline:"none",zIndex:2,selectors:{"&:focus":{border:Ze,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,outline:"none"}}},headerCloseButton:{background:$e.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,margin:0,outline:"none",zIndex:2,selectors:{"&:active":{backgroundColor:$e.palette.red,color:$e.palette.white,filter:"brightness(80%)",outline:"none"},"&:focus":{border:Ze,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,outline:"none"},"&:hover":{backgroundColor:$e.palette.red,color:$e.palette.white}}},headerLink:{gridColumn:"3",gridRow:"1",outline:"none"},body:{padding:10},title:{alignItems:"center",display:"flex",flexDirection:"column",paddingBottom:5,paddingTop:10},description:{paddingBottom:10,paddingTop:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:$e.palette.white,border:Xe,width:"100%"},heroButton:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:10}});function tt(e){var t=e.item,n=t.subject,c=t.id,i=t.viewId,o=e.listHeight,l=e.showOpenButton,s=e.showCloseButton,d=Object(T.b)(),u=Object(a.useState)(n.name),m=Object(j.a)(u,2),p=m[0],f=m[1],h=Object(a.useState)(n.description),v=Object(j.a)(h,2),O=v[0],C=v[1],y=Object(T.c)(function(e){return e}).subjects;Object(a.useEffect)(function(){f(n.name)},[n.name]),Object(a.useEffect)(function(){C(n.description)},[n.description]);var g,k,w,x,I,S=Object(a.useCallback)(function(e){f(e.target.value)},[]),D=Object(a.useCallback)(function(){var e=p||"Untitled";n.name!==e&&d(we(c,e)),f(e)},[d,c,p,n.name]),R=Object(a.useCallback)(function(e,t){C(t||"")},[]),B=Object(a.useCallback)(function(){n.description!==O&&d(xe(c,O))},[d,c,O,n.description]),L=Object(a.useCallback)(function(e){d(Ie(c,e||void 0))},[d,c]),P=Object(a.useCallback)(function(){d(Z(c,1))},[d,c]),_=Object(a.useCallback)(function(){d(te(c))},[d,c]),A=Object(a.useCallback)(function(){return L()},[L]),M=Object(a.useCallback)(function(){d(Z(c,2))},[d,c]),W=Object(a.useCallback)(function(){d(ne(c))},[d,c]),U=Object(a.useCallback)(function(){i&&c&&d(ae(i,c))},[d,c,i]),H=Object(z.a)({},ce,{onClick:M}),V=Object(z.a)({},le,{onClick:W}),F=n.dueDate?(g=new Date,k=n.dueDate,Math.ceil((k.valueOf()-g.valueOf())/864e5)):"\u221e";n.completed?(I=$e.palette.red,w="Completed "+n.completed.toLocaleDateString(),x=r.a.createElement(ue.a,Object.assign({},ie,{split:!0,onClick:_,menuProps:{directionalHint:q.a.bottomCenter,isBeakVisible:!1,items:[V]},style:{background:$e.palette.white}}))):(I=$e.palette.green,w="Created "+n.created.toLocaleDateString(),x=r.a.createElement(ue.a,Object.assign({primary:!0},re,{split:!0,onClick:P,menuProps:{directionalHint:q.a.bottomCenter,isBeakVisible:!1,items:[H,V]}})));var J=r.a.createElement(N.a,{className:et.header,tabIndex:-1},w),G="Open "+n.name,K="Close "+n.name;return r.a.createElement(me.a,{verticalAlign:"center"},r.a.createElement("div",{className:et.headerWrapper,style:{backgroundColor:I}},s?r.a.createElement(be.a,{styles:{root:{width:""}},className:et.headerCloseButton,iconProps:{iconName:"Cancel"},title:K,ariaLabel:K,onClick:U}):null,J,l?r.a.createElement(E.b,{to:b("grid",c),className:et.headerLink,tabIndex:-1},r.a.createElement(be.a,{styles:{root:{width:""}},className:et.headerOpenButton,iconProps:{iconName:"OpenFile"},title:G,ariaLabel:G})):null),r.a.createElement("div",{className:et.body},r.a.createElement(Ce,{textAlign:"center",className:et.title,value:p,onChange:S,onBlur:D}),r.a.createElement(pe.a,{resizable:!1,multiline:!0,rows:3,value:O,onChange:R,onBlur:B,className:et.description,styles:{field:{height:63}}}),r.a.createElement("div",{className:et.date},r.a.createElement(fe.a,null,"Due date:"),r.a.createElement("div",{className:et.datePicker},r.a.createElement(he.a,{disableAutoFocus:!0,value:n.dueDate,onSelectDate:L}),n.dueDate?r.a.createElement(be.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:A}):null)),r.a.createElement("div",{className:et.daysLeft},r.a.createElement(fe.a,null,"".concat(F," ").concat(1===F?"day":"days"," left"))),r.a.createElement("div",{style:{minHeight:"calc((".concat(o,") + ").concat(Ve,"px)")}},r.a.createElement(ke,{parentId:c,order:y.dict[c].children.order,maxHeight:"calc(".concat(o,")"),onRenderCell:Qe}),r.a.createElement(Ge,{parent:c})),r.a.createElement("div",{className:et.heroButton},x)))}var nt=Object(k.w)(),at=Object(k.z)({subjectWrapper:{backgroundColor:nt.palette.white,border:"1px solid "+nt.palette.neutralTertiary,borderRadius:4}});function rt(e){var t=e.modalItem,n=e.dismissModal,a=e.showCloseButton;return r.a.createElement(de.a,{isOpen:!!t,onDismiss:n,styles:{main:{backgroundColor:"none",border:"1px solid transparent",borderRadius:4}}},r.a.createElement("div",{className:at.subjectWrapper},t?r.a.createElement(tt,{showCloseButton:a,item:t,showOpenButton:!0}):null))}var ct=n(110),it=n.n(ct),ot=400,lt=Object(k.w)(),st=Object(k.z)({content:{alignItems:"stretch",display:"flex",flexDirection:"row",height:"100%"},mainWrapper:{display:"flex",flexDirection:"column"},sidebar:{border:"1px solid "+lt.palette.white,borderRadius:4,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",minWidth:ot,zIndex:10},wrapper:{display:"flex",flexDirection:"column"}});function dt(e){var t=e.commandBar,n=e.main,a=e.parentId,c=e.title,i=Object(T.c)(function(e){return e.subjects}).dict,o=a?r.a.createElement("div",{className:st.sidebar},r.a.createElement(tt,{item:{id:a,subject:i[a]}})):null,l=a?"calc(100% - ".concat(ot+2,"px)"):"100%",s=it()();return o&&s.innerWidth<2*ot?o:r.a.createElement("div",{className:st.wrapper},t,r.a.createElement("div",{className:st.content},r.a.createElement("div",{className:st.mainWrapper,style:{width:l}},c,n),o))}var ut=n(208);function mt(e){var t=e.id,n=e.viewId,c=e.subject,i=Object(T.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&i(Ue(n,t))},[i,t,n]);return r.a.createElement(_e,{checked:!1,label:c.name,onCheckboxChange:o})}function bt(e){if(e&&!Object(Q.isUndefined)(e.viewId))return r.a.createElement(mt,e)}function pt(e){var t=e.hidePanel,n=e.isOpen,a=e.viewId,c=Object(T.c)(function(e){return e}),i=c.subjects,o=c.views;if(Object(Q.isUndefined)(a)||!(a in o.dict))return r.a.createElement(v.a,{to:f.base});var l=i.order.order,s=new Set(o.dict[a].children.order);return r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{isOpen:n,isLightDismiss:!0,headerText:"Append Children",onDismiss:t},r.a.createElement(ke,{viewId:a,order:l,illegalIds:s,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(y,")"),onRenderCell:bt})))}var ft=n(189),ht=n(197),vt=function(e,t){return{fields:e,parameters:t,type:"SET_FIELDS_ARRAY"}},jt=function(e,t,n){return{desc:t,key:e,parameters:n,type:"SET_FIELDS_DESC"}},Ot=Object(k.w)(),Ct=Object(k.z)({dragEnterClass:{backgroundColor:Ot.palette.neutralLight},gripperWrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",justifyContent:"center",width:"100%",selectors:{"&:hover":{cursor:"pointer"}}},wrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",paddingLeft:2,width:"100%"}});function yt(e){var t=e.subjectId,n=e.setSearchOptions,c=e.fields,i=Object(a.useRef)(-1),o=Object(a.useRef)(null),l=Object(a.useRef)(new ft.a),s=Object(a.useRef)(null),d=Object(a.useState)(!1),u=Object(j.a)(d,2),m=u[0],b=u[1],p=Object(a.useCallback)(function(){b(!1)},[]),f=Object(a.useCallback)(function(){b(!0)},[]),h=Object(T.b)(),v=Object(a.useCallback)(function(e){var a=l.current.isIndexSelected(i.current)?l.current.getSelection():[o.current],r=c.filter(function(e){return-1===a.indexOf(e)}),s=r.indexOf(e);-1===s&&(s=0),r.splice.apply(r,[s,0].concat(Object(K.a)(a))),h(vt(r,{setSearchOptions:n,subjectId:t}))},[h,c,t,n]),O=Object(a.useCallback)(function(e,t){return!0},[]),C=Object(a.useCallback)(function(e){return!0},[]),y=Object(a.useCallback)(function(e,t){return Ct.dragEnterClass},[]),g=Object(a.useCallback)(function(e,t){},[]),E=Object(a.useCallback)(function(e,t){o.current&&v(e)},[v]),k=Object(a.useCallback)(function(e,t,n,a){o.current=e,i.current=t},[]),w={canDrag:C,canDrop:O,onDragEnd:Object(a.useCallback)(function(e,t){o.current=null,i.current=-1},[]),onDragEnter:y,onDragLeave:g,onDragStart:k,onDrop:E},x=Object(a.useCallback)(function(e,a,r){h(jt(r,a,{setSearchOptions:n,subjectId:t}))},[h,t,n]),I=[{key:"gripper",minWidth:20,name:"",onRender:Object(a.useCallback)(function(){return r.a.createElement("div",{className:Ct.gripperWrapper},r.a.createElement(Se.a,{iconName:"GripperBarHorizontal"}))},[])},{fieldName:"name",key:"param",minWidth:150,name:"Parameter",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:Ct.wrapper},r.a.createElement(N.a,null,e.name))},[])},{fieldName:"desc",key:"direction",minWidth:150,name:"Direction",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:Ct.wrapper},r.a.createElement(ut.a,{styles:{root:{margin:0}},key:e.key,defaultChecked:e.desc,offText:"Ascending",onText:"Descending",onChange:function(t,n){return x(t,n,e.key)}}))},[x])}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:s},r.a.createElement(H.a,{text:"Sort",iconProps:{iconName:"Sortlines"},ariaLabel:"Sort",onClick:f,styles:{root:{height:U}}})),r.a.createElement(ht.a,{target:s.current,onDismiss:p,hidden:!m,directionalHint:q.a.bottomCenter,isBeakVisible:!1},r.a.createElement("div",{onBlur:p},r.a.createElement(A.a,{selection:l.current,columns:I,items:c,selectionMode:M.b.none,dragDropEvents:w}))))}var gt=function(e,t){return{parameters:t,separateCompletedItems:e,type:"SET_SEPARATE_COMPLETE"}},Et={root:{height:U}};function kt(e){var t=e.match,n=e.showSort,c=e.subjectId,i=t.params.viewId,o=t.path===f.view&&i,l=Object(T.b)(),s=Object(T.c)(function(e){return e.subjects}),d=c&&c in s.dict?s.dict[c].children.options:s.order.options,u=Object(a.useCallback)(function(e,t){l(gt(t,{subjectId:c}))},[l,c]),m=[],b=Object(a.useState)(!1),p=Object(j.a)(b,2),h=p[0],v=p[1],O=Object(a.useCallback)(function(){v(!0)},[]),C=Object(a.useCallback)(function(){v(!1)},[]);return o&&m.push(r.a.createElement(H.a,{key:"appendChildren",text:"Append child subjects",iconProps:{iconName:"RowsChild"},ariaLabel:"Create child subject",onClick:O,styles:Et}),r.a.createElement(pt,{key:"panel",hidePanel:C,isOpen:h,viewId:i})),n&&m.push(r.a.createElement(yt,{key:"sort",subjectId:c,fields:d.fields})),m.push(r.a.createElement(ut.a,{key:"separateComplete",checked:d.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:u,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}})),m}var wt=Object(k.w)(),xt=Object(k.z)({rowButton:{selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:hover":{filter:"brightness(90%)",outline:"none"}}},rowButtonWrapper:{display:"flex",flexDirection:"row"},subjectWrapper:{backgroundColor:wt.palette.white,border:"1px solid "+wt.palette.neutralTertiary,borderRadius:4}});function It(e){var t=e.item,n=e.openModal,c=e.showCloseButton,i=Object(T.b)(),o=Object(a.useCallback)(function(){n(t)},[t,n]),l=Object(a.useCallback)(function(){t.viewId&&t.id&&i(ae(t.viewId,t.id))},[i,t]),s="Open "+t.subject.name,d="Edit "+t.subject.name,u="Close "+t.subject.name;return r.a.createElement("div",{className:xt.rowButtonWrapper},c?r.a.createElement(be.a,{onClick:l,styles:{root:{width:""}},className:xt.rowButton,iconProps:{iconName:"Cancel"},title:u,ariaLabel:u}):null,r.a.createElement(be.a,{onClick:o,styles:{root:{width:""}},className:xt.rowButton,iconProps:{iconName:"Edit"},title:d,ariaLabel:d}),r.a.createElement(E.b,{to:b("list",t.id)},r.a.createElement(be.a,{styles:{root:{width:""}},className:xt.rowButton,iconProps:{iconName:"OpenFile"},title:s,ariaLabel:s})))}var St=function(e,t){for(var n=0;n<t.length;n++){if(t[n]!==e[n])return n}return 0};var Dt=n(44),Nt=n(51),Rt=3,Bt=603,Tt=Object(O.b)(),Lt=Object(O.c)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(ot,"px")},grid:{height:"100%",overflow:"auto",overflowY:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+Tt.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"}}),Pt=function(){return Bt*Rt};var _t=Object(v.g)(function(e){var t=e.title,n=(e.history,e.location,e.match),c=e.showCloseButton,i=Object(Dt.a)(e,["title","history","location","match","showCloseButton"]),o=i.options?i.options.parentId:void 0,l=Object(T.c)(function(e){return e}).subjects,s=Object(a.useRef)(0),d=Object(a.useRef)(0),u=Object(a.useRef)(null),m=At(i),b=m.items,p=m.componentOrder,f=m.currentOrder,h=m.setCurrentOrder;Object(a.useEffect)(function(){if(u.current&&f!==p&&p.length>0){var e=St(f,p),t=l.dict[p[e]];(0===t.parents.size||t.parents.has(o))&&u.current.scrollToIndex(e,function(){return Bt},Nt.a.top),h(p)}},[p,f,h,o,l]);var v=Object(a.useCallback)(function(e){if(e)return r.a.createElement("div",{className:Lt.tile,"data-is-focusable":!0,key:e.id,style:{height:Bt,width:100/s.current+"%"}},r.a.createElement("div",{className:Lt.padding},r.a.createElement("div",{className:Lt.contents},r.a.createElement(tt,{showCloseButton:c,item:e,listHeight:"260px",showOpenButton:!0}))))},[c]),j=Object(a.useCallback)(function(e,t){if(0===e&&t){var n=t.width/ot;s.current=t.width>1.5*ot?Math.ceil(n):Math.floor(n),d.current=Math.floor(t.width/s.current)}return s.current*Rt},[]),O=kt({match:n,showSort:!0,subjectId:o});return r.a.createElement(dt,{commandBar:r.a.createElement(G,{items:O}),main:r.a.createElement(ye.a,{ref:u,className:Lt.grid,items:b,getItemCountForPage:j,getPageHeight:Pt,renderedWindowsAhead:4,onRenderCell:v}),parentId:o,title:t})});function At(e){var t,n,r=e.options,c=e.sortOptions;r&&(t=r.parentId,n=r.viewId);var i,o,l,s=Object(T.c)(function(e){return e}),d=s.subjects,u=s.views;c?(i=$(d.dict,Object(z.a)({},d.order,{options:c})),o=c.fields,l={setSearchOptions:!0}):t?(i=d.dict[t].children.order,o=d.dict[t].children.options.fields,l={subjectId:t}):n?(i=u.dict[n].children.order,o=u.dict[n].children.options.fields,l={}):(i=d.order.order,o=d.order.options.fields,l={});var m=Object(a.useState)(i),b=Object(j.a)(m,2),p=b[0],f=b[1];return{componentOrder:i,currentOrder:p,items:ge(d.dict,i,r),reorderParams:l,setCurrentOrder:f,sortFields:o}}function Mt(e){var t=e.match,n=e.location,a=t.params.parentId,c=B(n),i=Object(T.c)(function(e){return e.subjects}).dict;if(!Object(Q.isUndefined)(a)&&!(a in i))return r.a.createElement(v.a,{to:"/"});var o={parentId:a};return"list"===c?r.a.createElement(Wt,{options:o}):r.a.createElement(_t,{options:o})}var Wt=Object(v.g)(function(e){var t=e.title,n=e.history,c=e.match,i=e.options,o=e.showCloseButton,l=e.sortOptions,s=i?i.parentId:void 0,d=Object(T.c)(function(e){return e}).subjects,u=At({options:i,sortOptions:l}),m=u.items,p=u.componentOrder,h=u.currentOrder,v=u.setCurrentOrder,O=u.reorderParams,y=u.sortFields,E=function(e){var t=e.history,n=e.reorderParams,r=e.sortFields,c=Object(T.b)(),i=Object(a.useCallback)(function(e,t){var a=r[e],i=r.filter(function(t,n){return n!==e});i.splice(t,0,a),c(vt(i,n))},[r,c,n]);return{dispatchSetFieldsDesc:Object(a.useCallback)(function(e,t){"openButton"!==t.key&&c(jt(t.key,!t.isSortedDescending,n))},[c,n]),getKey:Object(a.useCallback)(function(e){return e.id},[]),onItemInvoked:Object(a.useCallback)(function(e){t.push(b("list",e.id))},[t]),reorder:i}}({history:n,reorderParams:O,sortFields:y}),k=E.dispatchSetFieldsDesc,w=E.getKey,x=E.onItemInvoked,I=E.reorder,S=function(e){var t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(a.useCallback)(function(){c(null)},[]),o=Object(a.useCallback)(function(e){c(e)},[]);return!r||r.id in e.dict||c(null),Object(a.useEffect)(function(){if(r)if(r.id in e.dict){var t=e.dict[r.id];t!==r.subject&&c(Object(z.a)({},r,{subject:t}))}else c(null)},[e.dict,r,c]),{dismissModal:i,modalItem:r,openModal:o,setModalItem:c}}(d),D=S.dismissModal,N=S.modalItem,R=S.openModal,B=function(e,t){var n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],i=r[1],o=Object(a.useCallback)(function(){i(null)},[]);return{contextMenuProps:c,onItemContextMenu:Object(a.useCallback)(function(n,a,r){return!n||!r||(i({ev:r,item:n,onDismiss:o,onEditClick:e,showCloseButton:t}),!1)},[o,t,e])}}(S.setModalItem,o),L=B.contextMenuProps,P=B.onItemContextMenu,_=function(e){var t=e.openModal,n=e.showCloseButton,c=e.sortFields,i=Object(a.useCallback)(function(e,t,n){return e.subject[n.key]},[]),o=Object(a.useCallback)(function(e){return e.subject.children.order.length.toLocaleString()},[]),l=Object(a.useCallback)(function(e,t,n){var a=e.subject[n.key];return a?a.toLocaleString():""},[]),s=Object(a.useCallback)(function(e){return r.a.createElement(It,{item:e,openModal:t,showCloseButton:n})},[t,n]),d={children:{isResizable:!0,key:"children",minWidth:100,name:"# Children",onRender:o},completed:{isResizable:!0,key:"completed",minWidth:150,name:"Completed",onRender:l},created:{isResizable:!0,key:"created",minWidth:150,name:"Date created",onRender:l},description:{isResizable:!0,key:"description",minWidth:100,name:"Description",onRender:i},dueDate:{isResizable:!0,key:"dueDate",minWidth:150,name:"Due date",onRender:l},name:{isResizable:!0,key:"name",minWidth:100,name:"Name",onRender:i}},u=[],m=!0,b=!1,p=void 0;try{for(var f,h=c[Symbol.iterator]();!(m=(f=h.next()).done);m=!0){var v=f.value,j=d[v.key];j&&(j.isSorted=!0,j.isSortedDescending=v.desc,u.push(j))}}catch(O){b=!0,p=O}finally{try{m||null==h.return||h.return()}finally{if(b)throw p}}return u.push({key:"itemButtons",minWidth:80,name:"",onRender:s}),u}({openModal:R,showCloseButton:o,sortFields:y}),U=function(e){var t=e.componentOrder,n=e.currentOrder,r=e.parentId,c=e.setCurrentOrder,i=e.subjects,o=Object(a.useRef)(null);return Object(a.useEffect)(function(){if(o.current&&n!==t&&t.length>0){var e=St(n,t),a=i.dict[t[e]];(0===a.parents.size||a.parents.has(r))&&o.current.focusIndex(e),c(t)}},[t,r,n,i,c]),o}({componentOrder:p,currentOrder:h,parentId:s,setCurrentOrder:v,subjects:d}),H="calc(100vh - ".concat(C+W+(c.path===f.view?g:0),"px)"),V=kt({match:c,subjectId:s});return r.a.createElement(dt,{commandBar:r.a.createElement(G,{items:V}),main:r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{styles:{root:{height:H}},getKey:w,componentRef:U,onColumnHeaderClick:k,columns:_,items:m,isHeaderVisible:!0,selectionMode:M.b.none,onItemInvoked:x,onItemContextMenu:P,columnReorderOptions:{frozenColumnCountFromEnd:1,frozenColumnCountFromStart:0,handleColumnReorder:I}}),L&&r.a.createElement(se,L),r.a.createElement(rt,{modalItem:N,dismissModal:D,showCloseButton:o})),parentId:s,title:t})}),Ut=new Set(S.reduce(function(e,t){return e.push(String(t.key).toLowerCase()),e},[]));function zt(e){var t=e.match,n=e.location,c=B(n),i=s(t),o=Object(j.a)(i,2),l=o[0],d=o[1],u=Object(T.c)(function(e){return e.subjects}),m=u.dict,b=u.searchSortOptions,p=Object(a.useCallback)(function(e){var t=e.subject;switch(l){case"childname":var n=!0,a=!1,r=void 0;try{for(var c,i=t.children.order[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value;if(m[o].name.toLowerCase().includes(d))return!0}}catch(v){a=!0,r=v}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return!1;case"childdescription":var s=!0,u=!1,b=void 0;try{for(var p,f=t.children.order[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=p.value;if(m[h].description.toLowerCase().includes(d))return!0}}catch(v){u=!0,b=v}finally{try{s||null==f.return||f.return()}finally{if(u)throw b}}return!1;default:return e.subject[l].toLowerCase().includes(d)}},[m,l,d]);return Ut.has(l)?"list"===c?r.a.createElement(Wt,{options:{condition:p},sortOptions:b}):r.a.createElement(_t,{options:{condition:p},sortOptions:b}):r.a.createElement(N.a,null,"Sorry that search parameter was invalid.")}var Ht=function(e,t){return{name:t,type:"UPDATE_VIEW_NAME",viewId:e}},Vt=Object(O.c)({title:{marginTop:10,padding:10},wrapper:{display:"flex",flexDirection:"column",height:"100%",width:"100%"}});function Ft(e){var t=e.location,n=e.viewId,c=Object(T.c)(function(e){return e}).views,i=Object(T.b)(),o=n&&n in c.dict?c.dict[n]:{name:""},l=Object(a.useState)(o.name),s=Object(j.a)(l,2),d=s[0],u=s[1],m=Object(a.useCallback)(function(){n&&i(Ht(n,d))},[n,i,d]);Object(a.useEffect)(function(){u(o.name)},[o.name]);var b=Object(a.useCallback)(function(e){u(e.target.value)},[]),p=B(t),f={viewId:n},h=r.a.createElement(Ce,{className:Vt.title,value:d,onChange:b,onBlur:m}),v="grid"===p?r.a.createElement(_t,{options:f,showCloseButton:!0,title:h}):r.a.createElement(Wt,{options:f,showCloseButton:!0,title:h});return r.a.createElement("div",{className:Vt.wrapper},v)}function Jt(e){var t=e.match,n=e.location,a=Object(T.c)(function(e){return e}).views,c=t.params.viewId;return!Object(Q.isUndefined)(c)&&c in a.dict?r.a.createElement(Ft,{viewId:c,location:n}):r.a.createElement(v.a,{to:f.base})}var Gt=n(191),Kt=n(205),Yt=function(){return{type:"CREATE_VIEW",viewId:Object(We.v4)()}};var qt=Object(k.w)(),Qt=Object(k.z)({navWrapper:{borderRight:"1px solid "+qt.palette.neutralQuaternary,display:"flex",flexDirection:"column"},nav:{background:qt.palette.white,boxSizing:"border-box",height:"100%",overflowY:"auto",width:208}});var $t=function(e){var t=e.match,n=e.history,c=Object(T.b)(),i=Object(a.useState)(!1),o=Object(j.a)(i,2),l=o[0],s=o[1],d=Object(a.useState)(""),u=Object(j.a)(d,2),b=u[0],h=u[1],v=Object(T.c)(function(e){return e}).views;Object(a.useEffect)(function(){if(t.url===m)h("allSubjects");else if(t.path===f.view){var e=t.params.viewId;e&&e in v.dict?h(e):n.push(f.base)}else h("")},[t,n,v.dict]);var O=Object(a.useCallback)(function(){c(Yt()),s(!0)},[c]);Object(a.useEffect)(function(){l&&(s(!1),n.push(p(v.order[v.order.length-1])))},[l,n,v]);var C={isExpanded:!0,key:"views",links:[],name:"Views",url:""},y=!0,g=!1,E=void 0;try{for(var k,w=v.order[Symbol.iterator]();!(y=(k=w.next()).done);y=!0){var x=k.value,I=v.dict[x];C.links.push({key:x,name:I.name,url:"#"+p(x)})}}catch(N){g=!0,E=N}finally{try{y||null==w.return||w.return()}finally{if(g)throw E}}var S=[{links:[{key:"allSubjects",name:"All subjects",url:"#"+m}]}];C.links.length>0&&S[0].links.push(C),S[0].links.push({icon:"Add",key:"createView",name:"Create view",onClick:O,url:""});var D=function(e){var t=e.parentId,n=e.viewId,r=Object(T.b)(),c=Object(a.useCallback)(function(){r(He({parentId:t,viewId:n}))},[r,t,n]);return[{iconProps:{iconName:t||n?"ChildOf":"Add"},key:"createSubject",onClick:c,text:t||n?"Create child subject":"Create subject"}]}(t.params);return r.a.createElement("div",{className:Qt.navWrapper},r.a.createElement(Gt.a,{items:D,styles:{root:F}}),r.a.createElement(Kt.a,{selectedKey:b,expandButtonAriaLabel:"Expand or collapse",className:Qt.nav,groups:S,styles:{navItems:{margin:0}}}))},Xt=Object(O.c)({main:{display:"flex",flexDirection:"column",overflowY:"auto",width:"100%"},wrapper:{display:"flex",flexDirection:"row"}}),Zt=function(){return r.a.createElement("div",null,r.a.createElement(v.b,{path:h,component:_}),r.a.createElement("div",{className:Xt.wrapper},r.a.createElement(v.b,{path:h,component:$t}),r.a.createElement("div",{className:Xt.main},r.a.createElement(v.d,null,r.a.createElement(v.b,{path:f.subject,component:Mt}),r.a.createElement(v.b,{path:f.search,component:zt}),r.a.createElement(v.b,{path:f.view,component:Jt}),r.a.createElement(v.a,{to:m})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var en=n(34),tn=n(111),nn=n(115),an=n(46),rn=n(112),cn=n.n(rn),on=n(113),ln=n(71),sn=function(e,t){return Object(z.a)({},Object(ln.a)(e,function(e){var n=e.subjects;switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var n=t.subjectId,a=t.name;e.dict[n].name=a,X(e.dict,n)}(n,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var n=t.subjectId,a=t.description;e.dict[n].description=a,X(e.dict,n)}(n,t);break;case"COMPLETE_SUBJECT":ee(n,t);break;case"UNCOMPLETE_SUBJECT":!function(e,t){var n=t.subjectId;e.dict[n].completed=void 0,X(e.dict,n)}(n,t);break;case"DELETE_SUBJECT":!function(e,t){var n=t.subjectId,a=!0,r=!1,c=void 0;try{for(var i,o=e.dict[n].parents[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;Object(Q.remove)(e.dict[l].children.order,function(e){return e===n})}}catch(f){r=!0,c=f}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}var s=!0,d=!1,u=void 0;try{for(var m,b=e.dict[n].children.order[Symbol.iterator]();!(s=(m=b.next()).done);s=!0){var p=m.value;e.dict[p].parents.delete(n)}}catch(f){d=!0,u=f}finally{try{s||null==b.return||b.return()}finally{if(d)throw u}}Object(Q.remove)(e.order.order,function(e){return e===n}),X(e.dict,n),delete e.dict[n]}(n,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var n=t.subjectId,a=t.date;e.dict[n].dueDate=a,X(e.dict,n)}(n,t);break;case"CREATE_SUBJECT":!function(e,t){var n=t.subjectType,a=t.parentId,r=t.subjectId,c=t.viewId,i={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},created:new Date,description:"",name:"Untitled",parents:new Set,type:n||"BaseSubject"};e.subjects.dict[r]=i,void 0!==a&&Re(e.subjects,Ne(a,r)),void 0!==c&&ze(e,Ue(c,r)),e.subjects.order.order.push(r)}(e,t);break;case"REMOVE_CHILD_SUBJECT":!function(e,t){var n=t.subjectId,a=t.parent;Object(Q.remove)(e.dict[a].children.order,function(e){return e===n}),e.dict[n].parents.delete(a),X(e.dict,n)}(n,t);break;case"APPEND_CHILD_SUBJECT":Re(n,t);break;case"SET_FIELDS_ARRAY":!function(e,t){var n=t.parameters,a=n.subjectId,r=n.setSearchOptions,c=t.fields;if((r?e.searchSortOptions:a?e.dict[a].children.options:e.order.options).fields=c,a){var i=e.dict[a].children;i.order=$(e.dict,i)}}(n,t);break;case"SET_FIELDS_DESC":!function(e,t){var n,a=t.parameters,r=a.subjectId,c=a.setSearchOptions,i=t.key,o=t.desc;n=c?e.searchSortOptions:r?e.dict[r].children.options:e.order.options;var l=!0,s=!1,d=void 0;try{for(var u,m=n.fields[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;if(b.key===i){if(b.desc=o,r){var p=e.dict[r].children;p.order=$(e.dict,p)}return}}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}}(n,t);break;case"SET_SEPARATE_COMPLETE":!function(e,t){var n=t.separateCompletedItems,a=t.parameters,r=a.subjectId;if((a.setSearchOptions?e.searchSortOptions:r?e.dict[r].children.options:e.order.options).separateCompletedItems=n,r){var c=e.dict[r].children;c.order=$(e.dict,c)}}(n,t)}return n.order.order.length>0&&(n.order.order=$(n.dict,n.order)),Object(Q.isUndefined)(n.searchSortOptions)&&(n.searchSortOptions={fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}),e}))},dn=function(){return{dict:{},order:[],orderSet:new Set}},un=function(e,t){return Object(z.a)({},Object(ln.a)(e,function(n){switch(e.views.dict||(e.views=dn()),t.type){case"CREATE_VIEW":!function(e,t){var n=t.viewId,a=function(e){for(var t=1,n="Untitled".concat(t);e.has(n);)n="Untitled".concat(++t);return n}(e.views.orderSet);e.views.dict[n]={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},name:a},e.views.order.push(n),e.views.orderSet.add(a)}(n,t);break;case"UPDATE_VIEW_NAME":!function(e,t){var n=e.views,a=t.name,r=t.viewId;if(!n.orderSet.has(a)){var c=n.dict[r];n.orderSet.delete(c.name),c.name=a}}(n,t);break;case"APPEND_CHILD_VIEW":ze(n,t);break;case"REMOVE_CHILD_VIEW":!function(e,t){var n=e.views,a=t.subjectId,r=t.viewId,c=n.dict[r];Object(Q.remove)(c.children.order,function(e){return e===a})}(n,t)}return n}))},mn=Object(on.a)(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{subjects:{dict:{},order:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},searchSortOptions:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}},views:dn()}},sn,un),bn=n(114),pn=Object(an.a)(function(e,t){for(var n=e.dict,a=Object(Dt.a)(e,["dict"]),r={},c=0,i=Object.entries(n);c<i.length;c++){var o=i[c],l=Object(j.a)(o,2),s=l[0],d=l[1];r[s]=Object(z.a)({},d,{parents:Object(K.a)(d.parents)})}return Object(z.a)({dict:r},a)},function(e,t){for(var n=e.dict,a=Object(Dt.a)(e,["dict"]),r={},c=0,i=Object.entries(n);c<i.length;c++){var o=i[c],l=Object(j.a)(o,2),s=l[0],d=l[1],u=d.created,m=d.completed,b=d.dueDate,p=d.parents,f=Object(Dt.a)(d,["created","completed","dueDate","parents"]),h=m?new Date(m):void 0,v=b?new Date(b):void 0;r[s]=Object(z.a)({},f,{completed:h,created:new Date(u),dueDate:v,parents:new Set(p)})}return Object(z.a)({dict:r},a)},{whitelist:["subjects"]}),fn=Object(an.a)(function(e,t){e.orderSet;return Object(Dt.a)(e,["orderSet"])},function(e,t){var n=new Set,a=!0,r=!1,c=void 0;try{for(var i,o=e.order[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;n.add(e.dict[l].name)}}catch(s){r=!0,c=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return Object(z.a)({},e,{orderSet:n})},{whitelist:["views"]}),hn={key:"root",storage:cn.a,transforms:[pn,fn]},vn=Object(an.b)(hn,mn),jn=Object(en.createStore)(vn,Object(tn.composeWithDevTools)()),On=Object(an.c)(jn);Object(nn.a)(),i.a.render(r.a.createElement(T.a,{store:jn},r.a.createElement(bn.a,{loading:null,persistor:On},r.a.createElement(E.a,null,r.a.createElement(Zt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.3ce747ed.chunk.js.map