(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){e.exports=a(144)},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),o=a(14),l=a(3),s=a(198),d=a(28),u=a(8),m=a(184),p=a(197),b=a(75),f=a.n(b),h=a(98),j="/subjects",g=function(e,t){var a=t||"";return"".concat(j,"/").concat(a,"?").concat(f.a.stringify({display:e}))},v=function(e){var t=f.a.parse(e.search),a=Object(h.isUndefined)(t.display)||Array.isArray(t.display)?"grid":t.display;return"list"===a?a:"grid"},y=function(e,t){return"".concat(e.pathname,"?display=").concat(t)},O="/search",E=function(e,t){return"".concat(O,"/").concat(e,"/").concat(t)},C=function(e){try{return[e.params.param.toLowerCase(),e.params.query.toLowerCase()]}catch(t){throw Error("This isn't a search path.")}},k={base:"/",search:O+"/:param/:query",subject:j+"/:id?"},x=[k.search,k.subject,k.base],w=Object(l.B)({search:{display:"flex",flexDirection:"row"},searchBox:{flexGrow:1},searchDropdown:{width:150}}),S=[{key:"name",text:"Name"},{key:"description",text:"Description"},{key:"childname",text:"Child name"},{key:"childdescription",text:"Child description"}];function D(e){var t=e.history,a=e.match,c=Object(n.useState)("name"),i=Object(u.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(""),d=Object(u.a)(s,2),b=d[0],f=d[1];Object(n.useEffect)(function(){try{var e=C(a),t=Object(u.a)(e,2),n=t[0],r=t[1];l(n),f(r)}catch(c){l("name"),f("")}},[a]);var h=Object(n.useCallback)(function(e,t){var a=t?t.key:void 0;"string"===typeof a&&l(a)},[]),j=Object(n.useCallback)(function(e){t.push(E(o,e))},[t,o]);return r.a.createElement("div",{className:w.search},r.a.createElement(m.a,{options:S,selectedKey:o,className:w.searchDropdown,onChange:h}),r.a.createElement(p.a,{className:w.searchBox,value:b,placeholder:"Search",onSearch:j}))}var N=Object(l.y)(),T=Object(l.B)({appBar:{alignItems:"center",backgroundColor:N.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"grid",gridTemplateColumns:"150px minmax(200px, auto) 150px",height:48},link:{color:N.palette.black,textDecoration:"none",selectors:{"&:hover":{color:N.palette.neutralLighter,textDecoration:"none"}}},searchDropdown:{width:150},title:{paddingLeft:24}});function B(e){return r.a.createElement("div",{className:T.appBar},r.a.createElement(d.b,{to:k.base,className:T.link},r.a.createElement(s.a,{className:T.title,variant:"xLarge"},"hub")),r.a.createElement(D,e),r.a.createElement("div",null))}var R=a(200),I=a(199),L=a(7),_=a(29),U=a(103),P=a(10);function A(e,t){var a=t.order,n=t.options,r=n.fields,c=n.separateCompletedItems,i=[],o=[],l=!0,s=!1,d=void 0;try{for(var u,m=a[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var p=u.value;e[p].completed&&c?o.push(p):i.push(p)}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}var b=function(e,t){function a(e,t,a,n){n&&(Array.isArray(e)&&Array.isArray(t)||"string"===typeof e&&"string"===typeof t?(e=e.length,t=t.length):e instanceof Set&&t instanceof Set&&(e=e.size,t=t.size));var r=!Object(P.isUndefined)(e),c=!Object(P.isUndefined)(t),i=a?-1:1;return r||c?r&&!c?1*i:!r&&c?-1*i:e<t?-1*i:e>t?1*i:0:0}return function(n,r){var c=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var d=l.value,u=d.key,m=d.desc,p=d.compareLength,b=t[n][u],h=t[r][u];"children"===u&&(b=b.order,h=h.order);var j=a(b,h,m,p);if(0!==j)return j}}catch(f){i=!0,o=f}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}return 0}}(r,e);return i.sort(b),o.sort(b),i.concat(o)}function W(e,t){if(t in e){var a=!0,n=!1,r=void 0;try{for(var c,i=e[t].parents[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var o=e[c.value].children;o.order=A(e,o)}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}}var M=function(e){return Object(_.a)({subjectId:Object(U.v4)(),type:"CREATE_SUBJECT"},e)},z=function(e,t){return{parameters:t,separateCompletedItems:e,type:"SET_SEPARATE_COMPLETE"}},H=44,J=a(62),F=a(178),V=a(185),G=a(187),q=a(6),K=a(181),Y=a(25),Q=function(e,t){return{fields:e,parameters:t,type:"SET_FIELDS_ARRAY"}},$=function(e,t,a){return{desc:t,key:e,parameters:a,type:"SET_FIELDS_DESC"}},X=Object(l.y)(),Z=Object(l.B)({dragEnterClass:{backgroundColor:X.palette.neutralLight},gripperWrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",justifyContent:"center",width:"100%",selectors:{"&:hover":{cursor:"pointer"}}},wrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",paddingLeft:2,width:"100%"}});function ee(e){var t=e.subjectId,a=e.setSearchOptions,c=e.fields,i=Object(n.useRef)(-1),o=Object(n.useRef)(null),l=Object(n.useRef)(new F.a),d=Object(n.useRef)(null),m=Object(n.useState)(!1),p=Object(u.a)(m,2),b=p[0],f=p[1],h=Object(n.useCallback)(function(){f(!1)},[]),j=Object(n.useCallback)(function(){f(!0)},[]),g=Object(L.b)(),v=Object(n.useCallback)(function(e){var n=l.current.isIndexSelected(i.current)?l.current.getSelection():[o.current],r=c.filter(function(e){return-1===n.indexOf(e)}),s=r.indexOf(e);-1===s&&(s=0),r.splice.apply(r,[s,0].concat(Object(J.a)(n))),g(Q(r,{setSearchOptions:a,subjectId:t}))},[g,c,t,a]),y=Object(n.useCallback)(function(e,t){return!0},[]),O=Object(n.useCallback)(function(e){return!0},[]),E=Object(n.useCallback)(function(e,t){return Z.dragEnterClass},[]),C=Object(n.useCallback)(function(e,t){},[]),k=Object(n.useCallback)(function(e,t){o.current&&v(e)},[v]),x=Object(n.useCallback)(function(e,t,a,n){o.current=e,i.current=t},[]),w={canDrag:O,canDrop:y,onDragEnd:Object(n.useCallback)(function(e,t){o.current=null,i.current=-1},[]),onDragEnter:E,onDragLeave:C,onDragStart:x,onDrop:k},S=Object(n.useCallback)(function(e,n,r){g($(r,n,{setSearchOptions:a,subjectId:t}))},[g,t,a]),D=[{key:"gripper",minWidth:20,name:"",onRender:Object(n.useCallback)(function(){return r.a.createElement("div",{className:Z.gripperWrapper},r.a.createElement(V.a,{iconName:"GripperBarHorizontal"}))},[])},{fieldName:"name",key:"param",minWidth:150,name:"Parameter",onRender:Object(n.useCallback)(function(e){return r.a.createElement("div",{className:Z.wrapper},r.a.createElement(s.a,null,e.name))},[])},{fieldName:"desc",key:"direction",minWidth:150,name:"Direction",onRender:Object(n.useCallback)(function(e){return r.a.createElement("div",{className:Z.wrapper},r.a.createElement(I.a,{styles:{root:{margin:0}},key:e.key,defaultChecked:e.desc,offText:"Ascending",onText:"Descending",onChange:function(t,a){return S(t,a,e.key)}}))},[S])}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:d},r.a.createElement(R.a,{text:"Sort",iconProps:{iconName:"Sortlines"},ariaLabel:"Sort",onClick:j,styles:{root:{height:H}}})),r.a.createElement(G.a,{target:d.current,onDismiss:h,hidden:!b,directionalHint:q.a.bottomCenter,isBeakVisible:!1},r.a.createElement("div",{onBlur:h},r.a.createElement(K.a,{selection:l.current,columns:D,items:c,selectionMode:Y.b.none,dragDropEvents:w}))))}var te=Object(l.y)(),ae=Object(l.B)({leftWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},rightWrapper:{alignItems:"center",display:"flex",flexDirection:"row-reverse"},wrapper:{alignItems:"center",backgroundColor:te.palette.white,borderBottom:"1px solid "+te.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"flex",flexDirection:"row",height:H,justifyContent:"space-between",paddingLeft:24,paddingRight:24}});function ne(e){var t=e.match,a=e.location,c=e.history,i=t.params.id,o=Object(L.b)(),l=v(a),s=Object(L.c)(function(e){return e.subjects}),d=s.dict,u=s.order,m=s.searchSortOptions,p=Object(n.useCallback)(function(){o(M({parent:i}))},[o,i]),b=Object(n.useCallback)(function(){o(M())},[o]),f=Object(n.useCallback)(function(e,t){o(z(t,{subjectId:i}))},[o,i]),h=Object(n.useCallback)(function(e,t){o(z(t,{setSearchOptions:!0}))},[o]),g=Object(n.useCallback)(function(){c.push(y(a,"grid"===l?"list":"grid"))},[l,c,a]),E=[],C=[];if(t.path===k.subject||t.path===j){var x=i&&i in d?d[i].children.options:u.options,w=i?r.a.createElement(R.a,{text:"Create child subject",iconProps:{iconName:"Childof"},ariaLabel:"Create child subject",onClick:p,styles:{root:{height:H}}}):r.a.createElement(R.a,{text:"Create subject",iconProps:{iconName:"Add"},ariaLabel:"Create subject",onClick:b,styles:{root:{height:H}}});E.push(r.a.createElement("div",{key:"createSubject"},w)),"grid"===l&&E.push(r.a.createElement(ee,{key:"sort",subjectId:i,fields:x.fields})),E.push(r.a.createElement(I.a,{key:"separateComplete",checked:x.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:f,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}}))}else t.path!==k.search&&t.path!==O||("grid"===l&&E.push(r.a.createElement(ee,{key:"sort",setSearchOptions:!0,fields:m.fields})),E.push(r.a.createElement(I.a,{key:"separateComplete",checked:m.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:h,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}})));return C.push(r.a.createElement(R.a,{key:"toggleView",ariaLabel:"Toggle view",iconProps:{iconName:"list"===l?"BulletedListText":"GridViewMedium"},text:"list"===l?"List":"Grid",styles:{root:{background:te.palette.white,height:H}},menuProps:{directionalHintFixed:!0,items:["list"===l?{iconProps:{iconName:"GridViewMedium"},key:"gridButton",onClick:g,text:"Grid"}:{iconProps:{iconName:"BulletedListText"},key:"listButton",onClick:g,text:"List"}]}})),r.a.createElement("div",{className:ae.wrapper},r.a.createElement("div",{className:ae.leftWrapper},E),r.a.createElement("div",{className:ae.rightWrapper},C))}var re=a(44),ce=a(180);function ie(e,t,a){var n=[],r=a?a.parent:void 0,c=!0,i=!1,o=void 0;try{for(var l,s=t[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var d=l.value,u={id:d,parent:r,subject:e[d]};(Object(P.isUndefined)(a)||Object(P.isUndefined)(a.condition)||a.condition(u))&&n.push(u)}}catch(m){i=!0,o=m}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}return n}var oe=a(196),le=a(201),se=a(189),de=a(202),ue=a(188),me=a(193),pe=a(183),be=a(104),fe=Object(l.y)(),he=Object(l.B)({title:{border:"1px solid transparent",borderRadius:0,fontSize:be.a.size28,outline:"none",paddingBottom:4,textAlign:"center",width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+fe.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+fe.palette.neutralTertiary,outline:"none"}}}});function je(e){var t=e.value,a=e.className,n=e.onBlur,c=e.onChange;return r.a.createElement("div",{className:a},r.a.createElement("input",{className:he.title,onChange:c,onBlur:n,value:t}))}var ge=Object(l.B)({list:{overflow:"auto"}});function ve(e){var t,a=e.subjectId,n=e.maxHeight,c=e.onRenderCell,i=e.getChildren,o=e.notifyNoChildren,l=Object(L.c)(function(e){return e.subjects}),d=l.dict,u=l.order;if(i)t=ie(d,d[a].children.order,{parent:a});else{var m=new Set(d[a].children.order);t=ie(d,u.order,{condition:function(e){return!m.has(e.id)&&e.id!==a},parent:a})}return r.a.createElement(le.a,{className:ge.list,style:{maxHeight:n}},0===t.length&&o?r.a.createElement(s.a,null,"There's nothing here"," ",r.a.createElement("span",{role:"img","aria-label":"Gust of Wind emoji"},"\ud83d\udca8")):r.a.createElement(ce.a,{items:t,onRenderCell:c}))}var ye=function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}},Oe=function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}},Ee=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},Ce=function(e,t){var a=t.subjectId,n=t.level;!function e(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if(void 0===t[a].completed&&(t[a].completed=r,W(t,a),n>1)){var c=!0,i=!1,o=void 0;try{for(var l,s=t[a].children.order[Symbol.iterator]();!(c=(l=s.next()).done);c=!0)e(t,l.value,n-1,r)}catch(d){i=!0,o=d}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}}}(e.dict,a,n)},ke=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},xe=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},we=function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}},Se=a(192),De=a(182),Ne=function(e,t){return{child:t,subjectId:e,type:"APPEND_CHILD_SUBJECT"}},Te=a(195),Be=Object(l.y)(),Re="1px solid "+Be.palette.neutralTertiary,Ie=Object(l.B)({wrapper:{border:Re,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",gridTemplateRows:"auto auto",marginBottom:2},checkboxWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},checkbox:{margin:8},divider:{background:Be.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},button:{gridColumn:"3"},content:{gridColumn:"1 / 3",gridRow:"2",paddingLeft:8,paddingRight:8}});function Le(e){var t=e.button,a=e.checked,c=e.children,i=e.contextMenuItems,o=e.editable,l=e.key,s=e.label,d=e.onCheckboxChange,m=e.onEditableBlur,p=Object(n.useRef)(null),b=Object(n.useState)(s),f=Object(u.a)(b,2),h=f[0],j=f[1],g=Object(n.useState)(!1),v=Object(u.a)(g,2),y=v[0],O=v[1];Object(n.useEffect)(function(){j(s)},[s]);var E=Object(n.useCallback)(function(e){e.preventDefault(),O(!y)},[y]),C=Object(n.useCallback)(function(e,t){j(t||"")},[]),k=Object(n.useCallback)(function(){if(m){var e=h||"Untitled";m(e),j(e)}},[h,m]);return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:E,ref:p,key:l},r.a.createElement("div",{className:Ie.wrapper},r.a.createElement("div",{className:Ie.checkboxWrapper},r.a.createElement(Te.a,{checked:a,label:o?void 0:s,className:Ie.checkbox,onChange:d}),o?r.a.createElement(ue.a,{value:h,borderless:!0,onChange:m?C:void 0,onBlur:k}):null),r.a.createElement("div",{className:Ie.content},c),t?r.a.createElement("span",{className:Ie.divider}):null,r.a.createElement("div",{className:Ie.button},t||null)),r.a.createElement(De.a,{hidden:!(i&&y),isBeakVisible:!1,onDismiss:E,target:p,directionalHint:q.a.bottomRightEdge,items:i}))}function _e(e){var t=e.id,a=e.parent,c=e.subject,i=Object(L.b)(),o=Object(n.useCallback)(function(e,n){!0===n&&i(Ne(a,t))},[i,t,a]);return r.a.createElement(Le,{checked:!1,label:c.name,onCheckboxChange:o})}function Ue(e){if(e&&!Object(P.isUndefined)(e.parent))return r.a.createElement(_e,e)}var Pe=32,Ae=Object(l.y)(),We=Object(l.B)({wrapper:{border:Re,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",marginBottom:1,marginTop:1},button:{alignItems:"center",background:Ae.palette.white,border:"none",cursor:"pointer",display:"flex",flexDirection:"row",height:Pe,outline:"none",padding:0,selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:hover":{filter:"brightness(90%)",outline:"none"}}},divider:{background:Ae.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},icon:{fontSize:12,margin:8,paddingLeft:4,textAlign:"center"},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),Me=function(e){var t=e.parent,a=Object(n.useRef)(null),c=Object(L.b)(),i=Object(n.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],m=Object(n.useState)(!1),p=Object(u.a)(m,2),b=p[0],f=p[1],h=Object(n.useCallback)(function(){return d(!1)},[]),j=Object(n.useCallback)(function(){return d(!0)},[]),g=Object(n.useCallback)(function(){return f(!b)},[b]),v=Object(n.useCallback)(function(){return f(!1)},[]),y=Object(n.useCallback)(function(){c(M({parent:t}))},[c,t]),O=[{iconProps:{iconName:"ChildOf"},key:"appendChildren",onClick:j,text:"Append child subject"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:We.wrapper},r.a.createElement("button",{className:We.button,style:{gridColumn:1},onClick:y},r.a.createElement(V.a,{iconName:"Add",className:We.icon}),r.a.createElement(s.a,{className:We.text},"Add child")),r.a.createElement("span",{className:We.divider}),r.a.createElement("button",{className:We.button,onClick:g,ref:a,style:{gridColumn:3}},r.a.createElement(V.a,{iconName:"ChevronDown",style:{width:"100%"}}))),r.a.createElement(Se.a,{isOpen:l,isLightDismiss:!0,headerText:"Append Children",onDismiss:h},r.a.createElement(ve,{subjectId:t,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(115,")"),onRenderCell:Ue})),b?r.a.createElement(De.a,{isBeakVisible:!1,onDismiss:v,target:a,directionalHint:q.a.bottomRightEdge,items:O}):null)},ze=function(e,t){return{parent:t,subjectId:e,type:"REMOVE_CHILD_SUBJECT"}},He=Object(l.B)({open:{height:40,width:"100%"}});function Je(e){var t=e.id,a=e.parent,c=e.subject,i=Object(L.b)(),o=Object(n.useCallback)(function(e,a,n){i(!0===a?Ee(t,n):ke(t))},[i,t]),l=Object(n.useCallback)(function(e){i(ye(t,e||"Untitled"))},[i,t]),s=[{key:"complete-1-level",text:"Mark as complete",onClick:Object(n.useCallback)(function(e,t){t&&o(e,!t.checked,1)},[o])},{key:"complete-2-level",text:"Mark this and its children as complete",onClick:Object(n.useCallback)(function(e,t){t&&o(e,!t.checked,2)},[o])},{key:"remove",text:"Remove this as a child",onClick:Object(n.useCallback)(function(){i(ze(t,a))},[i,t,a])},{key:"delete",text:"Delete this",onClick:Object(n.useCallback)(function(){i(xe(t))},[i,t])}],u="Open "+c.name,m=r.a.createElement(d.b,{to:g("grid",t)},r.a.createElement(de.a,{className:He.open,iconProps:{iconName:"OpenFile"},ariaLabel:u,title:u}));return r.a.createElement(Le,{editable:!0,onEditableBlur:l,checked:!!c.completed,label:c.name,onCheckboxChange:o,contextMenuItems:s,button:m})}function Fe(e){if(e&&!Object(P.isUndefined)(e.parent))return r.a.createElement(Je,Object.assign({},e,{key:e.id}))}var Ve=Object(l.y)(),Ge="1px solid "+Ve.palette.neutralTertiary,qe=Object(l.B)({headerWrapper:{display:"grid",gridTemplateColumns:"auto 32px"},header:{alignItems:"center",borderTopLeftRadius:4,borderTopRightRadius:4,color:Ve.palette.neutralLight,display:"flex",flexDirection:"column",gridColumn:"1 / 3",gridRow:"1",margin:-1,padding:5,zIndex:1,selectors:{"&:focus":{border:"none",outline:"none"}}},headerButton:{background:Ve.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderRight:Ge,borderTop:Ge,borderTopLeftRadius:0,borderTopRightRadius:4,marginBottom:-1,marginLeft:0,marginRight:-1,marginTop:-1,outline:"none",zIndex:2},headerLink:{gridColumn:"2",gridRow:"1",outline:"none"},body:{padding:10},title:{alignItems:"center",display:"flex",flexDirection:"column",paddingBottom:5,paddingTop:10},description:{paddingBottom:10,paddingTop:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:Ve.palette.white,border:Ge,width:"100%"},heroButton:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:10}});function Ke(e){var t=e.subject,a=e.id,c=e.listHeight,i=e.showOpenButton,o=Object(L.b)(),l=Object(n.useState)(t.name),m=Object(u.a)(l,2),p=m[0],b=m[1],f=Object(n.useState)(t.description),h=Object(u.a)(f,2),j=h[0],v=h[1];Object(n.useEffect)(function(){b(t.name)},[t.name]),Object(n.useEffect)(function(){v(t.description)},[t.description]);var y,O,E,C,k=Object(n.useCallback)(function(e){b(e.target.value)},[]),x=Object(n.useCallback)(function(){var e=p||"Untitled";t.name!==e&&o(ye(a,e)),b(e)},[o,a,p,t.name]),w=Object(n.useCallback)(function(e,t){v(t||"")},[]),S=Object(n.useCallback)(function(){t.description!==j&&o(Oe(a,j))},[o,a,j,t.description]),D=Object(n.useCallback)(function(e){o(we(a,e||void 0))},[o,a]),N=Object(n.useCallback)(function(){o(Ee(a,1))},[o,a]),T=Object(n.useCallback)(function(){o(ke(a))},[o,a]),B=Object(n.useCallback)(function(){return D()},[D]),R={key:"complete-2-level",text:"Mark this and its children as complete",onClick:Object(n.useCallback)(function(){o(Ee(a,2))},[o,a])},I={key:"delete",text:"Delete this",onClick:Object(n.useCallback)(function(){o(xe(a))},[o,a])},_=t.dueDate?(y=new Date,O=t.dueDate,Math.ceil((O.valueOf()-y.valueOf())/864e5)):"\u221e";t.completed?(E=r.a.createElement(s.a,{className:qe.header,style:{backgroundColor:Ve.palette.red}},"Completed ",t.completed.toLocaleString()),C=r.a.createElement(oe.a,{text:"Mark as uncomplete",split:!0,onClick:T,menuProps:{directionalHint:q.a.bottomCenter,isBeakVisible:!1,items:[I]},style:{background:Ve.palette.white}})):(E=r.a.createElement(s.a,{className:qe.header,style:{backgroundColor:Ve.palette.green}},"Created ",t.created.toLocaleString()),C=r.a.createElement(oe.a,{primary:!0,text:"Mark as complete",split:!0,onClick:N,menuProps:{directionalHint:q.a.bottomCenter,isBeakVisible:!1,items:[R,I]}}));var U="Open "+t.name;return r.a.createElement(le.a,null,r.a.createElement(se.a,{verticalAlign:"center"},r.a.createElement("div",{className:qe.headerWrapper},E,i?r.a.createElement(d.b,{to:g("grid",a),className:qe.headerLink},r.a.createElement(de.a,{styles:{root:{width:""}},className:qe.headerButton,iconProps:{iconName:"OpenFile"},title:U,ariaLabel:U})):null),r.a.createElement("div",{className:qe.body},r.a.createElement(je,{className:qe.title,value:p,onChange:k,onBlur:x}),r.a.createElement(ue.a,{multiline:!0,rows:3,value:j,onChange:w,onBlur:S,className:qe.description}),r.a.createElement("div",{className:qe.date},r.a.createElement(me.a,null,"Due date:"),r.a.createElement("div",{className:qe.datePicker},r.a.createElement(pe.a,{value:t.dueDate,onSelectDate:D}),t.dueDate?r.a.createElement(de.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:B}):null)),r.a.createElement("div",{className:qe.daysLeft},r.a.createElement(me.a,null,"".concat(_," ").concat(1===_?"day":"days"," left"))),r.a.createElement("div",{style:{minHeight:"calc((".concat(c,") + ").concat(Pe,"px)")}},r.a.createElement(ve,{subjectId:a,maxHeight:"calc(".concat(c,")"),onRenderCell:Fe,getChildren:!0}),r.a.createElement(Me,{parent:a})),r.a.createElement("div",{className:qe.heroButton},C))))}var Ye=function(e,t){for(var a=0;a<t.length;a++){if(t[a]!==e[a])return a}return 0},Qe=3,$e=603,Xe=400,Ze=Object(l.y)(),et=Object(l.B)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(Xe,"px")},grid:{height:"calc(100vh - ".concat(48,"px - ").concat(45,"px)"),overflow:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+Ze.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"}}),tt=function(){return $e*Qe};function at(e){var t=e.options,a=e.sortOptions,c=t?t.parent:void 0,i=Object(n.useRef)(0),o=Object(n.useRef)(0),l=Object(n.useRef)(null),s=Object(L.c)(function(e){return e.subjects}),d=s.dict,m=!Object(P.isUndefined)(c)&&c in d?d[c].children.order:s.order.order,p=Object(n.useState)(m),b=Object(u.a)(p,2),f=b[0],h=b[1];Object(n.useEffect)(function(){document.title=c?"hub - "+d[c].name:"hub"},[c,d]),Object(n.useEffect)(function(){if(l.current&&f!==m&&m.length>0){var e=Ye(f,m),t=d[m[e]];(0===t.parents.size||t.parents.has(c))&&l.current.scrollToIndex(e,function(){return $e},re.a.top),h(m)}},[m,f,c,d]);var j=Object(n.useCallback)(function(e){if(e){var t=e.id,a=e.subject;return r.a.createElement("div",{className:et.tile,"data-is-focusable":!0,key:t,style:{height:$e,width:100/i.current+"%"}},r.a.createElement("div",{className:et.padding},r.a.createElement("div",{className:et.contents},r.a.createElement(Ke,{subject:a,id:t,listHeight:"260px",showOpenButton:!0}))))}},[]),g=Object(n.useCallback)(function(e,t){if(0===e&&t){var a=t.width/Xe;i.current=t.width>1.5*Xe?Math.ceil(a):Math.floor(a),o.current=Math.floor(t.width/i.current)}return i.current*Qe},[]),v=a?A(d,{options:a,order:m}):m,y=ie(d,v,t);return r.a.createElement(ce.a,{ref:l,className:et.grid,items:y,getItemCountForPage:g,getPageHeight:tt,renderedWindowsAhead:4,onRenderCell:j})}var nt=a(105),rt=a.n(nt),ct=a(190),it=Object(l.y)(),ot=Object(l.B)({detailsList:{height:"calc(100vh - ".concat(48,"px - ").concat(45,"px)")},rowButton:{selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:hover":{filter:"brightness(90%)",outline:"none"}}},rowButtonWrapper:{display:"flex",flexDirection:"row"},subjectWrapper:{backgroundColor:it.palette.white,border:"1px solid "+it.palette.neutralTertiary,borderRadius:4}});var lt=Object(o.g)(function(e){var t,a,c,i=e.history,o=e.options,l=e.sortOptions,s=Object(L.c)(function(e){return e}).subjects,m=Object(L.b)(),p=o?o.parent:void 0;l?(t=A(s.dict,Object(_.a)({},s.order,{options:l})),a=l.fields,c={setSearchOptions:!0}):p?(t=s.dict[p].children.order,a=s.dict[p].children.options.fields,c={subjectId:p}):(t=s.order.order,a=s.order.options.fields,c={});var b=Object(n.useCallback)(function(e,t){"openButton"!==t.key&&m($(t.key,!t.isSortedDescending,c))},[m,c]),f=Object(n.useCallback)(function(e,t,a){return e.subject[a.key]},[]),h=Object(n.useCallback)(function(e){return e.subject.children.order.length.toLocaleString()},[]),j=Object(n.useCallback)(function(e,t,a){var n=e.subject[a.key];return n?n.toLocaleString():""},[]),v=Object(n.useState)(null),y=Object(u.a)(v,2),O=y[0],E=y[1],C=Object(n.useCallback)(function(){E(null)},[]),k=Object(n.useCallback)(function(e){E(e)},[]);Object(n.useEffect)(function(){if(O)if(O.id in s.dict){var e=s.dict[O.id];e!==O.subject&&E(Object(_.a)({},O,{subject:e}))}else E(null)},[s.dict,O]);var x=Object(n.useCallback)(function(e){var t="Open "+e.subject.name,a="Edit "+e.subject.name;return r.a.createElement("div",{className:ot.rowButtonWrapper},r.a.createElement(de.a,{onClick:function(){return k(e)},styles:{root:{width:""}},className:ot.rowButton,iconProps:{iconName:"Edit"},title:a,ariaLabel:a}),r.a.createElement(d.b,{to:g("list",e.id)},r.a.createElement(de.a,{styles:{root:{width:""}},className:ot.rowButton,iconProps:{iconName:"OpenFile"},title:t,ariaLabel:t})))},[k]),w=Object(n.useCallback)(function(e){i.push(g("list",e.id))},[i]),S={children:{isResizable:!0,key:"children",minWidth:100,name:"# Children",onRender:h},completed:{isResizable:!0,key:"completed",minWidth:150,name:"Completed",onRender:j},created:{isResizable:!0,key:"created",minWidth:150,name:"Date created",onRender:j},description:{isResizable:!0,key:"description",minWidth:100,name:"Description",onRender:f},dueDate:{isResizable:!0,key:"dueDate",minWidth:150,name:"Due date",onRender:j},name:{isResizable:!0,key:"name",minWidth:100,name:"Name",onRender:f}},D=Object(n.useCallback)(function(e,t){var n=a[e],r=a.filter(function(t,a){return a!==e});r.splice(t,0,n),m(Q(r,c))},[a,m,c]),N=ie(s.dict,t,o),T=[],B=!0,R=!1,I=void 0;try{for(var U,P=a[Symbol.iterator]();!(B=(U=P.next()).done);B=!0){var W=U.value,M=S[W.key];M&&(M.isSorted=!0,M.isSortedDescending=W.desc,T.push(M))}}catch(q){R=!0,I=q}finally{try{B||null==P.return||P.return()}finally{if(R)throw I}}T.push({key:"openButton",minWidth:80,name:"",onRender:x});var z=Object(n.useState)(t),H=Object(u.a)(z,2),J=H[0],F=H[1],V=Object(n.useRef)(null);!O||O.id in s.dict||E(null),Object(n.useEffect)(function(){if(V.current&&J!==t&&t.length>0){var e=Ye(J,t),a=s.dict[t[e]];(0===a.parents.size||a.parents.has(p))&&V.current.focusIndex(e),F(t)}},[t,O,p,J,s.dict]);var G=Object(n.useCallback)(function(e){return e.id},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{getKey:G,componentRef:V,onColumnHeaderClick:b,className:ot.detailsList,columns:T,items:N,isHeaderVisible:!0,selectionMode:Y.b.none,onItemInvoked:w,columnReorderOptions:{frozenColumnCountFromEnd:1,frozenColumnCountFromStart:0,handleColumnReorder:D}}),r.a.createElement(ct.a,{isOpen:!!O,onDismiss:C,styles:{main:{backgroundColor:"none",border:"1px solid transparent",borderRadius:4}}},r.a.createElement("div",{className:ot.subjectWrapper},O?r.a.createElement(Ke,{id:O.id,subject:O.subject,showOpenButton:!0}):null)))}),st=Object(l.y)(),dt=Object(l.B)({sidebar:{border:"1px solid "+st.palette.white,borderRadius:4,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",gridColumn:"2",zIndex:10},wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(Xe,"px")}});function ut(e){var t=e.viewComponent,a=e.sidebarComponent;return r.a.createElement("div",{className:dt.wrapper},t,r.a.createElement("div",{className:dt.sidebar},a))}function mt(e){var t=e.match,a=e.location,n=t.params.id,c=v(a),i=rt()(),l=Object(L.c)(function(e){return e.subjects}).dict;if(!Object(P.isUndefined)(n)&&!(n in l))return r.a.createElement(o.a,{to:"/"});if(Object(P.isUndefined)(n))return"list"===c?r.a.createElement(lt,null):r.a.createElement(at,null);var s=r.a.createElement(Ke,{subject:l[n],id:n});if(i.innerWidth>2*Xe){var d={parent:n};return r.a.createElement(ut,{viewComponent:"grid"===c?r.a.createElement(at,{options:d}):r.a.createElement(lt,{options:d}),sidebarComponent:s})}return s}var pt=new Set(S.reduce(function(e,t){return e.push(String(t.key).toLowerCase()),e},[]));function bt(e){var t=e.match,a=e.location,c=v(a),i=C(t),o=Object(u.a)(i,2),l=o[0],d=o[1],m=Object(L.c)(function(e){return e.subjects}),p=m.dict,b=m.searchSortOptions,f=Object(n.useCallback)(function(e){var t=e.subject;switch(l){case"childname":var a=!0,n=!1,r=void 0;try{for(var c,i=t.children.order[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var o=c.value;if(p[o].name.toLowerCase().includes(d))return!0}}catch(j){n=!0,r=j}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}return!1;case"childdescription":var s=!0,u=!1,m=void 0;try{for(var b,f=t.children.order[Symbol.iterator]();!(s=(b=f.next()).done);s=!0){var h=b.value;if(p[h].description.toLowerCase().includes(d))return!0}}catch(j){u=!0,m=j}finally{try{s||null==f.return||f.return()}finally{if(u)throw m}}return!1;default:return e.subject[l].toLowerCase().includes(d)}},[p,l,d]);return pt.has(l)?"list"===c?r.a.createElement(lt,{options:{condition:f},sortOptions:b}):r.a.createElement(at,{options:{condition:f},sortOptions:b}):r.a.createElement(s.a,null,"Sorry that search parameter was invalid.")}var ft=function(){return r.a.createElement("div",null,r.a.createElement(o.b,{path:x,component:B}),r.a.createElement(o.b,{path:x,component:ne}),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:k.subject,component:mt}),r.a.createElement(o.b,{path:k.search,component:bt}),r.a.createElement(o.a,{to:j})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=a(26),jt=a(106),gt=a(110),vt=a(51),yt=a(107),Ot=a.n(yt),Et=a(108),Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dict:{},order:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},searchSortOptions:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}},t=arguments.length>1?arguments[1]:void 0;return Object(Et.a)(e,function(e){switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var a=t.subjectId,n=t.name;e.dict[a].name=n,W(e.dict,a)}(e,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var a=t.subjectId,n=t.description;e.dict[a].description=n,W(e.dict,a)}(e,t);break;case"COMPLETE_SUBJECT":Ce(e,t);break;case"UNCOMPLETE_SUBJECT":!function(e,t){var a=t.subjectId;e.dict[a].completed=void 0,W(e.dict,a)}(e,t);break;case"DELETE_SUBJECT":!function(e,t){var a=t.subjectId,n=!0,r=!1,c=void 0;try{for(var i,o=e.dict[a].parents[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;Object(P.remove)(e.dict[l].children.order,function(e){return e===a})}}catch(f){r=!0,c=f}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}var s=!0,d=!1,u=void 0;try{for(var m,p=e.dict[a].children.order[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var b=m.value;e.dict[b].parents.delete(a)}}catch(f){d=!0,u=f}finally{try{s||null==p.return||p.return()}finally{if(d)throw u}}Object(P.remove)(e.order.order,function(e){return e===a}),W(e.dict,a),delete e.dict[a]}(e,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var a=t.subjectId,n=t.date;e.dict[a].dueDate=n,W(e.dict,a)}(e,t);break;case"CREATE_SUBJECT":!function(e,t){var a=t.subjectType,n=t.parent,r=t.subjectId,c={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},created:new Date,description:"",name:"Untitled",parents:new Set,type:a||"BaseSubject"};if(e.dict[r]=c,void 0!==n){c.parents.add(n);var i=e.dict[n];i.children.order.push(r),A(e.dict,i.children)}e.order.order.push(r)}(e,t);break;case"REMOVE_CHILD_SUBJECT":!function(e,t){var a=t.subjectId,n=t.parent;Object(P.remove)(e.dict[n].children.order,function(e){return e===a}),e.dict[a].parents.delete(n),W(e.dict,a)}(e,t);break;case"APPEND_CHILD_SUBJECT":!function(e,t){var a=t.subjectId,n=t.child,r=e.dict[a].children;r.order.push(n),r.order=A(e.dict,r),e.dict[n].parents.add(a)}(e,t);break;case"SET_FIELDS_ARRAY":!function(e,t){var a=t.parameters,n=a.subjectId,r=a.setSearchOptions,c=t.fields;if((r?e.searchSortOptions:n?e.dict[n].children.options:e.order.options).fields=c,n){var i=e.dict[n].children;i.order=A(e.dict,i)}}(e,t);break;case"SET_FIELDS_DESC":!function(e,t){var a,n=t.parameters,r=n.subjectId,c=n.setSearchOptions,i=t.key,o=t.desc;a=c?e.searchSortOptions:r?e.dict[r].children.options:e.order.options;var l=!0,s=!1,d=void 0;try{for(var u,m=a.fields[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var p=u.value;if(p.key===i){if(p.desc=o,r){var b=e.dict[r].children;b.order=A(e.dict,b)}return}}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}}(e,t);break;case"SET_SEPARATE_COMPLETE":!function(e,t){var a=t.separateCompletedItems,n=t.parameters,r=n.subjectId;if((n.setSearchOptions?e.searchSortOptions:r?e.dict[r].children.options:e.order.options).separateCompletedItems=a,r){var c=e.dict[r].children;c.order=A(e.dict,c)}}(e,t)}return e.order.order.length>0&&(e.order.order=A(e.dict,e.order)),Object(P.isUndefined)(e.searchSortOptions)&&(e.searchSortOptions={fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}),e})},kt=Object(ht.combineReducers)({subjects:Ct}),xt=a(109),wt=a(65),St=Object(vt.a)(function(e,t){for(var a=e.dict,n=Object(wt.a)(e,["dict"]),r={},c=0,i=Object.entries(a);c<i.length;c++){var o=i[c],l=Object(u.a)(o,2),s=l[0],d=l[1];r[s]=Object(_.a)({},d,{parents:Object(J.a)(d.parents)})}return Object(_.a)({dict:r},n)},function(e,t){for(var a=e.dict,n=Object(wt.a)(e,["dict"]),r={},c=0,i=Object.entries(a);c<i.length;c++){var o=i[c],l=Object(u.a)(o,2),s=l[0],d=l[1],m=d.created,p=d.completed,b=d.dueDate,f=d.parents,h=Object(wt.a)(d,["created","completed","dueDate","parents"]),j=p?new Date(p):void 0,g=b?new Date(b):void 0;r[s]=Object(_.a)({},h,{completed:j,created:new Date(m),dueDate:g,parents:new Set(f)})}return Object(_.a)({dict:r},n)},{whitelist:["subjects"]}),Dt={key:"root",storage:Ot.a,transforms:[St]},Nt=Object(vt.b)(Dt,kt),Tt=Object(ht.createStore)(Nt,Object(jt.composeWithDevTools)()),Bt=Object(vt.c)(Tt);Object(gt.a)(),i.a.render(r.a.createElement(L.a,{store:Tt},r.a.createElement(xt.a,{loading:null,persistor:Bt},r.a.createElement(d.a,null,r.a.createElement(ft,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[117,1,2]]]);
//# sourceMappingURL=main.921b8c0a.chunk.js.map