(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),i=n.n(c),o=n(161),l=n(3),d=n(15),s=n(13);function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1;return function(n,a){var r=n.subject[e],c=a.subject[e],i=!Object(s.isUndefined)(r),o=!Object(s.isUndefined)(c);return i||o?i&&!o?1*t:!i&&o?-1*t:r<c?-1*t:r>c?1*t:0:0}}function m(e,t,n){var a=[],r=[];if(void 0!==t&&n&&n.getChildrenOfParent){if(!(t in e))throw new Error("Given id is not valid");var c=e[t],i=!0,o=!1,l=void 0;try{for(var d,m=c.children[Symbol.iterator]();!(i=(d=m.next()).done);i=!0){var p=d.value,b={id:p,subject:e[p],parent:t};(Object(s.isUndefined)(n)||Object(s.isUndefined)(n.condition)||n.condition(b))&&(n&&n.separateCompletedItems&&e[p].completed?r.push(b):a.push(b))}}catch(g){o=!0,l=g}finally{try{i||null==m.return||m.return()}finally{if(o)throw l}}}else for(var f=0,h=Object.entries(e);f<h.length;f++){var v=h[f],E={id:v[0],subject:v[1],parent:t};(Object(s.isUndefined)(n)||Object(s.isUndefined)(n.condition)||n.condition(E))&&(n&&n.separateCompletedItems&&v[1].completed?r.push(E):a.push(E))}return a.sort(u("created",!0)),r.sort(u("created",!0)),a.concat(r)}var p=n(23),b=n(154),f=n(156),h=n(5),v=n(160),E=n(151),g=n(150),j=n(153),y=n(143),x=n(157),C=n(83),O=Object(l.v)(),k=Object(l.x)({title:{textAlign:"center",fontSize:C.a.size28,border:"1px solid transparent",outline:"none",borderRadius:0,paddingBottom:4,width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+O.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+O.palette.neutralTertiary,outline:"none"}}}}),w=function(e){var t=e.value,n=e.className,a=e.onBlur,c=e.onChange;return r.a.createElement("div",{className:n},r.a.createElement("input",{className:k.title,onChange:c,onBlur:a,value:t}))},S=Object(l.x)({list:{overflow:"auto"}}),T=function(e){var t,n=e.subjectId,a=e.maxHeight,c=e.onRenderCell,i=e.getChildren,l=Object(d.c)(function(e){return e.subjects});if(i)t=m(l,n,{getChildrenOfParent:!0});else{var s=new Set(l[n].children);t=m(l,n,{condition:function(e){return!s.has(e.id)&&e.id!==n}})}return r.a.createElement(v.a,{className:S.list,style:{maxHeight:a}},r.a.createElement(o.a,{items:t,onRenderCell:c}))},D=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},N=function(e,t){!function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if(void 0===t[n].completed&&(t[n].completed=r,a>1)){var c=!0,i=!1,o=void 0;try{for(var l,d=t[n].children[Symbol.iterator]();!(c=(l=d.next()).done);c=!0)e(t,l.value,a-1,r)}catch(s){i=!0,o=s}finally{try{c||null==d.return||d.return()}finally{if(i)throw o}}}}(e,t.subjectId,t.level)},B=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},I=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},U=n(147),_=n(148),L=function(e,t){return{subjectId:e,child:t,type:"APPEND_CHILD_SUBJECT"}},R=n(155),P=n(142),M="1px solid "+Object(l.v)().palette.neutralTertiary,J=Object(l.x)({wrapper:{display:"flex",flexDirection:"row",border:M,borderRadius:2,marginBottom:2},checkbox:{margin:8},content:{display:"flex",flexGrow:2,paddingLeft:8,paddingRight:8}}),A=function(e){var t=e.onCheckboxChange,n=e.key,c=e.children,i=e.contextMenuItems,o=e.button,l=e.checked,d=e.label,s=Object(a.useRef)(null),u=Object(a.useState)(!1),m=Object(p.a)(u,2),b=m[0],f=m[1];function v(e){e.preventDefault(),f(!b)}return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:v,ref:s,key:n},r.a.createElement("div",{className:J.wrapper},r.a.createElement(R.a,{checked:l,label:d,className:J.checkbox,onChange:t}),r.a.createElement("div",{className:J.content},c),o||null),i&&b?r.a.createElement(P.a,{isBeakVisible:!1,onDismiss:v,target:s,directionalHint:h.a.bottomRightEdge,items:i}):null)};function H(e){var t=e.id,n=e.parent,a=e.subject,c=Object(d.b)();return r.a.createElement(A,{checked:!1,label:a.name,onCheckboxChange:function(e,a){!0===a&&c(L(n,t))}})}var V=function(e){if(e&&!Object(s.isUndefined)(e.parent))return r.a.createElement(H,e)},W=Object(l.v)(),z=Object(l.x)({button:{display:"flex",flexDirection:"row",alignItems:"center",background:W.palette.white,border:"1px solid "+W.palette.neutralTertiary,borderRadius:2,marginTop:1,marginBottom:1,padding:0,height:32,width:"100%",cursor:"pointer",outline:"none",selectors:{"&:hover":{filter:"brightness(90%)",outline:"none"},"&:active":{filter:"brightness(80%)",outline:"none"}}},icon:{paddingLeft:4,margin:8},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),F=function(e){var t=e.parent,n=Object(a.useState)(!1),c=Object(p.a)(n,2),i=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:z.button,onClick:function(){return o(!0)}},r.a.createElement(U.a,{iconName:"Add",className:z.icon}),r.a.createElement(b.a,{className:z.text},"Append children")),r.a.createElement(_.a,{isOpen:i,isLightDismiss:!0,headerText:"Append Children",onDismiss:function(){return o(!1)}},r.a.createElement(T,{subjectId:t,maxHeight:"calc(100vh-".concat(115,")"),onRenderCell:V})))},G=n(44),Q=n(145),$=n(37),q=function(e,t){return{subjectId:e,parent:t,type:"REMOVE_CHILD_SUBJECT"}},K=Object(l.v)(),X=Object(l.x)({open:{color:K.palette.white,background:K.palette.themePrimary,fontSize:18,cursor:"pointer",border:"none",outline:"none",margin:-1,height:40,selectors:{"&:hover":{filter:"brightness(90%)"},"&:active":{filter:"brightness(80%)"}}}});function Y(e){var t=e.id,n=e.parent,c=e.subject,i=Object(d.b)(),o=Object(a.useRef)(Object(G.c)(t)),l=function(e,n,a){i(!0===n?D(t,a):B(t))},s=[{key:"complete-1-level",text:"Mark as complete",onClick:function(e,t){t&&l(0,!t.checked,1)}},{key:"complete-2-level",text:"Mark this and its children as complete",onClick:function(e,t){t&&l(0,!t.checked,2)}},{key:"remove",text:"Remove this as a child",onClick:function(){return i(q(t,n))}},{key:"delete",text:"Delete this",onClick:function(){return i(I(t))}}],u=r.a.createElement(Q.a,{content:"Open "+c.name,id:o.current},r.a.createElement($.b,{to:"/".concat(t)},r.a.createElement("button",{className:X.open,"aria-labelledby":o.current},r.a.createElement(U.a,{iconName:"OpenFile"}))));return r.a.createElement(A,{checked:!!c.completed,label:c.name,onCheckboxChange:l,contextMenuItems:s,button:u})}function Z(e){if(e&&!Object(s.isUndefined)(e.parent))return r.a.createElement(Y,e)}var ee=Object(l.v)(),te=Object(l.x)({header:{color:ee.palette.neutralLight,padding:5,display:"flex",flexDirection:"column",alignItems:"center",selectors:{"&:focus":{outline:"none",border:"none"}}},body:{padding:10},title:{paddingTop:10,paddingBottom:5,display:"flex",flexDirection:"column",alignItems:"center"},description:{paddingTop:10,paddingBottom:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:ee.palette.white,border:"1px solid "+ee.palette.neutralTertiary,width:"100%"},heroButton:{marginTop:10,display:"flex",flexDirection:"column",alignItems:"center"}});var ne=function(e){var t,n,c,i,o=e.subject,l=e.id,s=e.listHeight,u=Object(d.b)(),m=Object(a.useState)(o.name),C=Object(p.a)(m,2),O=C[0],k=C[1],S=Object(a.useState)(o.description||""),N=Object(p.a)(S,2),U=N[0],_=N[1],L=function(e){u(function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}}(l,e||void 0))},R={key:"complete-2-level",text:"Mark this and its children as complete",onClick:function(){u(D(l,2))}},P={key:"delete",text:"Delete this",onClick:function(){u(I(l))}},M=o.dueDate?(t=new Date,n=o.dueDate,Math.ceil((n.valueOf()-t.valueOf())/864e5)):"\u221e";return o.completed?(c=r.a.createElement(b.a,{className:te.header,style:{backgroundColor:ee.palette.red}},"Completed ",o.completed.toLocaleString()),i=r.a.createElement(f.a,{text:"Mark as uncomplete",split:!0,onClick:function(){return u(B(l))},menuProps:{directionalHint:h.a.bottomCenter,isBeakVisible:!1,items:[P]},style:{background:ee.palette.white}})):(c=r.a.createElement(b.a,{className:te.header,style:{backgroundColor:ee.palette.green}},"Created ",o.created.toLocaleString()),i=r.a.createElement(f.a,{primary:!0,text:"Mark as complete",split:!0,onClick:function(){return u(D(l,1))},menuProps:{directionalHint:h.a.bottomCenter,isBeakVisible:!1,items:[R,P]}})),r.a.createElement(v.a,null,r.a.createElement(E.a,{verticalAlign:"center"},c,r.a.createElement("div",{className:te.body},r.a.createElement(w,{className:te.title,value:O,onChange:function(e){k(e.target.value||"Untitled")},onBlur:function(){o.name!==O&&u(function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}}(l,O))}}),r.a.createElement(g.a,{multiline:!0,rows:3,value:U,onChange:function(e,t){_(t||"")},onBlur:function(){o.description!==U&&u(function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}}(l,U))},className:te.description}),r.a.createElement("div",{className:te.date},r.a.createElement(j.a,null,"Due date:"),r.a.createElement("div",{className:te.datePicker},r.a.createElement(y.a,{value:o.dueDate,onSelectDate:L}),o.dueDate?r.a.createElement(x.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:function(){L()}}):null)),r.a.createElement("div",{className:te.daysLeft},r.a.createElement(j.a,null,"".concat(M," days left"))),r.a.createElement("div",{style:{minHeight:"string"===typeof s?s+"".concat(32,"px"):s+32}},r.a.createElement(T,{subjectId:l,maxHeight:s,onRenderCell:Z,getChildren:!0}),r.a.createElement(F,{parent:l})),r.a.createElement("div",{className:te.heroButton},i))))},ae=n(16),re=Object(l.v)(),ce=Object(l.x)({appBar:{backgroundColor:re.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",height:48,display:"grid",alignItems:"center"},link:{color:re.palette.black,textDecoration:"none",selectors:{"&:hover":{textDecoration:"none",color:re.palette.neutralLighter}}},title:{paddingLeft:24}}),ie=function(){return r.a.createElement("div",{className:ce.appBar},r.a.createElement($.b,{to:"/",className:ce.link},r.a.createElement(b.a,{className:ce.title,variant:"xLarge"},"hub")))},oe=n(144),le=n(48),de=n(88),se=function(e){return Object(le.a)({type:"CREATE_SUBJECT"},e)},ue=Object(l.v)(),me=Object(l.x)({appCommandBar:{borderBottom:"1px solid "+ue.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)"}}),pe=function(e,t){var n=[{key:"createSubject",name:"Create subject",iconProps:{iconName:"Add"},ariaLabel:"Create subject",onClick:function(){e(se())}}];return void 0!==t&&n.push({key:"createChildSubject",name:"Create child subject",iconProps:{iconName:"Childof"},ariaLabel:"Create child subject",onClick:function(){e(se({parent:t}))}}),n},be=function(e){var t=e.match.params.id,n=Object(d.b)();return r.a.createElement(oe.a,{items:pe(n,t),className:me.appCommandBar})},fe=Object(l.v)(),he="calc(100vh-".concat(48,"px-303px-").concat(45,"px)"),ve=Object(l.x)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(400,"px")},grid:{height:"calc(100vh - ".concat(48,"px - ").concat(45,"px)"),overflow:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+fe.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"},sidebar:{gridColumn:"2",padding:5,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)"}}),Ee=function(){return 1809},ge=function(e){var t,n=e.match,c=Object(a.useRef)(0),i=Object(a.useRef)(0),l=Object(d.c)(function(e){return e.subjects});try{t=m(l,n.params.id,{separateCompletedItems:!0})}catch(p){return r.a.createElement(ae.a,{to:"/"})}var s=null;void 0!==n.params.id&&(s=r.a.createElement("div",{className:ve.sidebar},r.a.createElement(ne,{subject:l[n.params.id],id:n.params.id,listHeight:he})));var u=r.a.createElement(o.a,{className:ve.grid,items:t,getItemCountForPage:function(e,t){return 0===e&&t&&(c.current=Math.ceil(t.width/400),i.current=Math.floor(t.width/c.current)),3*c.current},getPageHeight:Ee,renderedWindowsAhead:4,onRenderCell:function(e){if(e){var t=e.id,n=e.subject;return r.a.createElement("div",{className:ve.tile,"data-is-focusable":!0,key:t,style:{width:100/c.current+"%",height:603}},r.a.createElement("div",{className:ve.padding},r.a.createElement("div",{className:ve.contents},r.a.createElement(ne,{subject:n,id:t,listHeight:260}))))}}});return s?r.a.createElement("div",{className:ve.wrapper},u,s):u},je=function(){return r.a.createElement("div",null,r.a.createElement(ie,null),r.a.createElement(ae.b,{path:"/:id?",component:be}),r.a.createElement(ae.b,{path:"/:id?",component:ge}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye=n(21),xe=n(89),Ce=n(94),Oe=n(47),ke=n(90),we=n.n(ke),Se=n(91);function Te(e){return Math.floor(Math.random()*Math.floor(e))}var De=function(){for(var e=[],t=0;t<Te(12);t++)e.push(Te(23).toString());return e},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){for(var t={},n=0;n<e;n++)t[n.toString()]={type:"BaseSubject",name:"Name".concat(n),created:new Date,description:"Description".concat(n),dueDate:new Date,children:De(),parents:new Set};for(var a=0;a<e;a++){var r=!0,c=!1,i=void 0;try{for(var o,l=t[a.toString()].children[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)t[o.value].parents.add(a.toString())}catch(d){c=!0,i=d}finally{try{r||null==l.return||l.return()}finally{if(c)throw i}}}return t}(23),t=arguments.length>1?arguments[1]:void 0;return Object(Se.a)(e,function(e){switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var n=t.subjectId,a=t.name;e[n].name=a}(e,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var n=t.subjectId,a=t.description;e[n].description=a}(e,t);break;case"COMPLETE_SUBJECT":N(e,t);break;case"UNCOMPLETE_SUBJECT":e[t.subjectId].completed=void 0;break;case"DELETE_SUBJECT":!function(e,t){var n=t.subjectId,a=!0,r=!1,c=void 0;try{for(var i,o=e[n].parents[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;Object(s.remove)(e[l].children,function(e){return e===n})}}catch(f){r=!0,c=f}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}var d=!0,u=!1,m=void 0;try{for(var p,b=e[n].children[Symbol.iterator]();!(d=(p=b.next()).done);d=!0)e[p.value].parents.delete(n)}catch(f){u=!0,m=f}finally{try{d||null==b.return||b.return()}finally{if(u)throw m}}delete e[n]}(e,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var n=t.subjectId,a=t.date;e[n].dueDate=a}(e,t);break;case"CREATE_SUBJECT":!function(e,t){var n=t.subjectType,a=t.parent,r=Object(de.v4)(),c={type:n||"BaseSubject",name:"Untitled",created:new Date,description:"",children:[],parents:new Set};void 0!==a&&(c.parents.add(a),e[a].children.push(r)),e[r]=c}(e,t);break;case"REMOVE_CHILD_SUBJECT":!function(e,t){var n=t.subjectId,a=t.parent;Object(s.remove)(e[a].children,function(e){return e===n}),e[n].parents.delete(a)}(e,t);break;case"APPEND_CHILD_SUBJECT":!function(e,t){var n=t.subjectId,a=t.child;e[n].children.push(a),e[a].parents.add(n)}(e,t)}return e})},Be=Object(ye.combineReducers)({subjects:Ne}),Ie=n(92),Ue=n(93),_e=n(95),Le=Object(Oe.a)(function(e,t){for(var n={},a=0,r=Object.entries(e);a<r.length;a++){var c=r[a],i=Object(p.a)(c,2),o=i[0],l=i[1];n[o]=Object(le.a)({},l,{parents:Object(_e.a)(l.parents)})}return n},function(e,t){for(var n={},a=0,r=Object.entries(e);a<r.length;a++){var c=r[a],i=Object(p.a)(c,2),o=i[0],l=i[1],d=l.created,s=l.completed,u=l.dueDate,m=l.parents,b=Object(Ue.a)(l,["created","completed","dueDate","parents"]),f=s?new Date(s):void 0,h=u?new Date(u):void 0;n[o]=Object(le.a)({},b,{parents:new Set(m),created:new Date(d),completed:f,dueDate:h})}return n},{whitelist:["subjects"]}),Re={key:"root",storage:we.a,transforms:[Le]},Pe=Object(Oe.b)(Re,Be),Me=Object(ye.createStore)(Pe,Object(xe.composeWithDevTools)()),Je=Object(Oe.c)(Me);Object(Ce.a)(),i.a.render(r.a.createElement(d.a,{store:Me},r.a.createElement(Ie.a,{loading:null,persistor:Je},r.a.createElement($.a,null,r.a.createElement(je,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t,n){e.exports=n(115)}},[[99,1,2]]]);
//# sourceMappingURL=main.3e8fb8dc.chunk.js.map