(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){e.exports=n(146)},146:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),i=n.n(c),o=n(12),l=n(3),s=n(201),d=n(27),u=n(7),m=n(188),b=n(200),p="/search",f=function(e,t){return"".concat(p,"/").concat(e,"/").concat(t)},h=function(e){try{return[e.params.param.toLowerCase(),e.params.query.toLowerCase()]}catch(t){throw Error("This isn't a search path.")}},v=Object(l.B)({search:{display:"flex",flexDirection:"row"},searchBox:{flexGrow:1},searchDropdown:{width:150}}),j=[{key:"name",text:"Name"},{key:"description",text:"Description"},{key:"childname",text:"Child name"},{key:"childdescription",text:"Child description"}];function O(e){var t=e.history,n=e.match,c=Object(a.useState)("name"),i=Object(u.a)(c,2),o=i[0],l=i[1],s=Object(a.useState)(""),d=Object(u.a)(s,2),p=d[0],O=d[1];Object(a.useEffect)(function(){try{var e=h(n),t=Object(u.a)(e,2),a=t[0],r=t[1];l(a),O(r)}catch(c){l("name"),O("")}},[n]);var C=Object(a.useCallback)(function(e,t){var n=t?t.key:void 0;"string"===typeof n&&l(n)},[]),y=Object(a.useCallback)(function(e){t.push(f(o,e))},[t,o]);return r.a.createElement("div",{className:v.search},r.a.createElement(m.a,{options:j,selectedKey:o,className:v.searchDropdown,onChange:C}),r.a.createElement(b.a,{className:v.searchBox,value:p,placeholder:"Search",onSearch:y}))}var C=n(64),y=n.n(C),g="/subjects",k=function(e,t){var n=t||"";return"".concat(g,"/").concat(n,"?").concat(y.a.stringify({display:e}))},E=n(101),w=function(e){var t=y.a.parse(e.search),n=Object(E.isUndefined)(t.display)||Array.isArray(t.display)?"grid":t.display;return"list"===n?n:"grid"},x=function(e,t){return"".concat(e.pathname,"?display=").concat(t)},I=48,S=115,D=71,B=Object(l.y)(),N=Object(l.B)({appBar:{alignItems:"center",backgroundColor:B.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"grid",gridTemplateColumns:"150px minmax(200px, auto) 150px",height:I},link:{color:B.palette.black,textDecoration:"none",selectors:{"&:hover":{color:B.palette.neutralLighter,textDecoration:"none"}}},searchDropdown:{width:150},title:{paddingLeft:24}});function R(e){var t=w(e.location);return r.a.createElement("div",{className:N.appBar},r.a.createElement(d.b,{to:k(t),className:N.link},r.a.createElement(s.a,{className:N.title,variant:"xLarge"},"hub")),r.a.createElement(O,e),r.a.createElement("div",null))}var T=n(206),L=n(195),P=n(6),_=n(8),A=n(65),M=n(10);function U(e,t){var n=t.order,a=t.options,r=a.fields,c=a.separateCompletedItems,i=[],o=[],l=!0,s=!1,d=void 0;try{for(var u,m=n[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;e[b].completed&&c?o.push(b):i.push(b)}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}var p=function(e,t){function n(e,t,n,a){a&&(Array.isArray(e)&&Array.isArray(t)||"string"===typeof e&&"string"===typeof t?(e=e.length,t=t.length):e instanceof Set&&t instanceof Set&&(e=e.size,t=t.size));var r=!Object(M.isUndefined)(e),c=!Object(M.isUndefined)(t),i=n?-1:1;return r||c?r&&!c?1*i:!r&&c?-1*i:e<t?-1*i:e>t?1*i:0:0}return function(a,r){var c=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(c=(l=s.next()).done);c=!0){var d=l.value,u=d.key,m=d.desc,b=d.compareLength,p=t[a][u],h=t[r][u];"children"===u&&(p=p.order,h=h.order);var v=n(p,h,m,b);if(0!==v)return v}}catch(f){i=!0,o=f}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}return 0}}(r,e);return i.sort(p),o.sort(p),i.concat(o)}function W(e,t){if(t in e){var n=!0,a=!1,r=void 0;try{for(var c,i=e[t].parents[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=e[c.value].children;o.order=U(e,o)}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}var z=function(e,t){return{child:t,subjectId:e,type:"APPEND_CHILD_SUBJECT"}},H=function(e,t){var n=t.subjectId,a=t.child,r=e.dict[n].children;r.order.push(a),r.order=U(e.dict,r),e.dict[a].parents.add(n)},F=function(e,t){return{subjectId:t,type:"APPEND_CHILD_VIEW",viewId:e}},V=function(e,t){var n=e.subjects,a=e.views,r=t.subjectId,c=t.viewId,i=a.dict[c].children;i.order.push(r),a.dict[c].children.order=U(n.dict,i)},J=function(e){return Object(_.a)({subjectId:Object(A.v4)(),type:"CREATE_SUBJECT"},e)},G=function(e,t){return{parameters:t,separateCompletedItems:e,type:"SET_SEPARATE_COMPLETE"}},K=45,Y=44,q=n(38),Q=n(180),$=n(187),X=n(189),Z=n(9),ee=n(183),te=n(26),ne=function(e,t){return{fields:e,parameters:t,type:"SET_FIELDS_ARRAY"}},ae=function(e,t,n){return{desc:t,key:e,parameters:n,type:"SET_FIELDS_DESC"}},re=Object(l.y)(),ce=Object(l.B)({dragEnterClass:{backgroundColor:re.palette.neutralLight},gripperWrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",justifyContent:"center",width:"100%",selectors:{"&:hover":{cursor:"pointer"}}},wrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",paddingLeft:2,width:"100%"}});function ie(e){var t=e.subjectId,n=e.setSearchOptions,c=e.fields,i=Object(a.useRef)(-1),o=Object(a.useRef)(null),l=Object(a.useRef)(new Q.a),d=Object(a.useRef)(null),m=Object(a.useState)(!1),b=Object(u.a)(m,2),p=b[0],f=b[1],h=Object(a.useCallback)(function(){f(!1)},[]),v=Object(a.useCallback)(function(){f(!0)},[]),j=Object(P.b)(),O=Object(a.useCallback)(function(e){var a=l.current.isIndexSelected(i.current)?l.current.getSelection():[o.current],r=c.filter(function(e){return-1===a.indexOf(e)}),s=r.indexOf(e);-1===s&&(s=0),r.splice.apply(r,[s,0].concat(Object(q.a)(a))),j(ne(r,{setSearchOptions:n,subjectId:t}))},[j,c,t,n]),C=Object(a.useCallback)(function(e,t){return!0},[]),y=Object(a.useCallback)(function(e){return!0},[]),g=Object(a.useCallback)(function(e,t){return ce.dragEnterClass},[]),k=Object(a.useCallback)(function(e,t){},[]),E=Object(a.useCallback)(function(e,t){o.current&&O(e)},[O]),w=Object(a.useCallback)(function(e,t,n,a){o.current=e,i.current=t},[]),x={canDrag:y,canDrop:C,onDragEnd:Object(a.useCallback)(function(e,t){o.current=null,i.current=-1},[]),onDragEnter:g,onDragLeave:k,onDragStart:w,onDrop:E},I=Object(a.useCallback)(function(e,a,r){j(ae(r,a,{setSearchOptions:n,subjectId:t}))},[j,t,n]),S=[{key:"gripper",minWidth:20,name:"",onRender:Object(a.useCallback)(function(){return r.a.createElement("div",{className:ce.gripperWrapper},r.a.createElement($.a,{iconName:"GripperBarHorizontal"}))},[])},{fieldName:"name",key:"param",minWidth:150,name:"Parameter",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:ce.wrapper},r.a.createElement(s.a,null,e.name))},[])},{fieldName:"desc",key:"direction",minWidth:150,name:"Direction",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:ce.wrapper},r.a.createElement(L.a,{styles:{root:{margin:0}},key:e.key,defaultChecked:e.desc,offText:"Ascending",onText:"Descending",onChange:function(t,n){return I(t,n,e.key)}}))},[I])}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:d},r.a.createElement(T.a,{text:"Sort",iconProps:{iconName:"Sortlines"},ariaLabel:"Sort",onClick:v,styles:{root:{height:Y}}})),r.a.createElement(X.a,{target:d.current,onDismiss:h,hidden:!p,directionalHint:Z.a.bottomCenter,isBeakVisible:!1},r.a.createElement("div",{onBlur:h},r.a.createElement(ee.a,{selection:l.current,columns:S,items:c,selectionMode:te.b.none,dragDropEvents:x}))))}var oe=function(e){return"".concat("/views","/").concat(e)},le={base:"/",search:p+"/:param/:query",subject:g+"/:parentId?",view:"/views/:viewId"},se=[le.search,le.subject,le.view,le.base],de=n(193),ue=n(182);function me(e,t,n){var a=[],r=n?n.parentId:void 0,c=n?n.viewId:void 0,i=!0,o=!1,l=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var u=s.value,m={id:u,parent:r,subject:e[u],viewId:c};(Object(M.isUndefined)(n)||Object(M.isUndefined)(n.condition)||n.condition(m))&&a.push(m)}}catch(b){o=!0,l=b}finally{try{i||null==d.return||d.return()}finally{if(o)throw l}}return a}var be=Object(l.B)({list:{overflow:"auto"}});function pe(e){var t=e.order,n=e.parentId,c=e.maxHeight,i=e.onRenderCell,o=e.illegalIds,l=e.notifyNoChildren,d=e.viewId,u=Object(P.c)(function(e){return e}).subjects,m=Object(a.useCallback)(function(e){return!!o&&!o.has(e.id)},[o]),b={condition:o?m:void 0,parentId:n,viewId:d},p=me(u.dict,t,b);return r.a.createElement("div",{className:be.list,style:{maxHeight:c}},0===p.length&&l?r.a.createElement(s.a,null,"There's nothing here",r.a.createElement("span",{role:"img","aria-label":"Gust of Wind emoji"},"\ud83d\udca8")):r.a.createElement(ue.a,{items:p,onRenderCell:i}))}var fe=n(198),he=n(191),ve=n(184),je=Object(l.y)(),Oe="1px solid "+je.palette.neutralTertiary,Ce=Object(l.B)({wrapper:{border:Oe,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",gridTemplateRows:"auto auto",marginBottom:2},checkboxWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},checkbox:{margin:8},divider:{background:je.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},button:{gridColumn:"3"},content:{gridColumn:"1 / 3",gridRow:"2",paddingLeft:8,paddingRight:8}});function ye(e){var t=e.button,n=e.checked,c=e.children,i=e.contextMenuItems,o=e.editable,l=e.key,s=e.label,d=e.onCheckboxChange,m=e.onEditableBlur,b=Object(a.useRef)(null),p=Object(a.useState)(s),f=Object(u.a)(p,2),h=f[0],v=f[1],j=Object(a.useState)(!1),O=Object(u.a)(j,2),C=O[0],y=O[1];Object(a.useEffect)(function(){v(s)},[s]);var g=Object(a.useCallback)(function(e){e.preventDefault(),y(!C)},[C]),k=Object(a.useCallback)(function(e,t){v(t||"")},[]),E=Object(a.useCallback)(function(){if(m){var e=h||"Untitled";m(e),v(e)}},[h,m]);return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:g,ref:b,key:l},r.a.createElement("div",{className:Ce.wrapper},r.a.createElement("div",{className:Ce.checkboxWrapper},r.a.createElement(fe.a,{checked:n,label:o?void 0:s,className:Ce.checkbox,onChange:d}),o?r.a.createElement(he.a,{value:h,borderless:!0,onChange:m?k:void 0,onBlur:E}):null),r.a.createElement("div",{className:Ce.content},c),t?r.a.createElement("span",{className:Ce.divider}):null,r.a.createElement("div",{className:Ce.button},t||null)),r.a.createElement(ve.a,{hidden:!(i&&C),isBeakVisible:!1,onDismiss:g,target:b,directionalHint:Z.a.bottomRightEdge,items:i}))}function ge(e){var t=e.id,n=e.viewId,c=e.subject,i=Object(P.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&i(F(n,t))},[i,t,n]);return r.a.createElement(ye,{checked:!1,label:c.name,onCheckboxChange:o})}function ke(e){if(e&&!Object(M.isUndefined)(e.viewId))return r.a.createElement(ge,e)}function Ee(e){var t=e.hidePanel,n=e.isOpen,a=e.viewId,c=Object(P.c)(function(e){return e}),i=c.subjects,l=c.views;if(Object(M.isUndefined)(a)||!(a in l.dict))return r.a.createElement(o.a,{to:le.base});var s=i.order.order,d=new Set(l.dict[a].children.order);return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{isOpen:n,isLightDismiss:!0,headerText:"Append Children",onDismiss:t},r.a.createElement(pe,{viewId:a,order:s,illegalIds:d,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(S,")"),onRenderCell:ke})))}var we=Object(l.y)(),xe=Object(l.B)({leftWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},rightWrapper:{alignItems:"center",display:"flex",flexDirection:"row-reverse"},wrapper:{alignItems:"center",backgroundColor:we.palette.white,borderBottom:"1px solid "+we.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"flex",flexDirection:"row",height:Y,justifyContent:"space-between",paddingLeft:24,paddingRight:24,position:"relative",zIndex:10}}),Ie={root:{height:Y}};function Se(e){var t=e.match,n=e.location,c=e.history,i=t.params,o=i.parentId,l=i.viewId,s=Object(P.b)(),d=w(n),m=Object(P.c)(function(e){return e}),b=m.subjects,f=m.views,v=Object(a.useState)(!1),j=Object(u.a)(v,2),O=j[0],C=j[1],y=Object(a.useCallback)(function(){C(!0)},[]),k=Object(a.useCallback)(function(){C(!1)},[]),E=Object(a.useCallback)(function(){s(J({parentId:o,viewId:l}))},[s,o,l]),I=Object(a.useCallback)(function(){s(J())},[s]),S=Object(a.useCallback)(function(e,t){s(G(t,{subjectId:o}))},[s,o]),D=Object(a.useCallback)(function(e,t){s(G(t,{setSearchOptions:!0}))},[s]),B=Object(a.useCallback)(function(){c.push(x(n,"grid"===d?"list":"grid"))},[d,c,n]),N=t.path===le.subject||t.path===g,R=t.path===le.search||t.path===p,_=t.path===le.view&&l,A=[],M=[],U=null;if(N){var W=o&&o in b.dict?b.dict[o].children.options:b.order.options,z=o?r.a.createElement(T.a,{text:"Create child subject",iconProps:{iconName:"Childof"},ariaLabel:"Create child subject",onClick:E,styles:Ie}):r.a.createElement(T.a,{text:"Create subject",iconProps:{iconName:"Add"},ariaLabel:"Create subject",onClick:I,styles:Ie});A.push(r.a.createElement("div",{key:"createSubject"},z)),"grid"===d&&A.push(r.a.createElement(ie,{key:"sort",subjectId:o,fields:W.fields})),A.push(r.a.createElement(L.a,{key:"separateComplete",checked:W.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:S,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}}))}else R?("grid"===d&&A.push(r.a.createElement(ie,{key:"sort",setSearchOptions:!0,fields:b.searchSortOptions.fields})),A.push(r.a.createElement(L.a,{key:"separateComplete",checked:b.searchSortOptions.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:D,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}}))):_&&(A.push(r.a.createElement(T.a,{key:"appendChildren",text:"Append child subjects",iconProps:{iconName:"RowsChild"},ariaLabel:"Create child subject",onClick:y,styles:Ie}),r.a.createElement(T.a,{key:"createSubjectForView",text:"Create child subject",iconProps:{iconName:"Childof"},ariaLabel:"Create child subject",onClick:E,styles:Ie})),U=r.a.createElement(Ee,{hidePanel:k,isOpen:O,viewId:l}));return Object(a.useEffect)(function(){var e=null,n=null;if(N)e="subjects",o&&(n=b.dict[o].name);else if(R){var a=h(t),r=Object(u.a)(a,2);e="search/"+r[0],n=r[1]}else _&&l&&(e="views",n=f.dict[l].name);document.title=e?n?"hub/".concat(e,": ").concat(n):"hub/".concat(e):"hub"},[N,o,b.dict,R,t,_,l,f.dict]),M.push(r.a.createElement(T.a,{key:"toggleView",ariaLabel:"Toggle view",iconProps:{iconName:"list"===d?"BulletedListText":"GridViewMedium"},text:"list"===d?"List":"Grid",styles:{root:{background:we.palette.white,height:Y}},menuProps:{directionalHintFixed:!0,items:["list"===d?{iconProps:{iconName:"GridViewMedium"},key:"gridButton",onClick:B,text:"Grid"}:{iconProps:{iconName:"BulletedListText"},key:"listButton",onClick:B,text:"List"}]}})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:xe.wrapper},r.a.createElement("div",{className:xe.leftWrapper},A),r.a.createElement("div",{className:xe.rightWrapper},M)),U)}var De=n(41),Be=n(47),Ne=n(197),Re=n(192),Te=n(204),Le=n(196),Pe=n(185),_e=n(105),Ae=Object(l.y)(),Me=Object(l.B)({title:{border:"1px solid transparent",borderRadius:0,fontSize:_e.a.size28,height:32,outline:"none",paddingBottom:4,textAlign:"center",width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+Ae.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+Ae.palette.neutralTertiary,outline:"none"}}}});function Ue(e){var t=e.value,n=e.className,a=e.onBlur,c=e.onChange,i=e.textAlign,o=void 0===i?"left":i;return r.a.createElement("div",{className:n},r.a.createElement("input",{className:Me.title,onChange:c,onBlur:a,value:t,style:{textAlign:o}}))}var We=function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}},ze=function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}},He=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},Fe=function(e,t){var n=t.subjectId,a=t.level;!function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if(void 0===t[n].completed&&(t[n].completed=r,W(t,n),a>1)){var c=!0,i=!1,o=void 0;try{for(var l,s=t[n].children.order[Symbol.iterator]();!(c=(l=s.next()).done);c=!0)e(t,l.value,a-1,r)}catch(d){i=!0,o=d}finally{try{c||null==s.return||s.return()}finally{if(i)throw o}}}}(e.dict,n,a)},Ve=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},Je=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},Ge=function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}};function Ke(e){var t=e.id,n=e.parent,c=e.subject,i=Object(P.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&i(z(n,t))},[i,t,n]);return r.a.createElement(ye,{checked:!1,label:c.name,onCheckboxChange:o})}function Ye(e){if(e&&!Object(M.isUndefined)(e.parent))return r.a.createElement(Ke,e)}var qe=32,Qe=Object(l.y)(),$e=Object(l.B)({wrapper:{border:Oe,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",marginBottom:1,marginTop:1},button:{alignItems:"center",background:Qe.palette.white,border:"none",cursor:"pointer",display:"flex",flexDirection:"row",height:qe,outline:"none",padding:0,selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:focus":{outline:"1px solid "+Qe.palette.themePrimary},"&:hover":{filter:"brightness(90%)",outline:"none"}}},divider:{background:Qe.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},icon:{fontSize:12,margin:8,paddingLeft:4,textAlign:"center"},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),Xe=function(e){var t=e.parent,n=Object(a.useRef)(null),c=Object(P.b)(),i=Object(a.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],m=Object(a.useState)(!1),b=Object(u.a)(m,2),p=b[0],f=b[1],h=Object(a.useCallback)(function(){return d(!1)},[]),v=Object(a.useCallback)(function(){return d(!0)},[]),j=Object(a.useCallback)(function(){return f(!p)},[p]),O=Object(a.useCallback)(function(){return f(!1)},[]),C=Object(a.useCallback)(function(){c(J({parentId:t}))},[c,t]),y=Object(P.c)(function(e){return e}).subjects,g=[{iconProps:{iconName:"RowsChild"},key:"appendChildren",onClick:v,text:"Append child subjects"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:$e.wrapper},r.a.createElement("button",{className:$e.button,style:{gridColumn:1},onClick:C},r.a.createElement($.a,{iconName:"Add",className:$e.icon}),r.a.createElement(s.a,{className:$e.text},"Add child")),r.a.createElement("span",{className:$e.divider}),r.a.createElement("button",{className:$e.button,onClick:j,ref:n,style:{gridColumn:3}},r.a.createElement($.a,{iconName:"ChevronDown",style:{width:"100%"}}))),r.a.createElement(de.a,{isOpen:l,isLightDismiss:!0,headerText:"Append Children",onDismiss:h},r.a.createElement(pe,{parentId:t,illegalIds:new Set(y.dict[t].children.order.concat(t)),order:y.order.order,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(S,")"),onRenderCell:Ye})),r.a.createElement(ve.a,{hidden:!p,isBeakVisible:!1,onDismiss:O,target:n,directionalHint:Z.a.bottomRightEdge,items:g}))},Ze=function(e,t){return{parent:t,subjectId:e,type:"REMOVE_CHILD_SUBJECT"}},et={iconProps:{iconName:"Completed"},key:"complete-1-level",text:"Mark as complete"},tt={iconProps:{iconName:"CompletedSolid"},key:"complete-2-level",text:"Mark this and its children as complete"},nt={iconProps:{iconName:"Blocked2"},key:"uncomplete",text:"Mark as incomplete"},at={iconProps:{iconName:"Remove"},key:"remove",text:"Remove this as a child"},rt={iconProps:{iconName:"Delete"},key:"delete",text:"Delete this"},ct=Object(l.B)({open:{height:40,width:"100%"}});function it(e){var t=e.id,n=e.parent,c=e.subject,i=Object(P.b)(),o=Object(a.useCallback)(function(e,n,a){i(!0===n?He(t,a):Ve(t))},[i,t]),l=Object(a.useCallback)(function(e){i(We(t,e||"Untitled"))},[i,t]),s=Object(a.useCallback)(function(e,t){t&&o(e,!0,1)},[o]),u=Object(a.useCallback)(function(e,t){t&&o(e,!0,2)},[o]),m=Object(a.useCallback)(function(e,t){t&&o(e,!1)},[o]),b=Object(a.useCallback)(function(){i(Ze(t,n))},[i,t,n]),p=Object(a.useCallback)(function(){i(Je(t))},[i,t]),f=[Object(_.a)({},et,{onClick:s}),Object(_.a)({},tt,{onClick:u})],h=[Object(_.a)({},nt,{onClick:m})],v=[].concat(Object(q.a)(c.completed?h:f),[Object(_.a)({},at,{onClick:b}),Object(_.a)({},rt,{onClick:p})]),j="Open "+c.name,O=r.a.createElement(d.b,{to:k("grid",t),tabIndex:-1},r.a.createElement(Te.a,{className:ct.open,iconProps:{iconName:"OpenFile"},ariaLabel:j,title:j}));return r.a.createElement(ye,{editable:!0,onEditableBlur:l,checked:!!c.completed,label:c.name,onCheckboxChange:o,contextMenuItems:v,button:O})}function ot(e){if(e&&!Object(M.isUndefined)(e.parent))return r.a.createElement(it,Object.assign({},e,{key:e.id}))}var lt=function(e,t){return{subjectId:t,type:"REMOVE_CHILD_VIEW",viewId:e}},st=Object(l.y)(),dt="1px solid "+st.palette.neutralTertiary,ut="1px solid "+st.palette.themePrimary,mt=Object(l.B)({headerWrapper:{borderTopLeftRadius:4,borderTopRightRadius:4,display:"grid",gridTemplateColumns:"32px auto 32px"},header:{alignItems:"center",borderTopLeftRadius:4,borderTopRightRadius:4,color:st.palette.neutralLight,display:"flex",flexDirection:"column",gridColumn:"2",gridRow:"1",margin:-1,padding:5,zIndex:1},headerOpenButton:{background:st.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,margin:0,marginTop:0,outline:"none",zIndex:2,selectors:{"&:focus":{border:ut,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,outline:"none"}}},headerCloseButton:{background:st.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,margin:0,outline:"none",zIndex:2,selectors:{"&:active":{backgroundColor:st.palette.red,color:st.palette.white,filter:"brightness(80%)",outline:"none"},"&:focus":{border:ut,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,outline:"none"},"&:hover":{backgroundColor:st.palette.red,color:st.palette.white}}},headerLink:{gridColumn:"3",gridRow:"1",outline:"none"},body:{padding:10},title:{alignItems:"center",display:"flex",flexDirection:"column",paddingBottom:5,paddingTop:10},description:{paddingBottom:10,paddingTop:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:st.palette.white,border:dt,width:"100%"},heroButton:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:10}});function bt(e){var t=e.item,n=t.subject,c=t.id,i=t.viewId,o=e.listHeight,l=e.showOpenButton,m=e.showCloseButton,b=Object(P.b)(),p=Object(a.useState)(n.name),f=Object(u.a)(p,2),h=f[0],v=f[1],j=Object(a.useState)(n.description),O=Object(u.a)(j,2),C=O[0],y=O[1],g=Object(P.c)(function(e){return e}).subjects;Object(a.useEffect)(function(){v(n.name)},[n.name]),Object(a.useEffect)(function(){y(n.description)},[n.description]);var E,w,x,I,S,D=Object(a.useCallback)(function(e){v(e.target.value)},[]),B=Object(a.useCallback)(function(){var e=h||"Untitled";n.name!==e&&b(We(c,e)),v(e)},[b,c,h,n.name]),N=Object(a.useCallback)(function(e,t){y(t||"")},[]),R=Object(a.useCallback)(function(){n.description!==C&&b(ze(c,C))},[b,c,C,n.description]),T=Object(a.useCallback)(function(e){b(Ge(c,e||void 0))},[b,c]),L=Object(a.useCallback)(function(){b(He(c,1))},[b,c]),A=Object(a.useCallback)(function(){b(Ve(c))},[b,c]),M=Object(a.useCallback)(function(){return T()},[T]),U=Object(a.useCallback)(function(){b(He(c,2))},[b,c]),W=Object(a.useCallback)(function(){b(Je(c))},[b,c]),z=Object(a.useCallback)(function(){i&&c&&b(lt(i,c))},[b,c,i]),H=Object(_.a)({},tt,{onClick:U}),F=Object(_.a)({},rt,{onClick:W}),V=n.dueDate?(E=new Date,w=n.dueDate,Math.ceil((w.valueOf()-E.valueOf())/864e5)):"\u221e";n.completed?(S=st.palette.red,x="Completed "+n.completed.toLocaleDateString(),I=r.a.createElement(Ne.a,Object.assign({},nt,{split:!0,onClick:A,menuProps:{directionalHint:Z.a.bottomCenter,isBeakVisible:!1,items:[F]},style:{background:st.palette.white}}))):(S=st.palette.green,x="Created "+n.created.toLocaleDateString(),I=r.a.createElement(Ne.a,Object.assign({primary:!0},et,{split:!0,onClick:L,menuProps:{directionalHint:Z.a.bottomCenter,isBeakVisible:!1,items:[H,F]}})));var J=r.a.createElement(s.a,{className:mt.header,tabIndex:-1},x),G="Open "+n.name,K="Close "+n.name;return r.a.createElement(Re.a,{verticalAlign:"center"},r.a.createElement("div",{className:mt.headerWrapper,style:{backgroundColor:S}},m?r.a.createElement(Te.a,{styles:{root:{width:""}},className:mt.headerCloseButton,iconProps:{iconName:"Cancel"},title:K,ariaLabel:K,onClick:z}):null,J,l?r.a.createElement(d.b,{to:k("grid",c),className:mt.headerLink,tabIndex:-1},r.a.createElement(Te.a,{styles:{root:{width:""}},className:mt.headerOpenButton,iconProps:{iconName:"OpenFile"},title:G,ariaLabel:G})):null),r.a.createElement("div",{className:mt.body},r.a.createElement(Ue,{textAlign:"center",className:mt.title,value:h,onChange:D,onBlur:B}),r.a.createElement(he.a,{resizable:!1,multiline:!0,rows:3,value:C,onChange:N,onBlur:R,className:mt.description,styles:{field:{height:63}}}),r.a.createElement("div",{className:mt.date},r.a.createElement(Le.a,null,"Due date:"),r.a.createElement("div",{className:mt.datePicker},r.a.createElement(Pe.a,{disableAutoFocus:!0,value:n.dueDate,onSelectDate:T}),n.dueDate?r.a.createElement(Te.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:M}):null)),r.a.createElement("div",{className:mt.daysLeft},r.a.createElement(Le.a,null,"".concat(V," ").concat(1===V?"day":"days"," left"))),r.a.createElement("div",{style:{minHeight:"calc((".concat(o,") + ").concat(qe,"px)")}},r.a.createElement(pe,{parentId:c,order:g.dict[c].children.order,maxHeight:"calc(".concat(o,")"),onRenderCell:ot}),r.a.createElement(Xe,{parent:c})),r.a.createElement("div",{className:mt.heroButton},I)))}var pt=function(e,t){for(var n=0;n<t.length;n++){if(t[n]!==e[n])return n}return 0},ft=3,ht=603,vt=400,jt=Object(l.y)(),Ot=Object(l.B)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(vt,"px")},grid:{height:"calc(100vh - ".concat(I,"px - ").concat(K,"px)"),overflow:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+jt.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"}}),Ct=function(){return ht*ft};function yt(e){var t=e.showCloseButton,n=Object(De.a)(e,["showCloseButton"]),c=n.options?n.options.parentId:void 0,i=Object(P.c)(function(e){return e}).subjects,o=Object(a.useRef)(0),l=Object(a.useRef)(0),s=Object(a.useRef)(null),d=_t(n),u=d.items,m=d.componentOrder,b=d.currentOrder,p=d.setCurrentOrder;Object(a.useEffect)(function(){if(s.current&&b!==m&&m.length>0){var e=pt(b,m),t=i.dict[m[e]];(0===t.parents.size||t.parents.has(c))&&s.current.scrollToIndex(e,function(){return ht},Be.a.top),p(m)}},[m,b,p,c,i]);var f=Object(a.useCallback)(function(e){if(e)return r.a.createElement("div",{className:Ot.tile,"data-is-focusable":!0,key:e.id,style:{height:ht,width:100/o.current+"%"}},r.a.createElement("div",{className:Ot.padding},r.a.createElement("div",{className:Ot.contents},r.a.createElement(bt,{showCloseButton:t,item:e,listHeight:"260px",showOpenButton:!0}))))},[t]),h=Object(a.useCallback)(function(e,t){if(0===e&&t){var n=t.width/vt;o.current=t.width>1.5*vt?Math.ceil(n):Math.floor(n),l.current=Math.floor(t.width/o.current)}return o.current*ft},[]);return r.a.createElement(ue.a,{ref:s,className:Ot.grid,items:u,getItemCountForPage:h,getPageHeight:Ct,renderedWindowsAhead:4,onRenderCell:f})}var gt=n(106),kt=n.n(gt);function Et(e){var t=e.item,n=e.showCloseButton,c=e.ev,i=e.onDismiss,o=e.onEditClick,l=Object(P.b)(),s=t.id,d=t.viewId,u=Object(a.useCallback)(function(e,t,n){l(!0===t?He(s,n):Ve(s))},[l,s]),m=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,1)},[u]),b=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,2)},[u]),p=Object(a.useCallback)(function(e,t){t&&u(e,!1)},[u]),f=Object(a.useCallback)(function(){l(Je(s))},[l,s]),h=Object(a.useCallback)(function(){o(t)},[t,o]),v=Object(a.useCallback)(function(){d&&s&&l(lt(d,s))},[l,s,d]),j=[Object(_.a)({},et,{onClick:m}),Object(_.a)({},tt,{onClick:b})],O=[Object(_.a)({},nt,{onClick:p})],C=[{iconProps:{iconName:"Edit"},key:"edit",onClick:h,text:"Edit"}].concat(Object(q.a)(t.subject.completed?O:j),[{iconProps:{iconName:"Delete"},key:"delete",onClick:f,text:"Delete this"}]);return n&&C.push({iconProps:{iconName:"Cancel"},key:"removeChildView",onClick:v,text:"Remove this subject from this view"}),r.a.createElement(ve.a,{items:C,target:c.target,directionalHint:Z.a.bottomCenter,isBeakVisible:!1,onDismiss:i})}var wt=n(190),xt=Object(l.y)(),It=Object(l.B)({subjectWrapper:{backgroundColor:xt.palette.white,border:"1px solid "+xt.palette.neutralTertiary,borderRadius:4}});function St(e){var t=e.modalItem,n=e.dismissModal,a=e.showCloseButton;return r.a.createElement(wt.a,{isOpen:!!t,onDismiss:n,styles:{main:{backgroundColor:"none",border:"1px solid transparent",borderRadius:4}}},r.a.createElement("div",{className:It.subjectWrapper},t?r.a.createElement(bt,{showCloseButton:a,item:t,showOpenButton:!0}):null))}var Dt=Object(l.y)(),Bt=Object(l.B)({rowButton:{selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:hover":{filter:"brightness(90%)",outline:"none"}}},rowButtonWrapper:{display:"flex",flexDirection:"row"},subjectWrapper:{backgroundColor:Dt.palette.white,border:"1px solid "+Dt.palette.neutralTertiary,borderRadius:4}});function Nt(e){var t=e.item,n=e.openModal,c=e.showCloseButton,i=Object(P.b)(),o=Object(a.useCallback)(function(){n(t)},[t,n]),l=Object(a.useCallback)(function(){t.viewId&&t.id&&i(lt(t.viewId,t.id))},[i,t]),s="Open "+t.subject.name,u="Edit "+t.subject.name,m="Close "+t.subject.name;return r.a.createElement("div",{className:Bt.rowButtonWrapper},c?r.a.createElement(Te.a,{onClick:l,styles:{root:{width:""}},className:Bt.rowButton,iconProps:{iconName:"Cancel"},title:m,ariaLabel:m}):null,r.a.createElement(Te.a,{onClick:o,styles:{root:{width:""}},className:Bt.rowButton,iconProps:{iconName:"Edit"},title:u,ariaLabel:u}),r.a.createElement(d.b,{to:k("list",t.id)},r.a.createElement(Te.a,{styles:{root:{width:""}},className:Bt.rowButton,iconProps:{iconName:"OpenFile"},title:s,ariaLabel:s})))}var Rt=Object(o.g)(function(e){var t=e.match,n=e.history,c=e.options,i=e.sortOptions,o=e.showCloseButton,l=c?c.parentId:void 0,s=Object(P.c)(function(e){return e}).subjects,d=_t({options:c,sortOptions:i}),m=d.items,b=d.componentOrder,p=d.currentOrder,f=d.setCurrentOrder,h=d.reorderParams,v=d.sortFields,j=function(e){var t=e.history,n=e.reorderParams,r=e.sortFields,c=Object(P.b)(),i=Object(a.useCallback)(function(e,t){var a=r[e],i=r.filter(function(t,n){return n!==e});i.splice(t,0,a),c(ne(i,n))},[r,c,n]);return{dispatchSetFieldsDesc:Object(a.useCallback)(function(e,t){"openButton"!==t.key&&c(ae(t.key,!t.isSortedDescending,n))},[c,n]),getKey:Object(a.useCallback)(function(e){return e.id},[]),onItemInvoked:Object(a.useCallback)(function(e){t.push(k("list",e.id))},[t]),reorder:i}}({history:n,reorderParams:h,sortFields:v}),O=j.dispatchSetFieldsDesc,C=j.getKey,y=j.onItemInvoked,g=j.reorder,E=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useCallback)(function(){c(null)},[]),o=Object(a.useCallback)(function(e){c(e)},[]);return!r||r.id in e.dict||c(null),Object(a.useEffect)(function(){if(r)if(r.id in e.dict){var t=e.dict[r.id];t!==r.subject&&c(Object(_.a)({},r,{subject:t}))}else c(null)},[e.dict,r,c]),{dismissModal:i,modalItem:r,openModal:o,setModalItem:c}}(s),w=E.dismissModal,x=E.modalItem,S=E.openModal,B=function(e,t){var n=Object(a.useState)(null),r=Object(u.a)(n,2),c=r[0],i=r[1],o=Object(a.useCallback)(function(){i(null)},[]);return{contextMenuProps:c,onItemContextMenu:Object(a.useCallback)(function(n,a,r){return!n||!r||(i({ev:r,item:n,onDismiss:o,onEditClick:e,showCloseButton:t}),!1)},[o,t,e])}}(E.setModalItem,o),N=B.contextMenuProps,R=B.onItemContextMenu,T=function(e){var t=e.openModal,n=e.showCloseButton,c=e.sortFields,i=Object(a.useCallback)(function(e,t,n){return e.subject[n.key]},[]),o=Object(a.useCallback)(function(e){return e.subject.children.order.length.toLocaleString()},[]),l=Object(a.useCallback)(function(e,t,n){var a=e.subject[n.key];return a?a.toLocaleString():""},[]),s=Object(a.useCallback)(function(e){return r.a.createElement(Nt,{item:e,openModal:t,showCloseButton:n})},[t,n]),d={children:{isResizable:!0,key:"children",minWidth:100,name:"# Children",onRender:o},completed:{isResizable:!0,key:"completed",minWidth:150,name:"Completed",onRender:l},created:{isResizable:!0,key:"created",minWidth:150,name:"Date created",onRender:l},description:{isResizable:!0,key:"description",minWidth:100,name:"Description",onRender:i},dueDate:{isResizable:!0,key:"dueDate",minWidth:150,name:"Due date",onRender:l},name:{isResizable:!0,key:"name",minWidth:100,name:"Name",onRender:i}},u=[],m=!0,b=!1,p=void 0;try{for(var f,h=c[Symbol.iterator]();!(m=(f=h.next()).done);m=!0){var v=f.value,j=d[v.key];j&&(j.isSorted=!0,j.isSortedDescending=v.desc,u.push(j))}}catch(O){b=!0,p=O}finally{try{m||null==h.return||h.return()}finally{if(b)throw p}}return u.push({key:"itemButtons",minWidth:80,name:"",onRender:s}),u}({openModal:S,showCloseButton:o,sortFields:v}),L=function(e){var t=e.componentOrder,n=e.currentOrder,r=e.parentId,c=e.setCurrentOrder,i=e.subjects,o=Object(a.useRef)(null);return Object(a.useEffect)(function(){if(o.current&&n!==t&&t.length>0){var e=pt(n,t),a=i.dict[t[e]];(0===a.parents.size||a.parents.has(r))&&o.current.focusIndex(e),c(t)}},[t,r,n,i,c]),o}({componentOrder:b,currentOrder:p,parentId:l,setCurrentOrder:f,subjects:s}),A="calc(100vh - ".concat(I+K+(t.path===le.view?D:0),"px)");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{styles:{root:{height:A}},getKey:C,componentRef:L,onColumnHeaderClick:O,columns:T,items:m,isHeaderVisible:!0,selectionMode:te.b.none,onItemInvoked:y,onItemContextMenu:R,columnReorderOptions:{frozenColumnCountFromEnd:1,frozenColumnCountFromStart:0,handleColumnReorder:g}}),N&&r.a.createElement(Et,N),r.a.createElement(St,{modalItem:x,dismissModal:w,showCloseButton:o}))}),Tt=Object(l.y)(),Lt=Object(l.B)({sidebar:{border:"1px solid "+Tt.palette.white,borderRadius:4,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",gridColumn:"2",zIndex:10},wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(vt,"px")}});function Pt(e){var t=e.viewComponent,n=e.sidebarComponent;return r.a.createElement("div",{className:Lt.wrapper},t,r.a.createElement("div",{className:Lt.sidebar},n))}function _t(e){var t,n,r=e.options,c=e.sortOptions;r&&(t=r.parentId,n=r.viewId);var i,o,l,s=Object(P.c)(function(e){return e}),d=s.subjects,m=s.views;c?(i=U(d.dict,Object(_.a)({},d.order,{options:c})),o=c.fields,l={setSearchOptions:!0}):t?(i=d.dict[t].children.order,o=d.dict[t].children.options.fields,l={subjectId:t}):n?(i=m.dict[n].children.order,o=m.dict[n].children.options.fields,l={}):(i=d.order.order,o=d.order.options.fields,l={});var b=Object(a.useState)(i),p=Object(u.a)(b,2),f=p[0],h=p[1];return{componentOrder:i,currentOrder:f,items:me(d.dict,i,r),reorderParams:l,setCurrentOrder:h,sortFields:o}}function At(e){var t=e.match,n=e.location,a=t.params.parentId,c=w(n),i=kt()(),l=Object(P.c)(function(e){return e.subjects}).dict;if(!Object(M.isUndefined)(a)&&!(a in l))return r.a.createElement(o.a,{to:"/"});if(Object(M.isUndefined)(a))return"list"===c?r.a.createElement(Rt,null):r.a.createElement(yt,null);var s=r.a.createElement(bt,{item:{id:a,subject:l[a]}});if(i.innerWidth>2*vt){var d={parentId:a};return r.a.createElement(Pt,{viewComponent:"grid"===c?r.a.createElement(yt,{options:d}):r.a.createElement(Rt,{options:d}),sidebarComponent:s})}return s}var Mt=new Set(j.reduce(function(e,t){return e.push(String(t.key).toLowerCase()),e},[]));function Ut(e){var t=e.match,n=e.location,c=w(n),i=h(t),o=Object(u.a)(i,2),l=o[0],d=o[1],m=Object(P.c)(function(e){return e.subjects}),b=m.dict,p=m.searchSortOptions,f=Object(a.useCallback)(function(e){var t=e.subject;switch(l){case"childname":var n=!0,a=!1,r=void 0;try{for(var c,i=t.children.order[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value;if(b[o].name.toLowerCase().includes(d))return!0}}catch(v){a=!0,r=v}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return!1;case"childdescription":var s=!0,u=!1,m=void 0;try{for(var p,f=t.children.order[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=p.value;if(b[h].description.toLowerCase().includes(d))return!0}}catch(v){u=!0,m=v}finally{try{s||null==f.return||f.return()}finally{if(u)throw m}}return!1;default:return e.subject[l].toLowerCase().includes(d)}},[b,l,d]);return Mt.has(l)?"list"===c?r.a.createElement(Rt,{options:{condition:f},sortOptions:p}):r.a.createElement(yt,{options:{condition:f},sortOptions:p}):r.a.createElement(s.a,null,"Sorry that search parameter was invalid.")}var Wt=n(202),zt=function(){return{type:"CREATE_VIEW",viewId:Object(A.v4)()}},Ht=Object(l.y)(),Ft=Object(l.B)({nav:{background:Ht.palette.white,borderRight:"1px solid "+Ht.palette.neutralQuaternary,boxSizing:"border-box",height:"100%",overflowY:"auto",width:208}});function Vt(e){var t=e.match,n=e.history,c=Object(P.b)(),i=Object(a.useState)(!1),o=Object(u.a)(i,2),l=o[0],s=o[1],d=Object(a.useState)(""),m=Object(u.a)(d,2),b=m[0],p=m[1],f=Object(P.c)(function(e){return e}).views;Object(a.useEffect)(function(){if(t.url===g)p("allSubjects");else if(t.path===le.view){var e=t.params.viewId;e&&e in f.dict?p(e):n.push(le.base)}else p("")},[t,n,f.dict]);var h=Object(a.useCallback)(function(){c(zt()),s(!0)},[c]);Object(a.useEffect)(function(){l&&(s(!1),n.push(oe(f.order[f.order.length-1])))},[l,n,f]);var v={isExpanded:!0,key:"views",links:[],name:"Views",url:""},j=!0,O=!1,C=void 0;try{for(var y,k=f.order[Symbol.iterator]();!(j=(y=k.next()).done);j=!0){var E=y.value,w=f.dict[E];v.links.push({key:E,name:w.name,url:"#"+oe(E)})}}catch(I){O=!0,C=I}finally{try{j||null==k.return||k.return()}finally{if(O)throw C}}var x=[{links:[{key:"allSubjects",name:"All subjects",url:"#"+g}]}];return v.links.length>0&&x[0].links.push(v),x[0].links.push({icon:"Add",key:"createView",name:"Create view",onClick:h,url:""}),r.a.createElement(Wt.a,{selectedKey:b,expandButtonAriaLabel:"Expand or collapse",className:Ft.nav,groups:x})}var Jt=function(e,t){return{name:t,type:"UPDATE_VIEW_NAME",viewId:e}},Gt=Object(l.B)({title:{marginTop:10,padding:10},wrapper:{display:"flex",flexDirection:"column",height:"100%",width:"100%"}});function Kt(e){var t=e.location,n=e.viewId,c=Object(P.c)(function(e){return e}).views,i=Object(P.b)(),o=n&&n in c.dict?c.dict[n]:{name:""},l=Object(a.useState)(o.name),s=Object(u.a)(l,2),d=s[0],m=s[1],b=Object(a.useCallback)(function(){n&&i(Jt(n,d))},[n,i,d]);Object(a.useEffect)(function(){m(o.name)},[o.name]);var p=Object(a.useCallback)(function(e){m(e.target.value)},[]),f=w(t),h={viewId:n},v="grid"===f?r.a.createElement(yt,{options:h,showCloseButton:!0}):r.a.createElement(Rt,{options:h,showCloseButton:!0});return r.a.createElement("div",{className:Gt.wrapper},r.a.createElement(Ue,{className:Gt.title,value:d,onChange:p,onBlur:b}),v)}function Yt(e){var t=e.match,n=e.location,a=Object(P.c)(function(e){return e}).views,c=t.params.viewId;return!Object(M.isUndefined)(c)&&c in a.dict?r.a.createElement(Kt,{viewId:c,location:n}):r.a.createElement(o.a,{to:le.base})}var qt=Object(l.B)({main:{overflowY:"auto",width:"100%"},wrapper:{display:"flex",flexDirection:"row"}}),Qt=function(){return r.a.createElement("div",null,r.a.createElement(o.b,{path:se,component:R}),r.a.createElement(o.b,{path:se,component:Se}),r.a.createElement("div",{className:qt.wrapper},r.a.createElement(o.b,{path:se,component:Vt}),r.a.createElement("div",{className:qt.main},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:le.subject,component:At}),r.a.createElement(o.b,{path:le.search,component:Ut}),r.a.createElement(o.b,{path:le.view,component:Yt}),r.a.createElement(o.a,{to:g})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $t=n(30),Xt=n(107),Zt=n(111),en=n(43),tn=n(108),nn=n.n(tn),an=n(109),rn=n(66),cn=function(e,t){return Object(_.a)({},Object(rn.a)(e,function(e){var n=e.subjects;switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var n=t.subjectId,a=t.name;e.dict[n].name=a,W(e.dict,n)}(n,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var n=t.subjectId,a=t.description;e.dict[n].description=a,W(e.dict,n)}(n,t);break;case"COMPLETE_SUBJECT":Fe(n,t);break;case"UNCOMPLETE_SUBJECT":!function(e,t){var n=t.subjectId;e.dict[n].completed=void 0,W(e.dict,n)}(n,t);break;case"DELETE_SUBJECT":!function(e,t){var n=t.subjectId,a=!0,r=!1,c=void 0;try{for(var i,o=e.dict[n].parents[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;Object(M.remove)(e.dict[l].children.order,function(e){return e===n})}}catch(f){r=!0,c=f}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}var s=!0,d=!1,u=void 0;try{for(var m,b=e.dict[n].children.order[Symbol.iterator]();!(s=(m=b.next()).done);s=!0){var p=m.value;e.dict[p].parents.delete(n)}}catch(f){d=!0,u=f}finally{try{s||null==b.return||b.return()}finally{if(d)throw u}}Object(M.remove)(e.order.order,function(e){return e===n}),W(e.dict,n),delete e.dict[n]}(n,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var n=t.subjectId,a=t.date;e.dict[n].dueDate=a,W(e.dict,n)}(n,t);break;case"CREATE_SUBJECT":!function(e,t){var n=t.subjectType,a=t.parentId,r=t.subjectId,c=t.viewId,i={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},created:new Date,description:"",name:"Untitled",parents:new Set,type:n||"BaseSubject"};e.subjects.dict[r]=i,void 0!==a&&H(e.subjects,z(a,r)),void 0!==c&&V(e,F(c,r)),e.subjects.order.order.push(r)}(e,t);break;case"REMOVE_CHILD_SUBJECT":!function(e,t){var n=t.subjectId,a=t.parent;Object(M.remove)(e.dict[a].children.order,function(e){return e===n}),e.dict[n].parents.delete(a),W(e.dict,n)}(n,t);break;case"APPEND_CHILD_SUBJECT":H(n,t);break;case"SET_FIELDS_ARRAY":!function(e,t){var n=t.parameters,a=n.subjectId,r=n.setSearchOptions,c=t.fields;if((r?e.searchSortOptions:a?e.dict[a].children.options:e.order.options).fields=c,a){var i=e.dict[a].children;i.order=U(e.dict,i)}}(n,t);break;case"SET_FIELDS_DESC":!function(e,t){var n,a=t.parameters,r=a.subjectId,c=a.setSearchOptions,i=t.key,o=t.desc;n=c?e.searchSortOptions:r?e.dict[r].children.options:e.order.options;var l=!0,s=!1,d=void 0;try{for(var u,m=n.fields[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;if(b.key===i){if(b.desc=o,r){var p=e.dict[r].children;p.order=U(e.dict,p)}return}}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}}(n,t);break;case"SET_SEPARATE_COMPLETE":!function(e,t){var n=t.separateCompletedItems,a=t.parameters,r=a.subjectId;if((a.setSearchOptions?e.searchSortOptions:r?e.dict[r].children.options:e.order.options).separateCompletedItems=n,r){var c=e.dict[r].children;c.order=U(e.dict,c)}}(n,t)}return n.order.order.length>0&&(n.order.order=U(n.dict,n.order)),Object(M.isUndefined)(n.searchSortOptions)&&(n.searchSortOptions={fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}),e}))},on=function(){return{dict:{},order:[],orderSet:new Set}},ln=function(e,t){return Object(_.a)({},Object(rn.a)(e,function(n){switch(e.views.dict||(e.views=on()),t.type){case"CREATE_VIEW":!function(e,t){var n=t.viewId,a=function(e){for(var t=1,n="Untitled".concat(t);e.has(n);)n="Untitled".concat(++t);return n}(e.views.orderSet);e.views.dict[n]={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},name:a},e.views.order.push(n),e.views.orderSet.add(a)}(n,t);break;case"UPDATE_VIEW_NAME":!function(e,t){var n=e.views,a=t.name,r=t.viewId;if(!n.orderSet.has(a)){var c=n.dict[r];n.orderSet.delete(c.name),c.name=a}}(n,t);break;case"APPEND_CHILD_VIEW":V(n,t);break;case"REMOVE_CHILD_VIEW":!function(e,t){var n=e.views,a=t.subjectId,r=t.viewId,c=n.dict[r];Object(M.remove)(c.children.order,function(e){return e===a})}(n,t)}return n}))},sn=Object(an.a)(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{subjects:{dict:{},order:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},searchSortOptions:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}},views:on()}},cn,ln),dn=n(110),un=Object(en.a)(function(e,t){for(var n=e.dict,a=Object(De.a)(e,["dict"]),r={},c=0,i=Object.entries(n);c<i.length;c++){var o=i[c],l=Object(u.a)(o,2),s=l[0],d=l[1];r[s]=Object(_.a)({},d,{parents:Object(q.a)(d.parents)})}return Object(_.a)({dict:r},a)},function(e,t){for(var n=e.dict,a=Object(De.a)(e,["dict"]),r={},c=0,i=Object.entries(n);c<i.length;c++){var o=i[c],l=Object(u.a)(o,2),s=l[0],d=l[1],m=d.created,b=d.completed,p=d.dueDate,f=d.parents,h=Object(De.a)(d,["created","completed","dueDate","parents"]),v=b?new Date(b):void 0,j=p?new Date(p):void 0;r[s]=Object(_.a)({},h,{completed:v,created:new Date(m),dueDate:j,parents:new Set(f)})}return Object(_.a)({dict:r},a)},{whitelist:["subjects"]}),mn=Object(en.a)(function(e,t){e.orderSet;return Object(De.a)(e,["orderSet"])},function(e,t){var n=new Set,a=!0,r=!1,c=void 0;try{for(var i,o=e.order[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;n.add(e.dict[l].name)}}catch(s){r=!0,c=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return Object(_.a)({},e,{orderSet:n})},{whitelist:["views"]}),bn={key:"root",storage:nn.a,transforms:[un,mn]},pn=Object(en.b)(bn,sn),fn=Object($t.createStore)(pn,Object(Xt.composeWithDevTools)()),hn=Object(en.c)(fn);Object(Zt.a)(),i.a.render(r.a.createElement(P.a,{store:fn},r.a.createElement(dn.a,{loading:null,persistor:hn},r.a.createElement(d.a,null,r.a.createElement(Qt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,1,2]]]);
//# sourceMappingURL=main.633d193a.chunk.js.map