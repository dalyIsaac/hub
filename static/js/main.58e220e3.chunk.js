(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){e.exports=n(140)},140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),c=n.n(i),o="/search",l=function(e,t){return"".concat(o,"/").concat(e,"/").concat(t)},s=function(e){try{return[e.params.param.toLowerCase(),e.params.query.toLowerCase()]}catch(t){throw Error("This isn't a search path.")}},d="/subjects",u=function(e){var t=e||"";return"".concat(d,"/").concat(t)},m=function(e){return"".concat("/views","/").concat(e)},b={base:"/",search:o+"/:param/:query",subject:d+"/:parentId?",view:"/views/:viewId"},p=[b.search,b.subject,b.view,b.base],f=n(12),h=n(9),v=n(3),j=48,O=115,y=71,C=n(31),E=n(21),w=n(184),g=n(197),k=Object(E.z)({search:{display:"flex",flexDirection:"row"},searchBox:{flexGrow:1},searchDropdown:{width:150}}),x=[{key:"name",text:"Name"},{key:"description",text:"Description"},{key:"childname",text:"Child name"},{key:"childdescription",text:"Child description"}];function I(e){var t=e.history,n=e.match,i=Object(a.useState)("name"),c=Object(h.a)(i,2),o=c[0],d=c[1],u=Object(a.useState)(""),m=Object(h.a)(u,2),b=m[0],p=m[1];Object(a.useEffect)(function(){try{var e=s(n),t=Object(h.a)(e,2),a=t[0],r=t[1];d(a),p(r)}catch(i){d("name"),p("")}},[n]);var f=Object(a.useCallback)(function(e,t){var n=t?t.key:void 0;"string"===typeof n&&d(n)},[]),v=Object(a.useCallback)(function(e){t.push(l(o,e))},[t,o]);return r.a.createElement("div",{className:k.search},r.a.createElement(w.a,{options:x,selectedKey:o,className:k.searchDropdown,onChange:f}),r.a.createElement(g.a,{className:k.searchBox,value:b,placeholder:"Search",onSearch:v}))}var S=n(194),D=n(4),T=Object(v.b)(),N=Object(v.c)({appBar:{alignItems:"center",backgroundColor:T.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"grid",gridTemplateColumns:"150px minmax(200px, auto) 150px",height:j},link:{color:T.palette.black,textDecoration:"none",selectors:{"&:hover":{color:T.palette.neutralLighter,textDecoration:"none"}}},searchDropdown:{width:150},title:{paddingLeft:24}});function R(e){var t=e.match,n=t.params,i=n.parentId,c=n.viewId,l=t.path===b.subject||t.path===d,m=t.path===b.search||t.path===o,p=t.path===b.view&&c,f=Object(D.c)(function(e){return e}),v=f.subjects,j=f.views;return Object(a.useEffect)(function(){var e=null,n=null;if(l)e="subjects",i&&(n=v.dict[i].name);else if(m){var a=s(t),r=Object(h.a)(a,2);e="search/"+r[0],n=r[1]}else p&&c&&(e="views",n=j.dict[c].name);document.title=e?n?"hub/".concat(e,": ").concat(n):"hub/".concat(e):"hub"},[l,i,v.dict,m,t,p,c,j.dict]),r.a.createElement("div",{className:N.appBar},r.a.createElement(C.b,{to:u(),className:N.link},r.a.createElement(S.a,{className:N.title,variant:"xLarge"},"hub")),r.a.createElement(I,e),r.a.createElement("div",null))}var B=n(179),L=n(29),_=45,P=44,A=n(8),M=n(204),U=function(e){return{display:e,type:"SET_DISPLAY_ACTION"}},W=Object(E.w)(),z={borderBottom:"1px solid "+W.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",height:P,margin:0,padding:0,zIndex:10},F=Object(E.z)({leftWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},rightWrapper:{alignItems:"center",display:"flex",flexDirection:"row-reverse"},wrapper:Object(A.a)({},z,{alignItems:"center",backgroundColor:W.palette.white,display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:24,paddingRight:24,position:"relative"})});function J(e){var t=e.items,n=e.farItems,i=Object(D.c)(function(e){return e.display}).display,c=Object(D.b)(),o=Object(a.useCallback)(function(){c(U("grid"===i?"list":"grid"))},[i,c]);return r.a.createElement("div",{className:F.wrapper},r.a.createElement("div",{className:F.leftWrapper},t),r.a.createElement("div",{className:F.rightWrapper},n,r.a.createElement(M.a,{key:"toggleView",ariaLabel:"Toggle view",iconProps:{iconName:"list"===i?"BulletedListText":"GridViewMedium"},text:"list"===i?"List":"Grid",styles:{root:{background:W.palette.white,height:P}},menuProps:{directionalHintFixed:!0,items:["list"===i?{iconProps:{iconName:"GridViewMedium"},key:"gridButton",onClick:o,text:"Grid"}:{iconProps:{iconName:"BulletedListText"},key:"listButton",onClick:o,text:"List"}]}})))}var V=n(36),H=n(181),G=n(10),Y={iconProps:{iconName:"Completed"},key:"complete-1-level",text:"Mark as complete"},K={iconProps:{iconName:"CompletedSolid"},key:"complete-2-level",text:"Mark this and its children as complete"},q={iconProps:{iconName:"Blocked2"},key:"uncomplete",text:"Mark as incomplete"},Q={iconProps:{iconName:"Remove"},key:"remove",text:"Remove this as a child"},$={iconProps:{iconName:"Delete"},key:"delete",text:"Delete this"},X=n(11);function Z(e,t){var n=t.order,a=t.options,r=a.fields,i=a.separateCompletedItems,c=[],o=[],l=!0,s=!1,d=void 0;try{for(var u,m=n[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;e[b].completed&&i?o.push(b):c.push(b)}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}var p=function(e,t){function n(e,t,n,a){a?Array.isArray(e)&&Array.isArray(t)||"string"===typeof e&&"string"===typeof t?(e=e.length,t=t.length):e instanceof Set&&t instanceof Set&&(e=e.size,t=t.size):"string"===typeof e&&"string"===typeof t&&(e=e.toLowerCase(),t=t.toLowerCase());var r=!Object(X.isUndefined)(e),i=!Object(X.isUndefined)(t),c=n?-1:1;return r||i?r&&!i?1*c:!r&&i?-1*c:e<t?-1*c:e>t?1*c:0:0}return function(a,r){var i=!0,c=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var d=l.value,u=d.key,m=d.desc,b=d.compareLength,p=t[a][u],h=t[r][u];"children"===u&&(p=p.order,h=h.order);var v=n(p,h,m,b);if(0!==v)return v}}catch(f){c=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(c)throw o}}return 0}}(r,e);return c.sort(p),o.sort(p),c.concat(o)}function ee(e,t){if(t in e){var n=!0,a=!1,r=void 0;try{for(var i,c=e[t].parents[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=e[i.value].children;o.order=Z(e,o)}}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}}}function te(e,t){var n=e.views,a=e.subjects.dict;if(t in a){var r=!0,i=!1,c=void 0;try{for(var o,l=a[t].views[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,d=n.dict[s].children;d.order=Z(a,d)}}catch(u){i=!0,c=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}}}var ne=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},ae=function(e,t){!function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,i=t.subjects.dict;if(void 0===i[n].completed&&(i[n].completed=r,ee(i,n),te(t,n),a>1)){var c=!0,o=!1,l=void 0;try{for(var s,d=i[n].children.order[Symbol.iterator]();!(c=(s=d.next()).done);c=!0)e(t,s.value,a-1,r)}catch(u){o=!0,l=u}finally{try{c||null==d.return||d.return()}finally{if(o)throw l}}}}(e,t.subjectId,t.level)},re=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},ie=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},ce=function(e,t){return{subjectId:t,type:"REMOVE_SUBJECT_FROM_VIEW",viewId:e}};function oe(e){var t=e.item,n=e.showCloseButton,i=e.ev,c=e.onDismiss,o=e.onEditClick,l=Object(D.b)(),s=t.id,d=t.viewId,u=Object(a.useCallback)(function(e,t,n){l(!0===t?ne(s,n):re(s))},[l,s]),m=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,1)},[u]),b=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,2)},[u]),p=Object(a.useCallback)(function(e,t){t&&u(e,!1)},[u]),f=Object(a.useCallback)(function(){l(ie(s))},[l,s]),h=Object(a.useCallback)(function(){o(t)},[t,o]),v=Object(a.useCallback)(function(){d&&s&&l(ce(d,s))},[l,s,d]),j=[Object(A.a)({},Y,{onClick:m}),Object(A.a)({},K,{onClick:b})],O=[Object(A.a)({},q,{onClick:p})],y=[{iconProps:{iconName:"Edit"},key:"edit",onClick:h,text:"Edit"}].concat(Object(V.a)(t.subject.completed?O:j),[{iconProps:{iconName:"Delete"},key:"delete",onClick:f,text:"Delete this"}]);return n&&y.push({iconProps:{iconName:"Cancel"},key:"removeChildView",onClick:v,text:"Remove this subject from this view"}),r.a.createElement(H.a,{items:y,target:i.target,directionalHint:G.a.bottomCenter,isBeakVisible:!1,onDismiss:c})}var le=n(188),se=n(185),de=n(190),ue=n(198),me=n(187),be=Object(E.w)(),pe="1px solid "+be.palette.neutralTertiary,fe=Object(E.z)({wrapper:{border:pe,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",gridTemplateRows:"auto auto",marginBottom:2},checkboxWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},checkbox:{margin:8},divider:{background:be.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},button:{gridColumn:"3"},content:{gridColumn:"1 / 3",gridRow:"2",paddingLeft:8,paddingRight:8}});function he(e){var t=e.button,n=e.checked,i=e.children,c=e.contextMenuItems,o=e.editable,l=e.key,s=e.label,d=e.onCheckboxChange,u=e.onEditableBlur,m=Object(a.useRef)(null),b=Object(a.useState)(s),p=Object(h.a)(b,2),f=p[0],v=p[1],j=Object(a.useState)(!1),O=Object(h.a)(j,2),y=O[0],C=O[1];Object(a.useEffect)(function(){v(s)},[s]);var E=Object(a.useCallback)(function(e){e.preventDefault(),C(!y)},[y]),w=Object(a.useCallback)(function(e,t){v(t||"")},[]),g=Object(a.useCallback)(function(){if(u){var e=f||"Untitled";u(e),v(e)}},[f,u]);return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:E,ref:m,key:l},r.a.createElement("div",{className:fe.wrapper},r.a.createElement("div",{className:fe.checkboxWrapper},r.a.createElement(ue.a,{checked:n,label:o?void 0:s,className:fe.checkbox,onChange:d}),o?r.a.createElement(me.a,{value:f,borderless:!0,onChange:u?w:void 0,onBlur:g}):null),r.a.createElement("div",{className:fe.content},i),t?r.a.createElement("span",{className:fe.divider}):null,r.a.createElement("div",{className:fe.button},t||null)),r.a.createElement(H.a,{hidden:!(c&&y),isBeakVisible:!1,onDismiss:E,target:m,directionalHint:G.a.bottomRightEdge,items:c}))}var ve=function(e,t){return{child:t,subjectId:e,type:"APPEND_CHILD_SUBJECT_TO_SUBJECT"}},je=function(e,t){var n=t.subjectId,a=t.child,r=e.subjects,i=r.dict[n].children;i.order.push(a),i.order=Z(r.dict,i),r.dict[a].parents.add(n),te(e,n)};function Oe(e){var t=e.id,n=e.parent,i=e.subject,c=Object(D.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&c(ve(n,t))},[c,t,n]);return r.a.createElement(he,{checked:!1,label:i.name,onCheckboxChange:o})}function ye(e){if(e&&!Object(X.isUndefined)(e.parent))return r.a.createElement(Oe,e)}var Ce=n(177);function Ee(e,t,n){var a=[],r=n?n.parentId:void 0,i=n?n.viewId:void 0,c=!0,o=!1,l=void 0;try{for(var s,d=t[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var u=s.value,m={id:u,parent:r,subject:e[u],viewId:i};(Object(X.isUndefined)(n)||Object(X.isUndefined)(n.condition)||n.condition(m))&&a.push(m)}}catch(b){o=!0,l=b}finally{try{c||null==d.return||d.return()}finally{if(o)throw l}}return a}var we=Object(v.c)({list:{overflow:"auto"}});function ge(e){var t=e.order,n=e.parentId,i=e.maxHeight,c=e.onRenderCell,o=e.illegalIds,l=e.notifyNoChildren,s=e.viewId,d=Object(D.c)(function(e){return e}).subjects,u=Object(a.useCallback)(function(e){return!!o&&!o.has(e.id)},[o]),m={condition:o?u:void 0,parentId:n,viewId:s},b=Ee(d.dict,t,m);return r.a.createElement("div",{className:we.list,style:{maxHeight:i}},0===b.length&&l?r.a.createElement(S.a,null,"There's nothing here",r.a.createElement("span",{role:"img","aria-label":"Gust of Wind emoji"},"\ud83d\udca8")):r.a.createElement(Ce.a,{items:b,onRenderCell:c}))}var ke=function(e,t){return{subjectId:t,type:"APPEND_SUBJECT_TO_VIEW",viewId:e}},xe=function(e,t){var n=t.subjectId,a=t.viewId,r=e.subjects,i=e.views,c=i.dict[a].children;c.order.push(n),i.dict[a].children.order=Z(r.dict,c),r.dict[n].views.add(a),te(e,n)},Ie=n(70),Se=function(e){return Object(A.a)({subjectId:Object(Ie.v4)(),type:"CREATE_SUBJECT"},e)},De=32,Te=Object(E.w)(),Ne=Object(E.z)({wrapper:{border:pe,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",marginBottom:1,marginTop:1},button:{alignItems:"center",background:Te.palette.white,border:"none",cursor:"pointer",display:"flex",flexDirection:"row",height:De,outline:"none",padding:0,selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:focus":{outline:"1px solid "+Te.palette.themePrimary},"&:hover":{filter:"brightness(90%)",outline:"none"}}},divider:{background:Te.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},icon:{fontSize:12,margin:8,paddingLeft:4,textAlign:"center"},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),Re=function(e){var t=e.parent,n=Object(a.useRef)(null),i=Object(D.b)(),c=Object(a.useState)(!1),o=Object(h.a)(c,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(h.a)(d,2),m=u[0],b=u[1],p=Object(a.useCallback)(function(){return s(!1)},[]),f=Object(a.useCallback)(function(){return s(!0)},[]),v=Object(a.useCallback)(function(){return b(!m)},[m]),j=Object(a.useCallback)(function(){return b(!1)},[]),y=Object(a.useCallback)(function(){i(Se({parentId:t}))},[i,t]),C=Object(D.c)(function(e){return e}).subjects,E=[{iconProps:{iconName:"RowsChild"},key:"appendChildren",onClick:f,text:"Append child subjects"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ne.wrapper},r.a.createElement("button",{className:Ne.button,style:{gridColumn:1},onClick:y},r.a.createElement(se.a,{iconName:"Add",className:Ne.icon}),r.a.createElement(S.a,{className:Ne.text},"Add child")),r.a.createElement("span",{className:Ne.divider}),r.a.createElement("button",{className:Ne.button,onClick:v,ref:n,style:{gridColumn:3}},r.a.createElement(se.a,{iconName:"ChevronDown",style:{width:"100%"}}))),r.a.createElement(de.a,{isOpen:l,isLightDismiss:!0,headerText:"Append Children",onDismiss:p},r.a.createElement(ge,{parentId:t,illegalIds:new Set(C.dict[t].children.order.concat(t)),order:C.order.order,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(O,")"),onRenderCell:ye})),r.a.createElement(H.a,{hidden:!m,isBeakVisible:!1,onDismiss:j,target:n,directionalHint:G.a.bottomRightEdge,items:E}))},Be=n(195),Le=n(189),_e=n(205),Pe=n(199),Ae=n(182),Me=function(e,t){return{parent:t,subjectId:e,type:"REMOVE_CHILD_SUBJECT_FROM_SUBJECT_REDUCER"}},Ue=function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}},We=Object(v.c)({open:{height:40,width:"100%"}});function ze(e){var t=e.id,n=e.parent,i=e.subject,c=Object(D.b)(),o=Object(a.useCallback)(function(e,n,a){c(!0===n?ne(t,a):re(t))},[c,t]),l=Object(a.useCallback)(function(e){c(Ue(t,e||"Untitled"))},[c,t]),s=Object(a.useCallback)(function(e,t){t&&o(e,!0,1)},[o]),d=Object(a.useCallback)(function(e,t){t&&o(e,!0,2)},[o]),m=Object(a.useCallback)(function(e,t){t&&o(e,!1)},[o]),b=Object(a.useCallback)(function(){c(Me(t,n))},[c,t,n]),p=Object(a.useCallback)(function(){c(ie(t))},[c,t]),f=[Object(A.a)({},Y,{onClick:s}),Object(A.a)({},K,{onClick:d})],h=[Object(A.a)({},q,{onClick:m})],v=[].concat(Object(V.a)(i.completed?h:f),[Object(A.a)({},Q,{onClick:b}),Object(A.a)({},$,{onClick:p})]),j="Open "+i.name,O=r.a.createElement(C.b,{to:u(t),tabIndex:-1},r.a.createElement(_e.a,{className:We.open,iconProps:{iconName:"OpenFile"},ariaLabel:j,title:j}));return r.a.createElement(he,{editable:!0,onEditableBlur:l,checked:!!i.completed,label:i.name,onCheckboxChange:o,contextMenuItems:v,button:O})}function Fe(e){if(e&&!Object(X.isUndefined)(e.parent))return r.a.createElement(ze,Object.assign({},e,{key:e.id}))}var Je=n(105),Ve=Object(v.b)(),He=Object(v.c)({title:{border:"1px solid transparent",borderRadius:0,fontSize:Je.a.size28,height:32,outline:"none",paddingBottom:4,textAlign:"center",width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+Ve.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+Ve.palette.neutralTertiary,outline:"none"}}}});function Ge(e){var t=e.value,n=e.className,a=e.onBlur,i=e.onChange,c=e.textAlign,o=void 0===c?"left":c;return r.a.createElement("div",{className:n},r.a.createElement("input",{className:He.title,onChange:i,onBlur:a,value:t,style:{textAlign:o}}))}var Ye=function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}},Ke=function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}},qe=Object(v.b)(),Qe="1px solid "+qe.palette.neutralTertiary,$e="1px solid "+qe.palette.themePrimary,Xe=Object(v.c)({headerWrapper:{borderTopLeftRadius:4,borderTopRightRadius:4,display:"grid",gridTemplateColumns:"32px auto 32px"},header:{alignItems:"center",borderTopLeftRadius:4,borderTopRightRadius:4,color:qe.palette.neutralLight,display:"flex",flexDirection:"column",gridColumn:"2",gridRow:"1",margin:-1,padding:5,zIndex:1},headerOpenButton:{background:qe.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,margin:0,marginTop:0,outline:"none",zIndex:2,selectors:{"&:focus":{border:$e,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,outline:"none"}}},headerCloseButton:{background:qe.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,margin:0,outline:"none",zIndex:2,selectors:{"&:active":{backgroundColor:qe.palette.red,color:qe.palette.white,filter:"brightness(80%)",outline:"none"},"&:focus":{border:$e,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,outline:"none"},"&:hover":{backgroundColor:qe.palette.red,color:qe.palette.white}}},headerLink:{gridColumn:"3",gridRow:"1",outline:"none"},body:{padding:10},title:{alignItems:"center",display:"flex",flexDirection:"column",paddingBottom:5,paddingTop:10},description:{paddingBottom:10,paddingTop:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:qe.palette.white,border:Qe,width:"100%"},heroButton:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:10}});function Ze(e){var t=e.item,n=t.subject,i=t.id,c=t.viewId,o=e.listHeight,l=e.showOpenButton,s=e.showCloseButton,d=Object(D.b)(),m=Object(a.useState)(n.name),b=Object(h.a)(m,2),p=b[0],f=b[1],v=Object(a.useState)(n.description),j=Object(h.a)(v,2),O=j[0],y=j[1],E=Object(D.c)(function(e){return e}).subjects;Object(a.useEffect)(function(){f(n.name)},[n.name]),Object(a.useEffect)(function(){y(n.description)},[n.description]);var w,g,k,x,I,T=Object(a.useCallback)(function(e){f(e.target.value)},[]),N=Object(a.useCallback)(function(){var e=p||"Untitled";n.name!==e&&d(Ue(i,e)),f(e)},[d,i,p,n.name]),R=Object(a.useCallback)(function(e,t){y(t||"")},[]),B=Object(a.useCallback)(function(){n.description!==O&&d(Ye(i,O))},[d,i,O,n.description]),L=Object(a.useCallback)(function(e){d(Ke(i,e||void 0))},[d,i]),_=Object(a.useCallback)(function(){d(ne(i,1))},[d,i]),P=Object(a.useCallback)(function(){d(re(i))},[d,i]),M=Object(a.useCallback)(function(){return L()},[L]),U=Object(a.useCallback)(function(){d(ne(i,2))},[d,i]),W=Object(a.useCallback)(function(){d(ie(i))},[d,i]),z=Object(a.useCallback)(function(){c&&i&&d(ce(c,i))},[d,i,c]),F=Object(A.a)({},K,{onClick:U}),J=Object(A.a)({},$,{onClick:W}),V=n.dueDate?(w=new Date,g=n.dueDate,Math.ceil((g.valueOf()-w.valueOf())/864e5)):"\u221e";n.completed?(I=qe.palette.red,k="Completed "+n.completed.toLocaleDateString(),x=r.a.createElement(Be.a,Object.assign({},q,{split:!0,onClick:P,menuProps:{directionalHint:G.a.bottomCenter,isBeakVisible:!1,items:[J]},style:{background:qe.palette.white}}))):(I=qe.palette.green,k="Created "+n.created.toLocaleDateString(),x=r.a.createElement(Be.a,Object.assign({primary:!0},Y,{split:!0,onClick:_,menuProps:{directionalHint:G.a.bottomCenter,isBeakVisible:!1,items:[F,J]}})));var H=r.a.createElement(S.a,{className:Xe.header,tabIndex:-1},k),Q="Open "+n.name,X="Close "+n.name;return r.a.createElement(Le.a,{verticalAlign:"center"},r.a.createElement("div",{className:Xe.headerWrapper,style:{backgroundColor:I}},s?r.a.createElement(_e.a,{styles:{root:{width:""}},className:Xe.headerCloseButton,iconProps:{iconName:"Cancel"},title:X,ariaLabel:X,onClick:z}):null,H,l?r.a.createElement(C.b,{to:u(i),className:Xe.headerLink,tabIndex:-1},r.a.createElement(_e.a,{styles:{root:{width:""}},className:Xe.headerOpenButton,iconProps:{iconName:"OpenFile"},title:Q,ariaLabel:Q})):null),r.a.createElement("div",{className:Xe.body},r.a.createElement(Ge,{textAlign:"center",className:Xe.title,value:p,onChange:T,onBlur:N}),r.a.createElement(me.a,{resizable:!1,multiline:!0,rows:3,value:O,onChange:R,onBlur:B,className:Xe.description,styles:{field:{height:63}}}),r.a.createElement("div",{className:Xe.date},r.a.createElement(Pe.a,null,"Due date:"),r.a.createElement("div",{className:Xe.datePicker},r.a.createElement(Ae.a,{disableAutoFocus:!0,value:n.dueDate,onSelectDate:L}),n.dueDate?r.a.createElement(_e.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:M}):null)),r.a.createElement("div",{className:Xe.daysLeft},r.a.createElement(Pe.a,null,"".concat(V," ").concat(1===V?"day":"days"," left"))),r.a.createElement("div",{style:{minHeight:"calc((".concat(o,") + ").concat(De,"px)")}},r.a.createElement(ge,{parentId:i,order:E.dict[i].children.order,maxHeight:"calc(".concat(o,")"),onRenderCell:Fe}),r.a.createElement(Re,{parent:i})),r.a.createElement("div",{className:Xe.heroButton},x)))}var et=Object(E.w)(),tt=Object(E.z)({subjectWrapper:{backgroundColor:et.palette.white,border:"1px solid "+et.palette.neutralTertiary,borderRadius:4}});function nt(e){var t=e.modalItem,n=e.dismissModal,a=e.showCloseButton;return r.a.createElement(le.a,{isOpen:!!t,onDismiss:n,styles:{main:{backgroundColor:"none",border:"1px solid transparent",borderRadius:4}}},r.a.createElement("div",{className:tt.subjectWrapper},t?r.a.createElement(Ze,{showCloseButton:a,item:t,showOpenButton:!0}):null))}var at=n(106),rt=n.n(at),it=400,ct=Object(E.w)(),ot=Object(E.z)({content:{alignItems:"stretch",display:"flex",flexDirection:"row",height:"100%"},mainWrapper:{display:"flex",flexDirection:"column"},sidebar:{border:"1px solid "+ct.palette.white,borderRadius:4,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",minWidth:it,zIndex:10},wrapper:{display:"flex",flexDirection:"column"}});function lt(e){var t=e.commandBar,n=e.main,a=e.parentId,i=e.title,c=Object(D.c)(function(e){return e.subjects}).dict,o=a?r.a.createElement("div",{className:ot.sidebar},r.a.createElement(Ze,{item:{id:a,subject:c[a]}})):null,l=a?"calc(100% - ".concat(it+2,"px)"):"100%",s=rt()();return o&&s.innerWidth<2*it?o:r.a.createElement("div",{className:ot.wrapper},t,r.a.createElement("div",{className:ot.content},r.a.createElement("div",{className:ot.mainWrapper,style:{width:l}},i,n),o))}var st=n(193);function dt(e){var t=e.id,n=e.viewId,i=e.subject,c=Object(D.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&c(ke(n,t))},[c,t,n]);return r.a.createElement(he,{checked:!1,label:i.name,onCheckboxChange:o})}function ut(e){if(e&&!Object(X.isUndefined)(e.viewId))return r.a.createElement(dt,e)}function mt(e){var t=e.hidePanel,n=e.isOpen,a=e.viewId,i=Object(D.c)(function(e){return e}),c=i.subjects,o=i.views;if(Object(X.isUndefined)(a)||!(a in o.dict))return r.a.createElement(f.a,{to:b.base});var l=c.order.order,s=new Set(o.dict[a].children.order);return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{isOpen:n,isLightDismiss:!0,headerText:"Append Children",onDismiss:t},r.a.createElement(ge,{viewId:a,order:l,illegalIds:s,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(O,")"),onRenderCell:ut})))}var bt=n(178),pt=n(186),ft=function(e,t){return{fields:e,parameters:t,type:"SET_FIELDS_ARRAY"}};var ht=function(e,t){t.parameters.viewId?function(e,t){var n=t.parameters.viewId,a=t.fields,r=e.views.dict[n].children;r.options.fields=a,r.order=Z(e.subjects.dict,r)}(e,t):function(e,t){var n=t.parameters,a=n.subjectId,r=n.setSearchOptions,i=t.fields;if((r?e.searchSortOptions:a?e.dict[a].children.options:e.order.options).fields=i,a){var c=e.dict[a].children;c.order=Z(e.dict,c)}}(e.subjects,t)},vt=function(e,t,n){return{desc:t,key:e,parameters:n,type:"SET_FIELDS_DESC"}};var jt=function(e,t){t.parameters.viewId?function(e,t){var n=t.parameters.viewId,a=t.key,r=t.desc,i=e.views.dict[n],c=!0,o=!1,l=void 0;try{for(var s,d=i.children.options.fields[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var u=s.value;if(u.key===a)return u.desc=r,void(i.children.order=Z(e.subjects.dict,i.children))}}catch(m){o=!0,l=m}finally{try{c||null==d.return||d.return()}finally{if(o)throw l}}}(e,t):function(e,t){var n,a=t.parameters,r=a.subjectId,i=a.setSearchOptions,c=t.key,o=t.desc;n=i?e.searchSortOptions:r?e.dict[r].children.options:e.order.options;var l=!0,s=!1,d=void 0;try{for(var u,m=n.fields[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;if(b.key===c){if(b.desc=o,r){var p=e.dict[r].children;p.order=Z(e.dict,p)}return}}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}}(e.subjects,t)},Ot=Object(E.w)(),yt=Object(E.z)({dragEnterClass:{backgroundColor:Ot.palette.neutralLight},gripperWrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",justifyContent:"center",width:"100%",selectors:{"&:hover":{cursor:"pointer"}}},wrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",paddingLeft:2,width:"100%"}});function Ct(e){var t=e.subjectId,n=e.setSearchOptions,i=e.fields,c=e.viewId,o=Object(a.useRef)(-1),l=Object(a.useRef)(null),s=Object(a.useRef)(new bt.a),d=Object(a.useRef)(null),u=Object(a.useState)(!1),m=Object(h.a)(u,2),b=m[0],p=m[1],f=Object(a.useCallback)(function(){p(!1)},[]),v=Object(a.useCallback)(function(){p(!0)},[]),j=Object(D.b)(),O=Object(a.useCallback)(function(e){var a=s.current.isIndexSelected(o.current)?s.current.getSelection():[l.current],r=i.filter(function(e){return-1===a.indexOf(e)}),d=r.indexOf(e);-1===d&&(d=0),r.splice.apply(r,[d,0].concat(Object(V.a)(a))),j(ft(r,{setSearchOptions:n,subjectId:t,viewId:c}))},[j,i,t,c,n]),y=Object(a.useCallback)(function(e,t){return!0},[]),C=Object(a.useCallback)(function(e){return!0},[]),E=Object(a.useCallback)(function(e,t){return yt.dragEnterClass},[]),w=Object(a.useCallback)(function(e,t){},[]),g=Object(a.useCallback)(function(e,t){l.current&&O(e)},[O]),k=Object(a.useCallback)(function(e,t,n,a){l.current=e,o.current=t},[]),x={canDrag:C,canDrop:y,onDragEnd:Object(a.useCallback)(function(e,t){l.current=null,o.current=-1},[]),onDragEnter:E,onDragLeave:w,onDragStart:k,onDrop:g},I=Object(a.useCallback)(function(e,a,r){j(vt(r,a,{setSearchOptions:n,subjectId:t,viewId:c}))},[j,c,t,n]),T=[{key:"gripper",minWidth:20,name:"",onRender:Object(a.useCallback)(function(){return r.a.createElement("div",{className:yt.gripperWrapper},r.a.createElement(se.a,{iconName:"GripperBarHorizontal"}))},[])},{fieldName:"name",key:"param",minWidth:150,name:"Parameter",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:yt.wrapper},r.a.createElement(S.a,null,e.name))},[])},{fieldName:"desc",key:"direction",minWidth:150,name:"Direction",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:yt.wrapper},r.a.createElement(st.a,{styles:{root:{margin:0}},key:e.key,defaultChecked:e.desc,offText:"Ascending",onText:"Descending",onChange:function(t,n){return I(t,n,e.key)}}))},[I])}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:d},r.a.createElement(M.a,{text:"Sort",iconProps:{iconName:"Sortlines"},ariaLabel:"Sort",onClick:v,styles:{root:{height:P}}})),r.a.createElement(pt.a,{target:d.current,onDismiss:f,hidden:!b,directionalHint:G.a.bottomCenter,isBeakVisible:!1},r.a.createElement("div",{onBlur:f},r.a.createElement(B.a,{selection:s.current,columns:T,items:i,selectionMode:L.b.none,dragDropEvents:x}))))}var Et=function(e,t){return{parameters:t,separateCompletedItems:e,type:"SET_SEPARATE_COMPLETE"}};var wt=function(e,t){t.parameters.viewId?function(e,t){var n=t.separateCompletedItems,a=t.parameters.viewId,r=e.views.dict[a];r.children.options.separateCompletedItems=n,r.children.order=Z(e.subjects.dict,r.children)}(e,t):function(e,t){var n=t.separateCompletedItems,a=t.parameters,r=a.subjectId;if((a.setSearchOptions?e.searchSortOptions:r?e.dict[r].children.options:e.order.options).separateCompletedItems=n,r){var i=e.dict[r].children;i.order=Z(e.dict,i)}}(e.subjects,t)},gt={root:{height:P}};function kt(e){var t,n=e.match,i=e.showSort,c=e.subjectId,o=n.params.viewId,l=n.path===b.view&&!!o,s=Object(D.b)(),d=Object(D.c)(function(e){return e}),u=d.subjects,m=d.views;t=l&&o in m.dict?m.dict[o].children.options:c&&c in u.dict?u.dict[c].children.options:u.order.options;var p=Object(a.useCallback)(function(e,t){s(Et(t,{subjectId:c,viewId:o}))},[s,c,o]),f=[],v=Object(a.useState)(!1),j=Object(h.a)(v,2),O=j[0],y=j[1],C=Object(a.useCallback)(function(){y(!0)},[]),E=Object(a.useCallback)(function(){y(!1)},[]);return l&&f.push(r.a.createElement(M.a,{key:"appendChildren",text:"Append child subjects",iconProps:{iconName:"RowsChild"},ariaLabel:"Create child subject",onClick:C,styles:gt}),r.a.createElement(mt,{key:"panel",hidePanel:E,isOpen:O,viewId:o})),i&&f.push(r.a.createElement(Ct,{key:"sort",subjectId:c,viewId:o,fields:t.fields})),f.push(r.a.createElement(st.a,{key:"separateComplete",checked:t.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:p,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}})),f}var xt=Object(E.w)(),It=Object(E.z)({rowButton:{selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:hover":{filter:"brightness(90%)",outline:"none"}}},rowButtonWrapper:{display:"flex",flexDirection:"row"},subjectWrapper:{backgroundColor:xt.palette.white,border:"1px solid "+xt.palette.neutralTertiary,borderRadius:4}});function St(e){var t=e.item,n=e.openModal,i=e.showCloseButton,c=Object(D.b)(),o=Object(a.useCallback)(function(){n(t)},[t,n]),l=Object(a.useCallback)(function(){t.viewId&&t.id&&c(ce(t.viewId,t.id))},[c,t]),s="Open "+t.subject.name,d="Edit "+t.subject.name,m="Close "+t.subject.name;return r.a.createElement("div",{className:It.rowButtonWrapper},i?r.a.createElement(_e.a,{onClick:l,styles:{root:{width:""}},className:It.rowButton,iconProps:{iconName:"Cancel"},title:m,ariaLabel:m}):null,r.a.createElement(_e.a,{onClick:o,styles:{root:{width:""}},className:It.rowButton,iconProps:{iconName:"Edit"},title:d,ariaLabel:d}),r.a.createElement(C.b,{to:u(t.id)},r.a.createElement(_e.a,{styles:{root:{width:""}},className:It.rowButton,iconProps:{iconName:"OpenFile"},title:s,ariaLabel:s})))}var Dt=n(45),Tt=n(52),Nt=3,Rt=603,Bt=Object(v.b)(),Lt=Object(v.c)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(it,"px")},grid:{height:"100%",overflow:"auto",overflowY:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+Bt.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"}}),_t=function(){return Rt*Nt};var Pt=Object(f.g)(function(e){var t=e.title,n=e.match,i=e.showCloseButton,c=Object(Dt.a)(e,["title","match","showCloseButton"]),o=c.options?c.options.parentId:void 0,l=Object(D.c)(function(e){return e}).subjects,s=Object(a.useRef)(0),d=Object(a.useRef)(0),u=Object(a.useRef)(null),m=Mt(c),b=m.items,p=m.componentOrder,f=m.currentOrder,h=m.setCurrentOrder;Object(a.useEffect)(function(){if(u.current&&f!==p&&p.length>0){var e=At(f,p),t=l.dict[p[e]];(0===t.parents.size||t.parents.has(o))&&u.current.scrollToIndex(e,function(){return Rt},Tt.a.top),h(p)}},[p,f,h,o,l]);var v=Object(a.useCallback)(function(e){if(e)return r.a.createElement("div",{className:Lt.tile,"data-is-focusable":!0,key:e.id,style:{height:Rt,width:100/s.current+"%"}},r.a.createElement("div",{className:Lt.padding},r.a.createElement("div",{className:Lt.contents},r.a.createElement(Ze,{showCloseButton:i,item:e,listHeight:"260px",showOpenButton:!0}))))},[i]),j=Object(a.useCallback)(function(e,t){if(0===e&&t){var n=t.width/it;s.current=t.width>1.5*it?Math.ceil(n):Math.floor(n),d.current=Math.floor(t.width/s.current)}return s.current*Nt},[]),O=kt({match:n,showSort:!0,subjectId:o});return r.a.createElement(lt,{commandBar:r.a.createElement(J,{items:O}),main:r.a.createElement(Ce.a,{ref:u,className:Lt.grid,items:b,getItemCountForPage:j,getPageHeight:_t,renderedWindowsAhead:4,onRenderCell:v}),parentId:o,title:t})}),At=function(e,t){for(var n=0;n<t.length;n++){if(t[n]!==e[n])return n}return 0};function Mt(e){var t,n,r=e.options,i=e.sortOptions;r&&(t=r.parentId,n=r.viewId);var c,o,l,s=Object(D.c)(function(e){return e}),d=s.subjects,u=s.views;i?(c=Z(d.dict,Object(A.a)({},d.order,{options:i})),o=i.fields,l={setSearchOptions:!0}):t?(c=d.dict[t].children.order,o=d.dict[t].children.options.fields,l={subjectId:t}):n?(c=u.dict[n].children.order,o=u.dict[n].children.options.fields,l={viewId:n}):(c=d.order.order,o=d.order.options.fields,l={});var m=Object(a.useState)(c),b=Object(h.a)(m,2),p=b[0],f=b[1];return{componentOrder:c,currentOrder:p,items:Ee(d.dict,c,r),reorderParams:l,setCurrentOrder:f,sortFields:o}}function Ut(e){var t=e.match.params.parentId,n=Object(D.c)(function(e){return e}),a=n.display.display,i=n.subjects.dict;if(!Object(X.isUndefined)(t)&&!(t in i))return r.a.createElement(f.a,{to:"/"});var c={parentId:t};return"list"===a?r.a.createElement(Wt,{options:c}):r.a.createElement(Pt,{options:c})}var Wt=Object(f.g)(function(e){var t=e.title,n=e.history,i=e.match,c=e.options,o=e.showCloseButton,l=e.sortOptions,s=c?c.parentId:void 0,d=Object(D.c)(function(e){return e}).subjects,m=Mt({options:c,sortOptions:l}),p=m.items,f=m.componentOrder,v=m.currentOrder,O=m.setCurrentOrder,C=m.reorderParams,E=m.sortFields,w=function(e){var t=e.history,n=e.reorderParams,r=e.sortFields,i=Object(D.b)(),c=Object(a.useCallback)(function(e,t){var a=r[e],c=r.filter(function(t,n){return n!==e});c.splice(t,0,a),i(ft(c,n))},[r,i,n]);return{dispatchSetFieldsDesc:Object(a.useCallback)(function(e,t){"openButton"!==t.key&&i(vt(t.key,!t.isSortedDescending,n))},[i,n]),getKey:Object(a.useCallback)(function(e){return e.id},[]),onItemInvoked:Object(a.useCallback)(function(e){t.push(u(e.id))},[t]),reorder:c}}({history:n,reorderParams:C,sortFields:E}),g=w.dispatchSetFieldsDesc,k=w.getKey,x=w.onItemInvoked,I=w.reorder,S=function(e){var t=Object(a.useState)(null),n=Object(h.a)(t,2),r=n[0],i=n[1],c=Object(a.useCallback)(function(){i(null)},[]),o=Object(a.useCallback)(function(e){i(e)},[]);return!r||r.id in e.dict||i(null),Object(a.useEffect)(function(){if(r)if(r.id in e.dict){var t=e.dict[r.id];t!==r.subject&&i(Object(A.a)({},r,{subject:t}))}else i(null)},[e.dict,r,i]),{dismissModal:c,modalItem:r,openModal:o,setModalItem:i}}(d),T=S.dismissModal,N=S.modalItem,R=S.openModal,P=function(e,t){var n=Object(a.useState)(null),r=Object(h.a)(n,2),i=r[0],c=r[1],o=Object(a.useCallback)(function(){c(null)},[]);return{contextMenuProps:i,onItemContextMenu:Object(a.useCallback)(function(n,a,r){return!n||!r||(c({ev:r,item:n,onDismiss:o,onEditClick:e,showCloseButton:t}),!1)},[o,t,e])}}(S.setModalItem,o),M=P.contextMenuProps,U=P.onItemContextMenu,W=function(e){var t=e.openModal,n=e.showCloseButton,i=e.sortFields,c=Object(a.useCallback)(function(e,t,n){return e.subject[n.key]},[]),o=Object(a.useCallback)(function(e){return e.subject.children.order.length.toLocaleString()},[]),l=Object(a.useCallback)(function(e,t,n){var a=e.subject[n.key];return a?a.toLocaleString():""},[]),s=Object(a.useCallback)(function(e){return r.a.createElement(St,{item:e,openModal:t,showCloseButton:n})},[t,n]),d={children:{isResizable:!0,key:"children",minWidth:100,name:"# Children",onRender:o},completed:{isResizable:!0,key:"completed",minWidth:150,name:"Completed",onRender:l},created:{isResizable:!0,key:"created",minWidth:150,name:"Date created",onRender:l},description:{isResizable:!0,key:"description",minWidth:100,name:"Description",onRender:c},dueDate:{isResizable:!0,key:"dueDate",minWidth:150,name:"Due date",onRender:l},name:{isResizable:!0,key:"name",minWidth:100,name:"Name",onRender:c}},u=[],m=!0,b=!1,p=void 0;try{for(var f,h=i[Symbol.iterator]();!(m=(f=h.next()).done);m=!0){var v=f.value,j=d[v.key];j&&(j.isSorted=!0,j.isSortedDescending=v.desc,u.push(j))}}catch(O){b=!0,p=O}finally{try{m||null==h.return||h.return()}finally{if(b)throw p}}return u.push({key:"itemButtons",minWidth:80,name:"",onRender:s}),u}({openModal:R,showCloseButton:o,sortFields:E}),z=function(e){var t=e.componentOrder,n=e.currentOrder,r=e.parentId,i=e.setCurrentOrder,c=e.subjects,o=Object(a.useRef)(null);return Object(a.useEffect)(function(){if(o.current&&n!==t&&t.length>0){var e=At(n,t),a=c.dict[t[e]];(0===a.parents.size||a.parents.has(r))&&o.current.focusIndex(e),i(t)}},[t,r,n,c,i]),o}({componentOrder:f,currentOrder:v,parentId:s,setCurrentOrder:O,subjects:d}),F="calc(100vh - ".concat(j+_+(i.path===b.view?y:0),"px)"),V=kt({match:i,subjectId:s});return r.a.createElement(lt,{commandBar:r.a.createElement(J,{items:V}),main:r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{styles:{root:{height:F}},getKey:k,componentRef:z,onColumnHeaderClick:g,columns:W,items:p,isHeaderVisible:!0,selectionMode:L.b.none,onItemInvoked:x,onItemContextMenu:U,columnReorderOptions:{frozenColumnCountFromEnd:1,frozenColumnCountFromStart:0,handleColumnReorder:I}}),M&&r.a.createElement(oe,M),r.a.createElement(nt,{modalItem:N,dismissModal:T,showCloseButton:o})),parentId:s,title:t})}),zt=new Set(x.reduce(function(e,t){return e.push(String(t.key).toLowerCase()),e},[]));function Ft(e){var t=e.match,n=s(t),i=Object(h.a)(n,2),c=i[0],o=i[1],l=Object(D.c)(function(e){return e}),d=l.display.display,u=l.subjects,m=u.dict,b=u.searchSortOptions,p=Object(a.useCallback)(function(e){var t=e.subject;switch(c){case"childname":var n=!0,a=!1,r=void 0;try{for(var i,l=t.children.order[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(m[s].name.toLowerCase().includes(o))return!0}}catch(v){a=!0,r=v}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}return!1;case"childdescription":var d=!0,u=!1,b=void 0;try{for(var p,f=t.children.order[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;if(m[h].description.toLowerCase().includes(o))return!0}}catch(v){u=!0,b=v}finally{try{d||null==f.return||f.return()}finally{if(u)throw b}}return!1;default:return e.subject[c].toLowerCase().includes(o)}},[m,c,o]);return zt.has(c)?"list"===d?r.a.createElement(Wt,{options:{condition:p},sortOptions:b}):r.a.createElement(Pt,{options:{condition:p},sortOptions:b}):r.a.createElement(S.a,null,"Sorry that search parameter was invalid.")}var Jt=function(e,t){return{name:t,type:"SET_VIEW_NAME",viewId:e}},Vt=Object(v.c)({title:{marginTop:10,padding:10},wrapper:{display:"flex",flexDirection:"column",height:"100%",width:"100%"}});function Ht(e){var t=e.viewId,n=Object(D.c)(function(e){return e}),i=n.display.display,c=n.views,o=Object(D.b)(),l=t&&t in c.dict?c.dict[t]:{name:""},s=Object(a.useState)(l.name),d=Object(h.a)(s,2),u=d[0],m=d[1],b=Object(a.useCallback)(function(){t&&o(Jt(t,u))},[t,o,u]);Object(a.useEffect)(function(){m(l.name)},[l.name]);var p=Object(a.useCallback)(function(e){m(e.target.value)},[]),f={viewId:t},v=r.a.createElement(Ge,{className:Vt.title,value:u,onChange:p,onBlur:b}),j="grid"===i?r.a.createElement(Pt,{options:f,showCloseButton:!0,title:v}):r.a.createElement(Wt,{options:f,showCloseButton:!0,title:v});return r.a.createElement("div",{className:Vt.wrapper},j)}function Gt(e){var t=e.match,n=e.location,a=Object(D.c)(function(e){return e}).views,i=t.params.viewId;return!Object(X.isUndefined)(i)&&i in a.dict?r.a.createElement(Ht,{viewId:i,location:n}):r.a.createElement(f.a,{to:b.base})}var Yt=n(180),Kt=n(192),qt=function(){return{type:"CREATE_VIEW",viewId:Object(Ie.v4)()}};var Qt=Object(E.w)(),$t=Object(E.z)({navWrapper:{borderRight:"1px solid "+Qt.palette.neutralQuaternary,display:"flex",flexDirection:"column"},nav:{background:Qt.palette.white,boxSizing:"border-box",height:"100%",overflowY:"auto",width:208}});function Xt(e){var t=e.match,n=e.history,i=Object(D.b)(),c=Object(a.useState)(!1),o=Object(h.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(""),p=Object(h.a)(u,2),f=p[0],v=p[1],j=Object(D.c)(function(e){return e}).views;Object(a.useEffect)(function(){if(t.url===d)v("allSubjects");else if(t.path===b.view){var e=t.params.viewId;e&&e in j.dict?v(e):n.push(b.base)}else v("")},[t,n,j.dict]);var O=Object(a.useCallback)(function(){i(qt()),s(!0)},[i]);Object(a.useEffect)(function(){l&&(s(!1),n.push(m(j.order[j.order.length-1])))},[l,n,j]);var y={isExpanded:!0,key:"views",links:[],name:"Views",url:""},C=!0,E=!1,w=void 0;try{for(var g,k=j.order[Symbol.iterator]();!(C=(g=k.next()).done);C=!0){var x=g.value,I=j.dict[x];y.links.push({key:x,name:I.name,url:"#"+m(x)})}}catch(N){E=!0,w=N}finally{try{C||null==k.return||k.return()}finally{if(E)throw w}}var S=[{links:[{key:"allSubjects",name:"All subjects",url:"#"+d}]}];y.links.length>0&&S[0].links.push(y),S[0].links.push({icon:"Add",key:"createView",name:"Create view",onClick:O,url:""});var T=function(e){var t=e.parentId,n=e.viewId,r=Object(D.b)(),i=Object(a.useCallback)(function(){r(Se({parentId:t,viewId:n}))},[r,t,n]);return[{iconProps:{iconName:t||n?"ChildOf":"Add"},key:"createSubject",onClick:i,text:t||n?"Create child subject":"Create subject"}]}(t.params);return r.a.createElement("div",{className:$t.navWrapper},r.a.createElement(Yt.a,{items:T,styles:{root:z}}),r.a.createElement(Kt.a,{selectedKey:f,expandButtonAriaLabel:"Expand or collapse",className:$t.nav,groups:S,styles:{navItems:{margin:0}}}))}var Zt=Object(v.c)({main:{display:"flex",flexDirection:"column",overflowY:"auto",width:"100%"},wrapper:{display:"flex",flexDirection:"row",height:"calc(100vh - ".concat(j,"px)")}}),en=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{path:p,component:R}),r.a.createElement("div",{className:Zt.wrapper},r.a.createElement(f.b,{path:p,component:Xt}),r.a.createElement("div",{className:Zt.main},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:b.subject,component:Ut}),r.a.createElement(f.b,{path:b.search,component:Ft}),r.a.createElement(f.b,{path:b.view,component:Gt}),r.a.createElement(f.a,{to:d})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tn=n(34),nn=n(107),an=n(111),rn=n(47),cn=n(108),on=n.n(cn),ln=n(109),sn=n(42),dn=function(e,t){return Object(A.a)({},Object(sn.a)(e,function(e){switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var n=t.subjectId,a=t.name;e.subjects.dict[n].name=a,ee(e.subjects.dict,n),te(e,n)}(e,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var n=t.subjectId,a=t.description;e.subjects.dict[n].description=a,ee(e.subjects.dict,n),te(e,n)}(e,t);break;case"COMPLETE_SUBJECT":ae(e,t);break;case"UNCOMPLETE_SUBJECT":!function(e,t){var n=t.subjectId;e.subjects.dict[n].completed=void 0,ee(e.subjects.dict,n),te(e,n)}(e,t);break;case"DELETE_SUBJECT":!function(e,t){var n=t.subjectId,a=e.subjects,r=e.views;function i(e){Object(X.remove)(e,function(e){return e===n})}var c=a.dict[n],o=!0,l=!1,s=void 0;try{for(var d,u=c.parents[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;i(a.dict[m].children.order)}}catch(k){l=!0,s=k}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}var b=!0,p=!1,f=void 0;try{for(var h,v=c.children.order[Symbol.iterator]();!(b=(h=v.next()).done);b=!0){var j=h.value;a.dict[j].parents.delete(n)}}catch(k){p=!0,f=k}finally{try{b||null==v.return||v.return()}finally{if(p)throw f}}i(a.order.order);var O=!0,y=!1,C=void 0;try{for(var E,w=c.views[Symbol.iterator]();!(O=(E=w.next()).done);O=!0){var g=E.value;i(r.dict[g].children.order)}}catch(k){y=!0,C=k}finally{try{O||null==w.return||w.return()}finally{if(y)throw C}}ee(a.dict,n),te(e,n),delete a.dict[n]}(e,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var n=t.subjectId,a=t.date;e.subjects.dict[n].dueDate=a,ee(e.subjects.dict,n),te(e,n)}(e,t);break;case"CREATE_SUBJECT":!function(e,t){var n=t.subjectType,a=t.parentId,r=t.subjectId,i=t.viewId,c={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},created:new Date,description:"",name:"Untitled",parents:new Set,type:n||"BaseSubject",views:new Set};e.subjects.dict[r]=c,void 0!==a&&je(e,ve(a,r)),void 0!==i&&xe(e,ke(i,r)),e.subjects.order.order.push(r)}(e,t);break;case"REMOVE_CHILD_SUBJECT_FROM_SUBJECT_REDUCER":!function(e,t){var n=t.subjectId,a=t.parent,r=e.subjects;Object(X.remove)(r.dict[a].children.order,function(e){return e===n}),r.dict[n].parents.delete(a),ee(r.dict,n),te(e,n)}(e,t);break;case"APPEND_CHILD_SUBJECT_TO_SUBJECT":je(e,t)}return e}))},un=function(){return{dict:{},order:[],orderSet:new Set}},mn=function(e,t){return Object(A.a)({},Object(sn.a)(e,function(n){switch(e.views.dict||(e.views=un()),t.type){case"CREATE_VIEW":!function(e,t){var n=t.viewId,a=function(e){for(var t=1,n="Untitled".concat(t);e.has(n);)n="Untitled".concat(++t);return n}(e.views.orderSet);e.views.dict[n]={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},name:a},e.views.order.push(n),e.views.orderSet.add(a)}(n,t);break;case"SET_VIEW_NAME":!function(e,t){var n=e.views,a=t.name,r=t.viewId;if(!n.orderSet.has(a)){var i=n.dict[r];n.orderSet.delete(i.name),i.name=a}}(n,t);break;case"APPEND_SUBJECT_TO_VIEW":xe(n,t);break;case"REMOVE_SUBJECT_FROM_VIEW":!function(e,t){var n=t.subjectId,a=t.viewId,r=e.views.dict[a];Object(X.remove)(r.children.order,function(e){return e===n}),te(e,n)}(n,t)}return n}))},bn=function(e,t){return Object(A.a)({},Object(sn.a)(e,function(e){switch(t.type){case"SET_FIELDS_ARRAY":ht(e,t);break;case"SET_FIELDS_DESC":jt(e,t);break;case"SET_SEPARATE_COMPLETE":wt(e,t)}var n=e.subjects;return n.order.order.length>0&&(n.order.order=Z(n.dict,n.order)),e}))},pn=function(e,t){return Object(A.a)({},Object(sn.a)(e,function(e){switch(t.type){case"SET_DISPLAY_ACTION":!function(e,t){var n=e.display,a=t.display;n.display=a}(e,t)}return e}))},fn=Object(ln.a)(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{display:{display:"grid"},subjects:{dict:{},order:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},searchSortOptions:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}},views:un()}},dn,mn,bn,pn),hn=n(110),vn=Object(rn.a)(function(e,t){for(var n=e.dict,a=Object(Dt.a)(e,["dict"]),r={},i=0,c=Object.entries(n);i<c.length;i++){var o=c[i],l=Object(h.a)(o,2),s=l[0],d=l[1];r[s]=Object(A.a)({},d,{parents:Object(V.a)(d.parents),views:Object(V.a)(d.views)})}return Object(A.a)({dict:r},a)},function(e,t){for(var n=e.dict,a=Object(Dt.a)(e,["dict"]),r={},i=0,c=Object.entries(n);i<c.length;i++){var o=c[i],l=Object(h.a)(o,2),s=l[0],d=l[1],u=d.created,m=d.completed,b=d.dueDate,p=d.parents,f=d.views,v=Object(Dt.a)(d,["created","completed","dueDate","parents","views"]),j=m?new Date(m):void 0,O=b?new Date(b):void 0;r[s]=Object(A.a)({},v,{completed:j,created:new Date(u),dueDate:O,parents:new Set(p),views:new Set(f)})}return Object(A.a)({dict:r},a)},{whitelist:["subjects"]}),jn=Object(rn.a)(function(e,t){e.orderSet;return Object(Dt.a)(e,["orderSet"])},function(e,t){var n=new Set,a=!0,r=!1,i=void 0;try{for(var c,o=e.order[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var l=c.value;n.add(e.dict[l].name)}}catch(s){r=!0,i=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return Object(A.a)({},e,{orderSet:n})},{whitelist:["views"]}),On={key:"root",storage:on.a,transforms:[vn,jn]},yn=Object(rn.b)(On,fn),Cn=Object(tn.createStore)(yn,Object(nn.composeWithDevTools)()),En=Object(rn.c)(Cn);Object(an.a)(),c.a.render(r.a.createElement(D.a,{store:Cn},r.a.createElement(hn.a,{loading:null,persistor:En},r.a.createElement(C.a,null,r.a.createElement(en,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,1,2]]]);
//# sourceMappingURL=main.58e220e3.chunk.js.map