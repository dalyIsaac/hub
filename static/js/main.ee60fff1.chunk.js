(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,n){e.exports=n(151)},151:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),c=n.n(i),o="/search",l=function(e,t){return"".concat(o,"/").concat(e,"/").concat(t)},s=function(e){try{return[e.params.param.toLowerCase(),e.params.query.toLowerCase()]}catch(t){throw Error("This isn't a search path.")}},d=n(66),u=n.n(d),m="/subjects",b=function(e,t){var n=t||"";return"".concat(m,"/").concat(n,"?").concat(u.a.stringify({display:e}))},p=function(e){return"".concat("/views","/").concat(e)},f={base:"/",search:o+"/:param/:query",subject:m+"/:parentId?",view:"/views/:viewId"},h=[f.search,f.subject,f.view,f.base],v=n(11),j=n(8),O=n(3),y=48,C=115,E=71,g=n(31),w=n(21),k=n(195),x=n(205),I=Object(w.z)({search:{display:"flex",flexDirection:"row"},searchBox:{flexGrow:1},searchDropdown:{width:150}}),S=[{key:"name",text:"Name"},{key:"description",text:"Description"},{key:"childname",text:"Child name"},{key:"childdescription",text:"Child description"}];function D(e){var t=e.history,n=e.match,i=Object(a.useState)("name"),c=Object(j.a)(i,2),o=c[0],d=c[1],u=Object(a.useState)(""),m=Object(j.a)(u,2),b=m[0],p=m[1];Object(a.useEffect)(function(){try{var e=s(n),t=Object(j.a)(e,2),a=t[0],r=t[1];d(a),p(r)}catch(i){d("name"),p("")}},[n]);var f=Object(a.useCallback)(function(e,t){var n=t?t.key:void 0;"string"===typeof n&&d(n)},[]),h=Object(a.useCallback)(function(e){t.push(l(o,e))},[t,o]);return r.a.createElement("div",{className:I.search},r.a.createElement(k.a,{options:S,selectedKey:o,className:I.searchDropdown,onChange:f}),r.a.createElement(x.a,{className:I.searchBox,value:b,placeholder:"Search",onSearch:h}))}var R=n(203),N=n(105),T=function(e){var t=u.a.parse(e.search),n=Object(N.isUndefined)(t.display)||Array.isArray(t.display)?"grid":t.display;return"list"===n?n:"grid"},B=n(4),L=Object(O.b)(),_=Object(O.c)({appBar:{alignItems:"center",backgroundColor:L.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",display:"grid",gridTemplateColumns:"150px minmax(200px, auto) 150px",height:y},link:{color:L.palette.black,textDecoration:"none",selectors:{"&:hover":{color:L.palette.neutralLighter,textDecoration:"none"}}},searchDropdown:{width:150},title:{paddingLeft:24}});function P(e){var t=T(e.location),n=e.match,i=n.params,c=i.parentId,l=i.viewId,d=n.path===f.subject||n.path===m,u=n.path===f.search||n.path===o,p=n.path===f.view&&l,h=Object(B.c)(function(e){return e}),v=h.subjects,O=h.views;return Object(a.useEffect)(function(){var e=null,t=null;if(d)e="subjects",c&&(t=v.dict[c].name);else if(u){var a=s(n),r=Object(j.a)(a,2);e="search/"+r[0],t=r[1]}else p&&l&&(e="views",t=O.dict[l].name);document.title=e?t?"hub/".concat(e,": ").concat(t):"hub/".concat(e):"hub"},[d,c,v.dict,u,n,p,l,O.dict]),r.a.createElement("div",{className:_.appBar},r.a.createElement(g.b,{to:b(t),className:_.link},r.a.createElement(R.a,{className:_.title,variant:"xLarge"},"hub")),r.a.createElement(D,e),r.a.createElement("div",null))}var M=n(190),U=n(29),A=45,W=44,z=n(9),F=n(212),J=Object(w.w)(),V={borderBottom:"1px solid "+J.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",height:W,margin:0,padding:0,zIndex:10},H=Object(w.z)({leftWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},rightWrapper:{alignItems:"center",display:"flex",flexDirection:"row-reverse"},wrapper:Object(z.a)({},V,{alignItems:"center",backgroundColor:J.palette.white,display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:24,paddingRight:24,position:"relative"})}),G=Object(v.g)(function(e){var t=e.items,n=e.farItems,i=e.location,c=e.history,o=T(i),l=Object(a.useCallback)(function(){c.push(function(e,t){return"".concat(e.pathname,"?display=").concat(t)}(i,"grid"===o?"list":"grid"))},[o,c,i]);return r.a.createElement("div",{className:H.wrapper},r.a.createElement("div",{className:H.leftWrapper},t),r.a.createElement("div",{className:H.rightWrapper},n,r.a.createElement(F.a,{key:"toggleView",ariaLabel:"Toggle view",iconProps:{iconName:"list"===o?"BulletedListText":"GridViewMedium"},text:"list"===o?"List":"Grid",styles:{root:{background:J.palette.white,height:W}},menuProps:{directionalHintFixed:!0,items:["list"===o?{iconProps:{iconName:"GridViewMedium"},key:"gridButton",onClick:l,text:"Grid"}:{iconProps:{iconName:"BulletedListText"},key:"listButton",onClick:l,text:"List"}]}})))}),K=n(36),Y=n(192),q=n(10),Q={iconProps:{iconName:"Completed"},key:"complete-1-level",text:"Mark as complete"},$={iconProps:{iconName:"CompletedSolid"},key:"complete-2-level",text:"Mark this and its children as complete"},X={iconProps:{iconName:"Blocked2"},key:"uncomplete",text:"Mark as incomplete"},Z={iconProps:{iconName:"Remove"},key:"remove",text:"Remove this as a child"},ee={iconProps:{iconName:"Delete"},key:"delete",text:"Delete this"},te=n(12);function ne(e,t){var n=t.order,a=t.options,r=a.fields,i=a.separateCompletedItems,c=[],o=[],l=!0,s=!1,d=void 0;try{for(var u,m=n[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;e[b].completed&&i?o.push(b):c.push(b)}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}var p=function(e,t){function n(e,t,n,a){a?Array.isArray(e)&&Array.isArray(t)||"string"===typeof e&&"string"===typeof t?(e=e.length,t=t.length):e instanceof Set&&t instanceof Set&&(e=e.size,t=t.size):"string"===typeof e&&"string"===typeof t&&(e=e.toLowerCase(),t=t.toLowerCase());var r=!Object(te.isUndefined)(e),i=!Object(te.isUndefined)(t),c=n?-1:1;return r||i?r&&!i?1*c:!r&&i?-1*c:e<t?-1*c:e>t?1*c:0:0}return function(a,r){var i=!0,c=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var d=l.value,u=d.key,m=d.desc,b=d.compareLength,p=t[a][u],h=t[r][u];"children"===u&&(p=p.order,h=h.order);var v=n(p,h,m,b);if(0!==v)return v}}catch(f){c=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(c)throw o}}return 0}}(r,e);return c.sort(p),o.sort(p),c.concat(o)}function ae(e,t){if(t in e){var n=!0,a=!1,r=void 0;try{for(var i,c=e[t].parents[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=e[i.value].children;o.order=ne(e,o)}}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}}}function re(e,t){var n=e.views,a=e.subjects.dict;if(t in a){var r=!0,i=!1,c=void 0;try{for(var o,l=a[t].views[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,d=n.dict[s].children;d.order=ne(a,d)}}catch(u){i=!0,c=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw c}}}}var ie=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},ce=function(e,t){!function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,i=t.subjects.dict;if(void 0===i[n].completed&&(i[n].completed=r,ae(i,n),re(t,n),a>1)){var c=!0,o=!1,l=void 0;try{for(var s,d=i[n].children.order[Symbol.iterator]();!(c=(s=d.next()).done);c=!0)e(t,s.value,a-1,r)}catch(u){o=!0,l=u}finally{try{c||null==d.return||d.return()}finally{if(o)throw l}}}}(e,t.subjectId,t.level)},oe=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},le=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},se=function(e,t){return{subjectId:t,type:"REMOVE_SUBJECT_FROM_VIEW",viewId:e}};function de(e){var t=e.item,n=e.showCloseButton,i=e.ev,c=e.onDismiss,o=e.onEditClick,l=Object(B.b)(),s=t.id,d=t.viewId,u=Object(a.useCallback)(function(e,t,n){l(!0===t?ie(s,n):oe(s))},[l,s]),m=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,1)},[u]),b=Object(a.useCallback)(function(e,t){t&&u(e,!t.checked,2)},[u]),p=Object(a.useCallback)(function(e,t){t&&u(e,!1)},[u]),f=Object(a.useCallback)(function(){l(le(s))},[l,s]),h=Object(a.useCallback)(function(){o(t)},[t,o]),v=Object(a.useCallback)(function(){d&&s&&l(se(d,s))},[l,s,d]),j=[Object(z.a)({},Q,{onClick:m}),Object(z.a)({},$,{onClick:b})],O=[Object(z.a)({},X,{onClick:p})],y=[{iconProps:{iconName:"Edit"},key:"edit",onClick:h,text:"Edit"}].concat(Object(K.a)(t.subject.completed?O:j),[{iconProps:{iconName:"Delete"},key:"delete",onClick:f,text:"Delete this"}]);return n&&y.push({iconProps:{iconName:"Cancel"},key:"removeChildView",onClick:v,text:"Remove this subject from this view"}),r.a.createElement(Y.a,{items:y,target:i.target,directionalHint:q.a.bottomCenter,isBeakVisible:!1,onDismiss:c})}var ue=n(199),me=n(196),be=n(201),pe=n(207),fe=n(198),he=Object(w.w)(),ve="1px solid "+he.palette.neutralTertiary,je=Object(w.z)({wrapper:{border:ve,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",gridTemplateRows:"auto auto",marginBottom:2},checkboxWrapper:{alignItems:"center",display:"flex",flexDirection:"row"},checkbox:{margin:8},divider:{background:he.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},button:{gridColumn:"3"},content:{gridColumn:"1 / 3",gridRow:"2",paddingLeft:8,paddingRight:8}});function Oe(e){var t=e.button,n=e.checked,i=e.children,c=e.contextMenuItems,o=e.editable,l=e.key,s=e.label,d=e.onCheckboxChange,u=e.onEditableBlur,m=Object(a.useRef)(null),b=Object(a.useState)(s),p=Object(j.a)(b,2),f=p[0],h=p[1],v=Object(a.useState)(!1),O=Object(j.a)(v,2),y=O[0],C=O[1];Object(a.useEffect)(function(){h(s)},[s]);var E=Object(a.useCallback)(function(e){e.preventDefault(),C(!y)},[y]),g=Object(a.useCallback)(function(e,t){h(t||"")},[]),w=Object(a.useCallback)(function(){if(u){var e=f||"Untitled";u(e),h(e)}},[f,u]);return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:E,ref:m,key:l},r.a.createElement("div",{className:je.wrapper},r.a.createElement("div",{className:je.checkboxWrapper},r.a.createElement(pe.a,{checked:n,label:o?void 0:s,className:je.checkbox,onChange:d}),o?r.a.createElement(fe.a,{value:f,borderless:!0,onChange:u?g:void 0,onBlur:w}):null),r.a.createElement("div",{className:je.content},i),t?r.a.createElement("span",{className:je.divider}):null,r.a.createElement("div",{className:je.button},t||null)),r.a.createElement(Y.a,{hidden:!(c&&y),isBeakVisible:!1,onDismiss:E,target:m,directionalHint:q.a.bottomRightEdge,items:c}))}var ye=function(e,t){return{child:t,subjectId:e,type:"APPEND_CHILD_SUBJECT_TO_SUBJECT"}},Ce=function(e,t){var n=t.subjectId,a=t.child,r=e.subjects,i=r.dict[n].children;i.order.push(a),i.order=ne(r.dict,i),r.dict[a].parents.add(n),re(e,n)};function Ee(e){var t=e.id,n=e.parent,i=e.subject,c=Object(B.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&c(ye(n,t))},[c,t,n]);return r.a.createElement(Oe,{checked:!1,label:i.name,onCheckboxChange:o})}function ge(e){if(e&&!Object(te.isUndefined)(e.parent))return r.a.createElement(Ee,e)}var we=n(188);function ke(e,t,n){var a=[],r=n?n.parentId:void 0,i=n?n.viewId:void 0,c=!0,o=!1,l=void 0;try{for(var s,d=t[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var u=s.value,m={id:u,parent:r,subject:e[u],viewId:i};(Object(te.isUndefined)(n)||Object(te.isUndefined)(n.condition)||n.condition(m))&&a.push(m)}}catch(b){o=!0,l=b}finally{try{c||null==d.return||d.return()}finally{if(o)throw l}}return a}var xe=Object(O.c)({list:{overflow:"auto"}});function Ie(e){var t=e.order,n=e.parentId,i=e.maxHeight,c=e.onRenderCell,o=e.illegalIds,l=e.notifyNoChildren,s=e.viewId,d=Object(B.c)(function(e){return e}).subjects,u=Object(a.useCallback)(function(e){return!!o&&!o.has(e.id)},[o]),m={condition:o?u:void 0,parentId:n,viewId:s},b=ke(d.dict,t,m);return r.a.createElement("div",{className:xe.list,style:{maxHeight:i}},0===b.length&&l?r.a.createElement(R.a,null,"There's nothing here",r.a.createElement("span",{role:"img","aria-label":"Gust of Wind emoji"},"\ud83d\udca8")):r.a.createElement(we.a,{items:b,onRenderCell:c}))}var Se=function(e,t){return{subjectId:t,type:"APPEND_SUBJECT_TO_VIEW",viewId:e}},De=function(e,t){var n=t.subjectId,a=t.viewId,r=e.subjects,i=e.views,c=i.dict[a].children;c.order.push(n),i.dict[a].children.order=ne(r.dict,c),r.dict[n].views.add(a),re(e,n)},Re=n(71),Ne=function(e){return Object(z.a)({subjectId:Object(Re.v4)(),type:"CREATE_SUBJECT"},e)},Te=32,Be=Object(w.w)(),Le=Object(w.z)({wrapper:{border:ve,borderRadius:2,display:"grid",gridTemplateColumns:"auto 1px 32px",marginBottom:1,marginTop:1},button:{alignItems:"center",background:Be.palette.white,border:"none",cursor:"pointer",display:"flex",flexDirection:"row",height:Te,outline:"none",padding:0,selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:focus":{outline:"1px solid "+Be.palette.themePrimary},"&:hover":{filter:"brightness(90%)",outline:"none"}}},divider:{background:Be.palette.neutralTertiary,gridColumn:"2",marginBottom:8,marginTop:8,width:1},icon:{fontSize:12,margin:8,paddingLeft:4,textAlign:"center"},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),_e=function(e){var t=e.parent,n=Object(a.useRef)(null),i=Object(B.b)(),c=Object(a.useState)(!1),o=Object(j.a)(c,2),l=o[0],s=o[1],d=Object(a.useState)(!1),u=Object(j.a)(d,2),m=u[0],b=u[1],p=Object(a.useCallback)(function(){return s(!1)},[]),f=Object(a.useCallback)(function(){return s(!0)},[]),h=Object(a.useCallback)(function(){return b(!m)},[m]),v=Object(a.useCallback)(function(){return b(!1)},[]),O=Object(a.useCallback)(function(){i(Ne({parentId:t}))},[i,t]),y=Object(B.c)(function(e){return e}).subjects,E=[{iconProps:{iconName:"RowsChild"},key:"appendChildren",onClick:f,text:"Append child subjects"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Le.wrapper},r.a.createElement("button",{className:Le.button,style:{gridColumn:1},onClick:O},r.a.createElement(me.a,{iconName:"Add",className:Le.icon}),r.a.createElement(R.a,{className:Le.text},"Add child")),r.a.createElement("span",{className:Le.divider}),r.a.createElement("button",{className:Le.button,onClick:h,ref:n,style:{gridColumn:3}},r.a.createElement(me.a,{iconName:"ChevronDown",style:{width:"100%"}}))),r.a.createElement(be.a,{isOpen:l,isLightDismiss:!0,headerText:"Append Children",onDismiss:p},r.a.createElement(Ie,{parentId:t,illegalIds:new Set(y.dict[t].children.order.concat(t)),order:y.order.order,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(C,")"),onRenderCell:ge})),r.a.createElement(Y.a,{hidden:!m,isBeakVisible:!1,onDismiss:v,target:n,directionalHint:q.a.bottomRightEdge,items:E}))},Pe=n(204),Me=n(200),Ue=n(211),Ae=n(206),We=n(193),ze=function(e,t){return{parent:t,subjectId:e,type:"REMOVE_CHILD_SUBJECT_FROM_SUBJECT_REDUCER"}},Fe=function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}},Je=Object(O.c)({open:{height:40,width:"100%"}});function Ve(e){var t=e.id,n=e.parent,i=e.subject,c=Object(B.b)(),o=Object(a.useCallback)(function(e,n,a){c(!0===n?ie(t,a):oe(t))},[c,t]),l=Object(a.useCallback)(function(e){c(Fe(t,e||"Untitled"))},[c,t]),s=Object(a.useCallback)(function(e,t){t&&o(e,!0,1)},[o]),d=Object(a.useCallback)(function(e,t){t&&o(e,!0,2)},[o]),u=Object(a.useCallback)(function(e,t){t&&o(e,!1)},[o]),m=Object(a.useCallback)(function(){c(ze(t,n))},[c,t,n]),p=Object(a.useCallback)(function(){c(le(t))},[c,t]),f=[Object(z.a)({},Q,{onClick:s}),Object(z.a)({},$,{onClick:d})],h=[Object(z.a)({},X,{onClick:u})],v=[].concat(Object(K.a)(i.completed?h:f),[Object(z.a)({},Z,{onClick:m}),Object(z.a)({},ee,{onClick:p})]),j="Open "+i.name,O=r.a.createElement(g.b,{to:b("grid",t),tabIndex:-1},r.a.createElement(Ue.a,{className:Je.open,iconProps:{iconName:"OpenFile"},ariaLabel:j,title:j}));return r.a.createElement(Oe,{editable:!0,onEditableBlur:l,checked:!!i.completed,label:i.name,onCheckboxChange:o,contextMenuItems:v,button:O})}function He(e){if(e&&!Object(te.isUndefined)(e.parent))return r.a.createElement(Ve,Object.assign({},e,{key:e.id}))}var Ge=n(109),Ke=Object(O.b)(),Ye=Object(O.c)({title:{border:"1px solid transparent",borderRadius:0,fontSize:Ge.a.size28,height:32,outline:"none",paddingBottom:4,textAlign:"center",width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+Ke.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+Ke.palette.neutralTertiary,outline:"none"}}}});function qe(e){var t=e.value,n=e.className,a=e.onBlur,i=e.onChange,c=e.textAlign,o=void 0===c?"left":c;return r.a.createElement("div",{className:n},r.a.createElement("input",{className:Ye.title,onChange:i,onBlur:a,value:t,style:{textAlign:o}}))}var Qe=function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}},$e=function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}},Xe=Object(O.b)(),Ze="1px solid "+Xe.palette.neutralTertiary,et="1px solid "+Xe.palette.themePrimary,tt=Object(O.c)({headerWrapper:{borderTopLeftRadius:4,borderTopRightRadius:4,display:"grid",gridTemplateColumns:"32px auto 32px"},header:{alignItems:"center",borderTopLeftRadius:4,borderTopRightRadius:4,color:Xe.palette.neutralLight,display:"flex",flexDirection:"column",gridColumn:"2",gridRow:"1",margin:-1,padding:5,zIndex:1},headerOpenButton:{background:Xe.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,margin:0,marginTop:0,outline:"none",zIndex:2,selectors:{"&:focus":{border:et,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderTopRightRadius:4,outline:"none"}}},headerCloseButton:{background:Xe.palette.white,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,margin:0,outline:"none",zIndex:2,selectors:{"&:active":{backgroundColor:Xe.palette.red,color:Xe.palette.white,filter:"brightness(80%)",outline:"none"},"&:focus":{border:et,borderBottomLeftRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:4,borderTopRightRadius:0,outline:"none"},"&:hover":{backgroundColor:Xe.palette.red,color:Xe.palette.white}}},headerLink:{gridColumn:"3",gridRow:"1",outline:"none"},body:{padding:10},title:{alignItems:"center",display:"flex",flexDirection:"column",paddingBottom:5,paddingTop:10},description:{paddingBottom:10,paddingTop:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:Xe.palette.white,border:Ze,width:"100%"},heroButton:{alignItems:"center",display:"flex",flexDirection:"column",marginTop:10}});function nt(e){var t=e.item,n=t.subject,i=t.id,c=t.viewId,o=e.listHeight,l=e.showOpenButton,s=e.showCloseButton,d=Object(B.b)(),u=Object(a.useState)(n.name),m=Object(j.a)(u,2),p=m[0],f=m[1],h=Object(a.useState)(n.description),v=Object(j.a)(h,2),O=v[0],y=v[1],C=Object(B.c)(function(e){return e}).subjects;Object(a.useEffect)(function(){f(n.name)},[n.name]),Object(a.useEffect)(function(){y(n.description)},[n.description]);var E,w,k,x,I,S=Object(a.useCallback)(function(e){f(e.target.value)},[]),D=Object(a.useCallback)(function(){var e=p||"Untitled";n.name!==e&&d(Fe(i,e)),f(e)},[d,i,p,n.name]),N=Object(a.useCallback)(function(e,t){y(t||"")},[]),T=Object(a.useCallback)(function(){n.description!==O&&d(Qe(i,O))},[d,i,O,n.description]),L=Object(a.useCallback)(function(e){d($e(i,e||void 0))},[d,i]),_=Object(a.useCallback)(function(){d(ie(i,1))},[d,i]),P=Object(a.useCallback)(function(){d(oe(i))},[d,i]),M=Object(a.useCallback)(function(){return L()},[L]),U=Object(a.useCallback)(function(){d(ie(i,2))},[d,i]),A=Object(a.useCallback)(function(){d(le(i))},[d,i]),W=Object(a.useCallback)(function(){c&&i&&d(se(c,i))},[d,i,c]),F=Object(z.a)({},$,{onClick:U}),J=Object(z.a)({},ee,{onClick:A}),V=n.dueDate?(E=new Date,w=n.dueDate,Math.ceil((w.valueOf()-E.valueOf())/864e5)):"\u221e";n.completed?(I=Xe.palette.red,k="Completed "+n.completed.toLocaleDateString(),x=r.a.createElement(Pe.a,Object.assign({},X,{split:!0,onClick:P,menuProps:{directionalHint:q.a.bottomCenter,isBeakVisible:!1,items:[J]},style:{background:Xe.palette.white}}))):(I=Xe.palette.green,k="Created "+n.created.toLocaleDateString(),x=r.a.createElement(Pe.a,Object.assign({primary:!0},Q,{split:!0,onClick:_,menuProps:{directionalHint:q.a.bottomCenter,isBeakVisible:!1,items:[F,J]}})));var H=r.a.createElement(R.a,{className:tt.header,tabIndex:-1},k),G="Open "+n.name,K="Close "+n.name;return r.a.createElement(Me.a,{verticalAlign:"center"},r.a.createElement("div",{className:tt.headerWrapper,style:{backgroundColor:I}},s?r.a.createElement(Ue.a,{styles:{root:{width:""}},className:tt.headerCloseButton,iconProps:{iconName:"Cancel"},title:K,ariaLabel:K,onClick:W}):null,H,l?r.a.createElement(g.b,{to:b("grid",i),className:tt.headerLink,tabIndex:-1},r.a.createElement(Ue.a,{styles:{root:{width:""}},className:tt.headerOpenButton,iconProps:{iconName:"OpenFile"},title:G,ariaLabel:G})):null),r.a.createElement("div",{className:tt.body},r.a.createElement(qe,{textAlign:"center",className:tt.title,value:p,onChange:S,onBlur:D}),r.a.createElement(fe.a,{resizable:!1,multiline:!0,rows:3,value:O,onChange:N,onBlur:T,className:tt.description,styles:{field:{height:63}}}),r.a.createElement("div",{className:tt.date},r.a.createElement(Ae.a,null,"Due date:"),r.a.createElement("div",{className:tt.datePicker},r.a.createElement(We.a,{disableAutoFocus:!0,value:n.dueDate,onSelectDate:L}),n.dueDate?r.a.createElement(Ue.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:M}):null)),r.a.createElement("div",{className:tt.daysLeft},r.a.createElement(Ae.a,null,"".concat(V," ").concat(1===V?"day":"days"," left"))),r.a.createElement("div",{style:{minHeight:"calc((".concat(o,") + ").concat(Te,"px)")}},r.a.createElement(Ie,{parentId:i,order:C.dict[i].children.order,maxHeight:"calc(".concat(o,")"),onRenderCell:He}),r.a.createElement(_e,{parent:i})),r.a.createElement("div",{className:tt.heroButton},x)))}var at=Object(w.w)(),rt=Object(w.z)({subjectWrapper:{backgroundColor:at.palette.white,border:"1px solid "+at.palette.neutralTertiary,borderRadius:4}});function it(e){var t=e.modalItem,n=e.dismissModal,a=e.showCloseButton;return r.a.createElement(ue.a,{isOpen:!!t,onDismiss:n,styles:{main:{backgroundColor:"none",border:"1px solid transparent",borderRadius:4}}},r.a.createElement("div",{className:rt.subjectWrapper},t?r.a.createElement(nt,{showCloseButton:a,item:t,showOpenButton:!0}):null))}var ct=n(110),ot=n.n(ct),lt=400,st=Object(w.w)(),dt=Object(w.z)({content:{alignItems:"stretch",display:"flex",flexDirection:"row",height:"100%"},mainWrapper:{display:"flex",flexDirection:"column"},sidebar:{border:"1px solid "+st.palette.white,borderRadius:4,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",minWidth:lt,zIndex:10},wrapper:{display:"flex",flexDirection:"column"}});function ut(e){var t=e.commandBar,n=e.main,a=e.parentId,i=e.title,c=Object(B.c)(function(e){return e.subjects}).dict,o=a?r.a.createElement("div",{className:dt.sidebar},r.a.createElement(nt,{item:{id:a,subject:c[a]}})):null,l=a?"calc(100% - ".concat(lt+2,"px)"):"100%",s=ot()();return o&&s.innerWidth<2*lt?o:r.a.createElement("div",{className:dt.wrapper},t,r.a.createElement("div",{className:dt.content},r.a.createElement("div",{className:dt.mainWrapper,style:{width:l}},i,n),o))}var mt=n(208);function bt(e){var t=e.id,n=e.viewId,i=e.subject,c=Object(B.b)(),o=Object(a.useCallback)(function(e,a){!0===a&&c(Se(n,t))},[c,t,n]);return r.a.createElement(Oe,{checked:!1,label:i.name,onCheckboxChange:o})}function pt(e){if(e&&!Object(te.isUndefined)(e.viewId))return r.a.createElement(bt,e)}function ft(e){var t=e.hidePanel,n=e.isOpen,a=e.viewId,i=Object(B.c)(function(e){return e}),c=i.subjects,o=i.views;if(Object(te.isUndefined)(a)||!(a in o.dict))return r.a.createElement(v.a,{to:f.base});var l=c.order.order,s=new Set(o.dict[a].children.order);return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{isOpen:n,isLightDismiss:!0,headerText:"Append Children",onDismiss:t},r.a.createElement(Ie,{viewId:a,order:l,illegalIds:s,notifyNoChildren:!0,maxHeight:"calc(100vh-".concat(C,")"),onRenderCell:pt})))}var ht=n(189),vt=n(197),jt=function(e,t){return{fields:e,parameters:t,type:"SET_FIELDS_ARRAY"}};var Ot=function(e,t){t.parameters.viewId?function(e,t){var n=t.parameters.viewId,a=t.fields,r=e.views.dict[n].children;r.options.fields=a,r.order=ne(e.subjects.dict,r)}(e,t):function(e,t){var n=t.parameters,a=n.subjectId,r=n.setSearchOptions,i=t.fields;if((r?e.searchSortOptions:a?e.dict[a].children.options:e.order.options).fields=i,a){var c=e.dict[a].children;c.order=ne(e.dict,c)}}(e.subjects,t)},yt=function(e,t,n){return{desc:t,key:e,parameters:n,type:"SET_FIELDS_DESC"}};var Ct=function(e,t){t.parameters.viewId?function(e,t){var n=t.parameters.viewId,a=t.key,r=t.desc,i=e.views.dict[n],c=!0,o=!1,l=void 0;try{for(var s,d=i.children.options.fields[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var u=s.value;if(u.key===a)return u.desc=r,void(i.children.order=ne(e.subjects.dict,i.children))}}catch(m){o=!0,l=m}finally{try{c||null==d.return||d.return()}finally{if(o)throw l}}}(e,t):function(e,t){var n,a=t.parameters,r=a.subjectId,i=a.setSearchOptions,c=t.key,o=t.desc;n=i?e.searchSortOptions:r?e.dict[r].children.options:e.order.options;var l=!0,s=!1,d=void 0;try{for(var u,m=n.fields[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var b=u.value;if(b.key===c){if(b.desc=o,r){var p=e.dict[r].children;p.order=ne(e.dict,p)}return}}}catch(f){s=!0,d=f}finally{try{l||null==m.return||m.return()}finally{if(s)throw d}}}(e.subjects,t)},Et=Object(w.w)(),gt=Object(w.z)({dragEnterClass:{backgroundColor:Et.palette.neutralLight},gripperWrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",justifyContent:"center",width:"100%",selectors:{"&:hover":{cursor:"pointer"}}},wrapper:{alignItems:"center",display:"flex",flexDirection:"row",height:"100%",paddingLeft:2,width:"100%"}});function wt(e){var t=e.subjectId,n=e.setSearchOptions,i=e.fields,c=e.viewId,o=Object(a.useRef)(-1),l=Object(a.useRef)(null),s=Object(a.useRef)(new ht.a),d=Object(a.useRef)(null),u=Object(a.useState)(!1),m=Object(j.a)(u,2),b=m[0],p=m[1],f=Object(a.useCallback)(function(){p(!1)},[]),h=Object(a.useCallback)(function(){p(!0)},[]),v=Object(B.b)(),O=Object(a.useCallback)(function(e){var a=s.current.isIndexSelected(o.current)?s.current.getSelection():[l.current],r=i.filter(function(e){return-1===a.indexOf(e)}),d=r.indexOf(e);-1===d&&(d=0),r.splice.apply(r,[d,0].concat(Object(K.a)(a))),v(jt(r,{setSearchOptions:n,subjectId:t,viewId:c}))},[v,i,t,c,n]),y=Object(a.useCallback)(function(e,t){return!0},[]),C=Object(a.useCallback)(function(e){return!0},[]),E=Object(a.useCallback)(function(e,t){return gt.dragEnterClass},[]),g=Object(a.useCallback)(function(e,t){},[]),w=Object(a.useCallback)(function(e,t){l.current&&O(e)},[O]),k=Object(a.useCallback)(function(e,t,n,a){l.current=e,o.current=t},[]),x={canDrag:C,canDrop:y,onDragEnd:Object(a.useCallback)(function(e,t){l.current=null,o.current=-1},[]),onDragEnter:E,onDragLeave:g,onDragStart:k,onDrop:w},I=Object(a.useCallback)(function(e,a,r){v(yt(r,a,{setSearchOptions:n,subjectId:t,viewId:c}))},[v,c,t,n]),S=[{key:"gripper",minWidth:20,name:"",onRender:Object(a.useCallback)(function(){return r.a.createElement("div",{className:gt.gripperWrapper},r.a.createElement(me.a,{iconName:"GripperBarHorizontal"}))},[])},{fieldName:"name",key:"param",minWidth:150,name:"Parameter",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:gt.wrapper},r.a.createElement(R.a,null,e.name))},[])},{fieldName:"desc",key:"direction",minWidth:150,name:"Direction",onRender:Object(a.useCallback)(function(e){return r.a.createElement("div",{className:gt.wrapper},r.a.createElement(mt.a,{styles:{root:{margin:0}},key:e.key,defaultChecked:e.desc,offText:"Ascending",onText:"Descending",onChange:function(t,n){return I(t,n,e.key)}}))},[I])}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:d},r.a.createElement(F.a,{text:"Sort",iconProps:{iconName:"Sortlines"},ariaLabel:"Sort",onClick:h,styles:{root:{height:W}}})),r.a.createElement(vt.a,{target:d.current,onDismiss:f,hidden:!b,directionalHint:q.a.bottomCenter,isBeakVisible:!1},r.a.createElement("div",{onBlur:f},r.a.createElement(M.a,{selection:s.current,columns:S,items:i,selectionMode:U.b.none,dragDropEvents:x}))))}var kt=function(e,t){return{parameters:t,separateCompletedItems:e,type:"SET_SEPARATE_COMPLETE"}};var xt=function(e,t){t.parameters.viewId?function(e,t){var n=t.separateCompletedItems,a=t.parameters.viewId,r=e.views.dict[a];r.children.options.separateCompletedItems=n,r.children.order=ne(e.subjects.dict,r.children)}(e,t):function(e,t){var n=t.separateCompletedItems,a=t.parameters,r=a.subjectId;if((a.setSearchOptions?e.searchSortOptions:r?e.dict[r].children.options:e.order.options).separateCompletedItems=n,r){var i=e.dict[r].children;i.order=ne(e.dict,i)}}(e.subjects,t)},It={root:{height:W}};function St(e){var t,n=e.match,i=e.showSort,c=e.subjectId,o=n.params.viewId,l=n.path===f.view&&!!o,s=Object(B.b)(),d=Object(B.c)(function(e){return e}),u=d.subjects,m=d.views;t=l&&o in m.dict?m.dict[o].children.options:c&&c in u.dict?u.dict[c].children.options:u.order.options;var b=Object(a.useCallback)(function(e,t){s(kt(t,{subjectId:c,viewId:o}))},[s,c,o]),p=[],h=Object(a.useState)(!1),v=Object(j.a)(h,2),O=v[0],y=v[1],C=Object(a.useCallback)(function(){y(!0)},[]),E=Object(a.useCallback)(function(){y(!1)},[]);return l&&p.push(r.a.createElement(F.a,{key:"appendChildren",text:"Append child subjects",iconProps:{iconName:"RowsChild"},ariaLabel:"Create child subject",onClick:C,styles:It}),r.a.createElement(ft,{key:"panel",hidePanel:E,isOpen:O,viewId:o})),i&&p.push(r.a.createElement(wt,{key:"sort",subjectId:c,viewId:o,fields:t.fields})),p.push(r.a.createElement(mt.a,{key:"separateComplete",checked:t.separateCompletedItems,offText:"Don't separate completed items",onText:"Separate completed items",onChange:b,styles:{root:{marginBottom:0,marginLeft:4,marginRight:4}}})),p}var Dt=Object(w.w)(),Rt=Object(w.z)({rowButton:{selectors:{"&:active":{filter:"brightness(80%)",outline:"none"},"&:hover":{filter:"brightness(90%)",outline:"none"}}},rowButtonWrapper:{display:"flex",flexDirection:"row"},subjectWrapper:{backgroundColor:Dt.palette.white,border:"1px solid "+Dt.palette.neutralTertiary,borderRadius:4}});function Nt(e){var t=e.item,n=e.openModal,i=e.showCloseButton,c=Object(B.b)(),o=Object(a.useCallback)(function(){n(t)},[t,n]),l=Object(a.useCallback)(function(){t.viewId&&t.id&&c(se(t.viewId,t.id))},[c,t]),s="Open "+t.subject.name,d="Edit "+t.subject.name,u="Close "+t.subject.name;return r.a.createElement("div",{className:Rt.rowButtonWrapper},i?r.a.createElement(Ue.a,{onClick:l,styles:{root:{width:""}},className:Rt.rowButton,iconProps:{iconName:"Cancel"},title:u,ariaLabel:u}):null,r.a.createElement(Ue.a,{onClick:o,styles:{root:{width:""}},className:Rt.rowButton,iconProps:{iconName:"Edit"},title:d,ariaLabel:d}),r.a.createElement(g.b,{to:b("list",t.id)},r.a.createElement(Ue.a,{styles:{root:{width:""}},className:Rt.rowButton,iconProps:{iconName:"OpenFile"},title:s,ariaLabel:s})))}var Tt=n(44),Bt=n(52),Lt=3,_t=603,Pt=Object(O.b)(),Mt=Object(O.c)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(lt,"px")},grid:{height:"100%",overflow:"auto",overflowY:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+Pt.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"}}),Ut=function(){return _t*Lt};var At=Object(v.g)(function(e){var t=e.title,n=(e.history,e.location,e.match),i=e.showCloseButton,c=Object(Tt.a)(e,["title","history","location","match","showCloseButton"]),o=c.options?c.options.parentId:void 0,l=Object(B.c)(function(e){return e}).subjects,s=Object(a.useRef)(0),d=Object(a.useRef)(0),u=Object(a.useRef)(null),m=zt(c),b=m.items,p=m.componentOrder,f=m.currentOrder,h=m.setCurrentOrder;Object(a.useEffect)(function(){if(u.current&&f!==p&&p.length>0){var e=Wt(f,p),t=l.dict[p[e]];(0===t.parents.size||t.parents.has(o))&&u.current.scrollToIndex(e,function(){return _t},Bt.a.top),h(p)}},[p,f,h,o,l]);var v=Object(a.useCallback)(function(e){if(e)return r.a.createElement("div",{className:Mt.tile,"data-is-focusable":!0,key:e.id,style:{height:_t,width:100/s.current+"%"}},r.a.createElement("div",{className:Mt.padding},r.a.createElement("div",{className:Mt.contents},r.a.createElement(nt,{showCloseButton:i,item:e,listHeight:"260px",showOpenButton:!0}))))},[i]),j=Object(a.useCallback)(function(e,t){if(0===e&&t){var n=t.width/lt;s.current=t.width>1.5*lt?Math.ceil(n):Math.floor(n),d.current=Math.floor(t.width/s.current)}return s.current*Lt},[]),O=St({match:n,showSort:!0,subjectId:o});return r.a.createElement(ut,{commandBar:r.a.createElement(G,{items:O}),main:r.a.createElement(we.a,{ref:u,className:Mt.grid,items:b,getItemCountForPage:j,getPageHeight:Ut,renderedWindowsAhead:4,onRenderCell:v}),parentId:o,title:t})}),Wt=function(e,t){for(var n=0;n<t.length;n++){if(t[n]!==e[n])return n}return 0};function zt(e){var t,n,r=e.options,i=e.sortOptions;r&&(t=r.parentId,n=r.viewId);var c,o,l,s=Object(B.c)(function(e){return e}),d=s.subjects,u=s.views;i?(c=ne(d.dict,Object(z.a)({},d.order,{options:i})),o=i.fields,l={setSearchOptions:!0}):t?(c=d.dict[t].children.order,o=d.dict[t].children.options.fields,l={subjectId:t}):n?(c=u.dict[n].children.order,o=u.dict[n].children.options.fields,l={viewId:n}):(c=d.order.order,o=d.order.options.fields,l={});var m=Object(a.useState)(c),b=Object(j.a)(m,2),p=b[0],f=b[1];return{componentOrder:c,currentOrder:p,items:ke(d.dict,c,r),reorderParams:l,setCurrentOrder:f,sortFields:o}}function Ft(e){var t=e.match,n=e.location,a=t.params.parentId,i=T(n),c=Object(B.c)(function(e){return e.subjects}).dict;if(!Object(te.isUndefined)(a)&&!(a in c))return r.a.createElement(v.a,{to:"/"});var o={parentId:a};return"list"===i?r.a.createElement(Jt,{options:o}):r.a.createElement(At,{options:o})}var Jt=Object(v.g)(function(e){var t=e.title,n=e.history,i=e.match,c=e.options,o=e.showCloseButton,l=e.sortOptions,s=c?c.parentId:void 0,d=Object(B.c)(function(e){return e}).subjects,u=zt({options:c,sortOptions:l}),m=u.items,p=u.componentOrder,h=u.currentOrder,v=u.setCurrentOrder,O=u.reorderParams,C=u.sortFields,g=function(e){var t=e.history,n=e.reorderParams,r=e.sortFields,i=Object(B.b)(),c=Object(a.useCallback)(function(e,t){var a=r[e],c=r.filter(function(t,n){return n!==e});c.splice(t,0,a),i(jt(c,n))},[r,i,n]);return{dispatchSetFieldsDesc:Object(a.useCallback)(function(e,t){"openButton"!==t.key&&i(yt(t.key,!t.isSortedDescending,n))},[i,n]),getKey:Object(a.useCallback)(function(e){return e.id},[]),onItemInvoked:Object(a.useCallback)(function(e){t.push(b("list",e.id))},[t]),reorder:c}}({history:n,reorderParams:O,sortFields:C}),w=g.dispatchSetFieldsDesc,k=g.getKey,x=g.onItemInvoked,I=g.reorder,S=function(e){var t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],i=n[1],c=Object(a.useCallback)(function(){i(null)},[]),o=Object(a.useCallback)(function(e){i(e)},[]);return!r||r.id in e.dict||i(null),Object(a.useEffect)(function(){if(r)if(r.id in e.dict){var t=e.dict[r.id];t!==r.subject&&i(Object(z.a)({},r,{subject:t}))}else i(null)},[e.dict,r,i]),{dismissModal:c,modalItem:r,openModal:o,setModalItem:i}}(d),D=S.dismissModal,R=S.modalItem,N=S.openModal,T=function(e,t){var n=Object(a.useState)(null),r=Object(j.a)(n,2),i=r[0],c=r[1],o=Object(a.useCallback)(function(){c(null)},[]);return{contextMenuProps:i,onItemContextMenu:Object(a.useCallback)(function(n,a,r){return!n||!r||(c({ev:r,item:n,onDismiss:o,onEditClick:e,showCloseButton:t}),!1)},[o,t,e])}}(S.setModalItem,o),L=T.contextMenuProps,_=T.onItemContextMenu,P=function(e){var t=e.openModal,n=e.showCloseButton,i=e.sortFields,c=Object(a.useCallback)(function(e,t,n){return e.subject[n.key]},[]),o=Object(a.useCallback)(function(e){return e.subject.children.order.length.toLocaleString()},[]),l=Object(a.useCallback)(function(e,t,n){var a=e.subject[n.key];return a?a.toLocaleString():""},[]),s=Object(a.useCallback)(function(e){return r.a.createElement(Nt,{item:e,openModal:t,showCloseButton:n})},[t,n]),d={children:{isResizable:!0,key:"children",minWidth:100,name:"# Children",onRender:o},completed:{isResizable:!0,key:"completed",minWidth:150,name:"Completed",onRender:l},created:{isResizable:!0,key:"created",minWidth:150,name:"Date created",onRender:l},description:{isResizable:!0,key:"description",minWidth:100,name:"Description",onRender:c},dueDate:{isResizable:!0,key:"dueDate",minWidth:150,name:"Due date",onRender:l},name:{isResizable:!0,key:"name",minWidth:100,name:"Name",onRender:c}},u=[],m=!0,b=!1,p=void 0;try{for(var f,h=i[Symbol.iterator]();!(m=(f=h.next()).done);m=!0){var v=f.value,j=d[v.key];j&&(j.isSorted=!0,j.isSortedDescending=v.desc,u.push(j))}}catch(O){b=!0,p=O}finally{try{m||null==h.return||h.return()}finally{if(b)throw p}}return u.push({key:"itemButtons",minWidth:80,name:"",onRender:s}),u}({openModal:N,showCloseButton:o,sortFields:C}),W=function(e){var t=e.componentOrder,n=e.currentOrder,r=e.parentId,i=e.setCurrentOrder,c=e.subjects,o=Object(a.useRef)(null);return Object(a.useEffect)(function(){if(o.current&&n!==t&&t.length>0){var e=Wt(n,t),a=c.dict[t[e]];(0===a.parents.size||a.parents.has(r))&&o.current.focusIndex(e),i(t)}},[t,r,n,c,i]),o}({componentOrder:p,currentOrder:h,parentId:s,setCurrentOrder:v,subjects:d}),F="calc(100vh - ".concat(y+A+(i.path===f.view?E:0),"px)"),J=St({match:i,subjectId:s});return r.a.createElement(ut,{commandBar:r.a.createElement(G,{items:J}),main:r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{styles:{root:{height:F}},getKey:k,componentRef:W,onColumnHeaderClick:w,columns:P,items:m,isHeaderVisible:!0,selectionMode:U.b.none,onItemInvoked:x,onItemContextMenu:_,columnReorderOptions:{frozenColumnCountFromEnd:1,frozenColumnCountFromStart:0,handleColumnReorder:I}}),L&&r.a.createElement(de,L),r.a.createElement(it,{modalItem:R,dismissModal:D,showCloseButton:o})),parentId:s,title:t})}),Vt=new Set(S.reduce(function(e,t){return e.push(String(t.key).toLowerCase()),e},[]));function Ht(e){var t=e.match,n=e.location,i=T(n),c=s(t),o=Object(j.a)(c,2),l=o[0],d=o[1],u=Object(B.c)(function(e){return e.subjects}),m=u.dict,b=u.searchSortOptions,p=Object(a.useCallback)(function(e){var t=e.subject;switch(l){case"childname":var n=!0,a=!1,r=void 0;try{for(var i,c=t.children.order[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var o=i.value;if(m[o].name.toLowerCase().includes(d))return!0}}catch(v){a=!0,r=v}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return!1;case"childdescription":var s=!0,u=!1,b=void 0;try{for(var p,f=t.children.order[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=p.value;if(m[h].description.toLowerCase().includes(d))return!0}}catch(v){u=!0,b=v}finally{try{s||null==f.return||f.return()}finally{if(u)throw b}}return!1;default:return e.subject[l].toLowerCase().includes(d)}},[m,l,d]);return Vt.has(l)?"list"===i?r.a.createElement(Jt,{options:{condition:p},sortOptions:b}):r.a.createElement(At,{options:{condition:p},sortOptions:b}):r.a.createElement(R.a,null,"Sorry that search parameter was invalid.")}var Gt=function(e,t){return{name:t,type:"SET_VIEW_NAME",viewId:e}},Kt=Object(O.c)({title:{marginTop:10,padding:10},wrapper:{display:"flex",flexDirection:"column",height:"100%",width:"100%"}});function Yt(e){var t=e.location,n=e.viewId,i=Object(B.c)(function(e){return e}).views,c=Object(B.b)(),o=n&&n in i.dict?i.dict[n]:{name:""},l=Object(a.useState)(o.name),s=Object(j.a)(l,2),d=s[0],u=s[1],m=Object(a.useCallback)(function(){n&&c(Gt(n,d))},[n,c,d]);Object(a.useEffect)(function(){u(o.name)},[o.name]);var b=Object(a.useCallback)(function(e){u(e.target.value)},[]),p=T(t),f={viewId:n},h=r.a.createElement(qe,{className:Kt.title,value:d,onChange:b,onBlur:m}),v="grid"===p?r.a.createElement(At,{options:f,showCloseButton:!0,title:h}):r.a.createElement(Jt,{options:f,showCloseButton:!0,title:h});return r.a.createElement("div",{className:Kt.wrapper},v)}function qt(e){var t=e.match,n=e.location,a=Object(B.c)(function(e){return e}).views,i=t.params.viewId;return!Object(te.isUndefined)(i)&&i in a.dict?r.a.createElement(Yt,{viewId:i,location:n}):r.a.createElement(v.a,{to:f.base})}var Qt=n(191),$t=n(209),Xt=function(){return{type:"CREATE_VIEW",viewId:Object(Re.v4)()}};var Zt=Object(w.w)(),en=Object(w.z)({navWrapper:{borderRight:"1px solid "+Zt.palette.neutralQuaternary,display:"flex",flexDirection:"column"},nav:{background:Zt.palette.white,boxSizing:"border-box",height:"100%",overflowY:"auto",width:208}});function tn(e){var t=e.match,n=e.history,i=Object(B.b)(),c=Object(a.useState)(!1),o=Object(j.a)(c,2),l=o[0],s=o[1],d=Object(a.useState)(""),u=Object(j.a)(d,2),b=u[0],h=u[1],v=Object(B.c)(function(e){return e}).views;Object(a.useEffect)(function(){if(t.url===m)h("allSubjects");else if(t.path===f.view){var e=t.params.viewId;e&&e in v.dict?h(e):n.push(f.base)}else h("")},[t,n,v.dict]);var O=Object(a.useCallback)(function(){i(Xt()),s(!0)},[i]);Object(a.useEffect)(function(){l&&(s(!1),n.push(p(v.order[v.order.length-1])))},[l,n,v]);var y={isExpanded:!0,key:"views",links:[],name:"Views",url:""},C=!0,E=!1,g=void 0;try{for(var w,k=v.order[Symbol.iterator]();!(C=(w=k.next()).done);C=!0){var x=w.value,I=v.dict[x];y.links.push({key:x,name:I.name,url:"#"+p(x)})}}catch(R){E=!0,g=R}finally{try{C||null==k.return||k.return()}finally{if(E)throw g}}var S=[{links:[{key:"allSubjects",name:"All subjects",url:"#"+m}]}];y.links.length>0&&S[0].links.push(y),S[0].links.push({icon:"Add",key:"createView",name:"Create view",onClick:O,url:""});var D=function(e){var t=e.parentId,n=e.viewId,r=Object(B.b)(),i=Object(a.useCallback)(function(){r(Ne({parentId:t,viewId:n}))},[r,t,n]);return[{iconProps:{iconName:t||n?"ChildOf":"Add"},key:"createSubject",onClick:i,text:t||n?"Create child subject":"Create subject"}]}(t.params);return r.a.createElement("div",{className:en.navWrapper},r.a.createElement(Qt.a,{items:D,styles:{root:V}}),r.a.createElement($t.a,{selectedKey:b,expandButtonAriaLabel:"Expand or collapse",className:en.nav,groups:S,styles:{navItems:{margin:0}}}))}var nn=Object(O.c)({main:{display:"flex",flexDirection:"column",overflowY:"auto",width:"100%"},wrapper:{display:"flex",flexDirection:"row"}}),an=function(){return r.a.createElement("div",null,r.a.createElement(v.b,{path:h,component:P}),r.a.createElement("div",{className:nn.wrapper},r.a.createElement(v.b,{path:h,component:tn}),r.a.createElement("div",{className:nn.main},r.a.createElement(v.d,null,r.a.createElement(v.b,{path:f.subject,component:Ft}),r.a.createElement(v.b,{path:f.search,component:Ht}),r.a.createElement(v.b,{path:f.view,component:qt}),r.a.createElement(v.a,{to:m})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rn=n(34),cn=n(111),on=n(115),ln=n(46),sn=n(112),dn=n.n(sn),un=n(113),mn=n(51),bn=function(e,t){return Object(z.a)({},Object(mn.a)(e,function(e){switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var n=t.subjectId,a=t.name;e.subjects.dict[n].name=a,ae(e.subjects.dict,n),re(e,n)}(e,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var n=t.subjectId,a=t.description;e.subjects.dict[n].description=a,ae(e.subjects.dict,n),re(e,n)}(e,t);break;case"COMPLETE_SUBJECT":ce(e,t);break;case"UNCOMPLETE_SUBJECT":!function(e,t){var n=t.subjectId;e.subjects.dict[n].completed=void 0,ae(e.subjects.dict,n),re(e,n)}(e,t);break;case"DELETE_SUBJECT":!function(e,t){var n=t.subjectId,a=e.subjects,r=e.views;function i(e){Object(te.remove)(e,function(e){return e===n})}var c=a.dict[n],o=!0,l=!1,s=void 0;try{for(var d,u=c.parents[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;i(a.dict[m].children.order)}}catch(k){l=!0,s=k}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}var b=!0,p=!1,f=void 0;try{for(var h,v=c.children.order[Symbol.iterator]();!(b=(h=v.next()).done);b=!0){var j=h.value;a.dict[j].parents.delete(n)}}catch(k){p=!0,f=k}finally{try{b||null==v.return||v.return()}finally{if(p)throw f}}i(a.order.order);var O=!0,y=!1,C=void 0;try{for(var E,g=c.views[Symbol.iterator]();!(O=(E=g.next()).done);O=!0){var w=E.value;i(r.dict[w].children.order)}}catch(k){y=!0,C=k}finally{try{O||null==g.return||g.return()}finally{if(y)throw C}}ae(a.dict,n),re(e,n),delete a.dict[n]}(e,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var n=t.subjectId,a=t.date;e.subjects.dict[n].dueDate=a,ae(e.subjects.dict,n),re(e,n)}(e,t);break;case"CREATE_SUBJECT":!function(e,t){var n=t.subjectType,a=t.parentId,r=t.subjectId,i=t.viewId,c={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},created:new Date,description:"",name:"Untitled",parents:new Set,type:n||"BaseSubject",views:new Set};e.subjects.dict[r]=c,void 0!==a&&Ce(e,ye(a,r)),void 0!==i&&De(e,Se(i,r)),e.subjects.order.order.push(r)}(e,t);break;case"REMOVE_CHILD_SUBJECT_FROM_SUBJECT_REDUCER":!function(e,t){var n=t.subjectId,a=t.parent,r=e.subjects;Object(te.remove)(r.dict[a].children.order,function(e){return e===n}),r.dict[n].parents.delete(a),ae(r.dict,n),re(e,n)}(e,t);break;case"APPEND_CHILD_SUBJECT_TO_SUBJECT":Ce(e,t)}return e}))},pn=function(){return{dict:{},order:[],orderSet:new Set}},fn=function(e,t){return Object(z.a)({},Object(mn.a)(e,function(n){switch(e.views.dict||(e.views=pn()),t.type){case"CREATE_VIEW":!function(e,t){var n=t.viewId,a=function(e){for(var t=1,n="Untitled".concat(t);e.has(n);)n="Untitled".concat(++t);return n}(e.views.orderSet);e.views.dict[n]={children:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},name:a},e.views.order.push(n),e.views.orderSet.add(a)}(n,t);break;case"SET_VIEW_NAME":!function(e,t){var n=e.views,a=t.name,r=t.viewId;if(!n.orderSet.has(a)){var i=n.dict[r];n.orderSet.delete(i.name),i.name=a}}(n,t);break;case"APPEND_SUBJECT_TO_VIEW":De(n,t);break;case"REMOVE_SUBJECT_FROM_VIEW":!function(e,t){var n=t.subjectId,a=t.viewId,r=e.views.dict[a];Object(te.remove)(r.children.order,function(e){return e===n}),re(e,n)}(n,t)}return n}))},hn=function(e,t){return Object(z.a)({},Object(mn.a)(e,function(e){switch(t.type){case"SET_FIELDS_ARRAY":Ot(e,t);break;case"SET_FIELDS_DESC":Ct(e,t);break;case"SET_SEPARATE_COMPLETE":xt(e,t)}var n=e.subjects;return n.order.order.length>0&&(n.order.order=ne(n.dict,n.order)),e}))},vn=Object(un.a)(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{subjects:{dict:{},order:{options:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0},order:[]},searchSortOptions:{fields:[{key:"name",name:"Name",desc:!1},{key:"created",name:"Date created",desc:!1},{key:"completed",name:"Date completed",desc:!1},{key:"children",name:"Number of children",desc:!1,compareLength:!0},{key:"description",name:"Description size",desc:!1,compareLength:!0},{key:"dueDate",name:"Due date",desc:!1}],separateCompletedItems:!0}},views:pn()}},bn,fn,hn),jn=n(114),On=Object(ln.a)(function(e,t){for(var n=e.dict,a=Object(Tt.a)(e,["dict"]),r={},i=0,c=Object.entries(n);i<c.length;i++){var o=c[i],l=Object(j.a)(o,2),s=l[0],d=l[1];r[s]=Object(z.a)({},d,{parents:Object(K.a)(d.parents),views:Object(K.a)(d.views)})}return Object(z.a)({dict:r},a)},function(e,t){for(var n=e.dict,a=Object(Tt.a)(e,["dict"]),r={},i=0,c=Object.entries(n);i<c.length;i++){var o=c[i],l=Object(j.a)(o,2),s=l[0],d=l[1],u=d.created,m=d.completed,b=d.dueDate,p=d.parents,f=d.views,h=Object(Tt.a)(d,["created","completed","dueDate","parents","views"]),v=m?new Date(m):void 0,O=b?new Date(b):void 0;r[s]=Object(z.a)({},h,{completed:v,created:new Date(u),dueDate:O,parents:new Set(p),views:new Set(f)})}return Object(z.a)({dict:r},a)},{whitelist:["subjects"]}),yn=Object(ln.a)(function(e,t){e.orderSet;return Object(Tt.a)(e,["orderSet"])},function(e,t){var n=new Set,a=!0,r=!1,i=void 0;try{for(var c,o=e.order[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var l=c.value;n.add(e.dict[l].name)}}catch(s){r=!0,i=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return Object(z.a)({},e,{orderSet:n})},{whitelist:["views"]}),Cn={key:"root",storage:dn.a,transforms:[On,yn]},En=Object(ln.b)(Cn,vn),gn=Object(rn.createStore)(En,Object(cn.composeWithDevTools)()),wn=Object(ln.c)(gn);Object(on.a)(),c.a.render(r.a.createElement(B.a,{store:gn},r.a.createElement(jn.a,{loading:null,persistor:wn},r.a.createElement(g.a,null,r.a.createElement(an,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.ee60fff1.chunk.js.map