(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(33),c=n.n(i),o=n(157),l=n(3),d=n(10),s=n(14);function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1;return function(n,a){var r=n.subject[e],i=a.subject[e],c=!Object(s.isUndefined)(r),o=!Object(s.isUndefined)(i);return c||o?c&&!o?1*t:!c&&o?-1*t:r<i?-1*t:r>i?1*t:0:0}}function m(e,t,n){var a=[],r=[];if(void 0!==t&&n&&n.getChildrenOfParent){if(!(t in e))throw new Error("Given id is not valid");var i=e[t],c=!0,o=!1,l=void 0;try{for(var d,m=i.children[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var p=d.value,b={id:p,subject:e[p],parent:t};(Object(s.isUndefined)(n)||Object(s.isUndefined)(n.condition)||n.condition(b))&&(n&&n.separateCompletedItems&&e[p].completed?r.push(b):a.push(b))}}catch(E){o=!0,l=E}finally{try{c||null==m.return||m.return()}finally{if(o)throw l}}}else for(var f=0,h=Object.entries(e);f<h.length;f++){var v=h[f],g={id:v[0],subject:v[1],parent:t};(Object(s.isUndefined)(n)||Object(s.isUndefined)(n.condition)||n.condition(g))&&(n&&n.separateCompletedItems&&v[1].completed?r.push(g):a.push(g))}return a.sort(u("created",!0)),r.sort(u("created",!0)),a.concat(r)}var p=n(20),b=n(154),f=n(156),h=n(5),v=n(160),g=n(151),E=n(150),j=n(153),C=n(143),x=n(161),y=n(83),O=Object(l.v)(),k=Object(l.x)({title:{textAlign:"center",fontSize:y.a.size28,border:"1px solid transparent",outline:"none",borderRadius:0,paddingBottom:4,width:"80%",selectors:{"&:focus":{borderBottom:"1px solid "+O.palette.neutralTertiary,outline:"none"},"&:hover":{borderBottom:"1px solid "+O.palette.neutralTertiary,outline:"none"}}}}),w=function(e){var t=e.value,n=e.className,a=e.onBlur,i=e.onChange;return r.a.createElement("div",{className:n},r.a.createElement("input",{className:k.title,onChange:i,onBlur:a,value:t}))},T=Object(l.x)({list:{overflow:"auto"}}),S=function(e){var t,n=e.subjectId,a=e.maxHeight,i=e.onRenderCell,c=e.getChildren,l=Object(d.c)(function(e){return e.subjects});if(c)t=m(l,n,{getChildrenOfParent:!0});else{var s=new Set(l[n].children);t=m(l,n,{condition:function(e){return!s.has(e.id)&&e.id!==n}})}return r.a.createElement(v.a,{className:T.list,style:{maxHeight:a}},r.a.createElement(o.a,{items:t,onRenderCell:i}))},N=function(e,t){return{name:t,subjectId:e,type:"SET_SUBJECT_NAME"}},B=function(e){return{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,subjectId:e,type:"COMPLETE_SUBJECT"}},D=function(e,t){!function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date;if(void 0===t[n].completed&&(t[n].completed=r,a>1)){var i=!0,c=!1,o=void 0;try{for(var l,d=t[n].children[Symbol.iterator]();!(i=(l=d.next()).done);i=!0)e(t,l.value,a-1,r)}catch(s){c=!0,o=s}finally{try{i||null==d.return||d.return()}finally{if(c)throw o}}}}(e,t.subjectId,t.level)},I=function(e){return{subjectId:e,type:"UNCOMPLETE_SUBJECT"}},U=function(e){return{subjectId:e,type:"DELETE_SUBJECT"}},R=n(147),_=n(148),L=n(142),P=function(e,t){return{subjectId:e,child:t,type:"APPEND_CHILD_SUBJECT"}},J=n(155),M="1px solid "+Object(l.v)().palette.neutralTertiary,A=Object(l.x)({wrapper:{display:"grid",gridTemplateColumns:"auto 32px",gridTemplateRows:"auto auto",flexDirection:"row",border:M,borderRadius:2,marginBottom:2},checkboxWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},checkbox:{margin:8},button:{gridColumn:"2"},content:{gridRow:"2",gridColumn:"1 / 2",paddingLeft:8,paddingRight:8}}),H=function(e){var t=e.onCheckboxChange,n=e.key,i=e.children,c=e.contextMenuItems,o=e.button,l=e.checked,d=e.label,s=e.editable,u=e.onEditableBlur,m=Object(a.useRef)(null),b=Object(a.useState)(d),f=Object(p.a)(b,2),v=f[0],g=f[1],j=Object(a.useState)(!1),C=Object(p.a)(j,2),x=C[0],y=C[1];function O(e){e.preventDefault(),y(!x)}Object(a.useEffect)(function(){g(d)},[d]);return r.a.createElement("div",{"data-is-focusable":!0,onContextMenu:O,ref:m,key:n},r.a.createElement("div",{className:A.wrapper},r.a.createElement("div",{className:A.checkboxWrapper},r.a.createElement(J.a,{checked:l,label:s?void 0:d,className:A.checkbox,onChange:t}),s?r.a.createElement(E.a,{value:v,borderless:!0,onChange:u?function(e,t){t&&g(t)}:void 0,onBlur:function(){return u(v)}}):null),r.a.createElement("div",{className:A.content},i),r.a.createElement("div",{className:A.button},o||null)),c&&x?r.a.createElement(L.a,{isBeakVisible:!1,onDismiss:O,target:m,directionalHint:h.a.bottomRightEdge,items:c}):null)};function V(e){var t=e.id,n=e.parent,a=e.subject,i=Object(d.b)();return r.a.createElement(H,{checked:!1,label:a.name,onCheckboxChange:function(e,a){!0===a&&i(P(n,t))}})}var W=function(e){if(e&&!Object(s.isUndefined)(e.parent))return r.a.createElement(V,e)},z=n(48),F=n(86),G=function(e){return Object(z.a)({type:"CREATE_SUBJECT"},e)},Q=Object(l.v)(),$=Object(l.x)({wrapper:{display:"grid",gridTemplateColumns:"auto 1px 32px",border:"1px solid "+Q.palette.neutralTertiary,borderRadius:2,marginTop:1,marginBottom:1},button:{display:"flex",flexDirection:"row",alignItems:"center",border:"none",background:Q.palette.white,padding:0,height:32,cursor:"pointer",outline:"none",selectors:{"&:hover":{filter:"brightness(90%)",outline:"none"},"&:active":{filter:"brightness(80%)",outline:"none"}}},divider:{gridColumn:"2",background:Q.palette.neutralTertiary,width:1,marginTop:8,marginBottom:8},icon:{paddingLeft:4,margin:8,fontSize:12,textAlign:"center"},text:{display:"flex",flexGrow:2,paddingLeft:4,paddingRight:8}}),q=function(e){var t=e.parent,n=Object(a.useRef)(null),i=Object(d.b)(),c=Object(a.useState)(!1),o=Object(p.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),m=Object(p.a)(u,2),f=m[0],v=m[1],g=[{key:"appendChildren",iconProps:{iconName:"ChildOf"},text:"Append child subject",onClick:function(){return s(!0)}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:$.wrapper},r.a.createElement("button",{className:$.button,style:{gridColumn:1},onClick:function(){i(G({parent:t}))}},r.a.createElement(R.a,{iconName:"Add",className:$.icon}),r.a.createElement(b.a,{className:$.text},"Add child")),r.a.createElement("span",{className:$.divider}),r.a.createElement("button",{className:$.button,onClick:function(){return v(!f)},ref:n,style:{gridColumn:3}},r.a.createElement(R.a,{iconName:"ChevronDown",style:{width:"100%"}}))),r.a.createElement(_.a,{isOpen:l,isLightDismiss:!0,headerText:"Append Children",onDismiss:function(){return s(!1)}},r.a.createElement(S,{subjectId:t,maxHeight:"calc(100vh-".concat(115,")"),onRenderCell:W})),f?r.a.createElement(L.a,{isBeakVisible:!1,onDismiss:function(){return v(!1)},target:n,directionalHint:h.a.bottomRightEdge,items:g}):null)},K=n(44),X=n(145),Y=n(37),Z=function(e,t){return{subjectId:e,parent:t,type:"REMOVE_CHILD_SUBJECT"}},ee=Object(l.v)(),te=Object(l.x)({open:{color:ee.palette.white,background:ee.palette.themePrimary,cursor:"pointer",border:"none",borderRadius:2,outline:"none",margin:-1,marginBottom:-2,marginRight:-3,height:40,width:32,selectors:{"&:hover":{filter:"brightness(90%)"},"&:active":{filter:"brightness(80%)"}}}});function ne(e){var t=e.id,n=e.parent,i=e.subject,c=Object(d.b)(),o=Object(a.useRef)(Object(K.c)(t)),l=function(e,n,a){c(!0===n?B(t,a):I(t))},s=[{key:"complete-1-level",text:"Mark as complete",onClick:function(e,t){t&&l(0,!t.checked,1)}},{key:"complete-2-level",text:"Mark this and its children as complete",onClick:function(e,t){t&&l(0,!t.checked,2)}},{key:"remove",text:"Remove this as a child",onClick:function(){return c(Z(t,n))}},{key:"delete",text:"Delete this",onClick:function(){return c(U(t))}}],u=r.a.createElement(X.a,{content:"Open "+i.name,id:o.current},r.a.createElement(Y.b,{to:"/".concat(t)},r.a.createElement("button",{className:te.open,"aria-labelledby":o.current},r.a.createElement(R.a,{iconName:"OpenFile"}))));return r.a.createElement(H,{editable:!0,onEditableBlur:function(e){return c(N(t,e))},checked:!!i.completed,label:i.name,onCheckboxChange:l,contextMenuItems:s,button:u})}function ae(e){if(e&&!Object(s.isUndefined)(e.parent))return r.a.createElement(ne,Object.assign({},e,{key:e.id}))}var re=Object(l.v)(),ie=Object(l.x)({header:{color:re.palette.neutralLight,padding:5,display:"flex",flexDirection:"column",alignItems:"center",selectors:{"&:focus":{outline:"none",border:"none"}}},body:{padding:10},title:{paddingTop:10,paddingBottom:5,display:"flex",flexDirection:"column",alignItems:"center"},description:{paddingTop:10,paddingBottom:10},date:{display:"flex",justifyContent:"space-between"},datePicker:{display:"flex",flexDirection:"row"},daysLeft:{display:"flex",justifyContent:"flex-end"},appendChildren:{background:re.palette.white,border:"1px solid "+re.palette.neutralTertiary,width:"100%"},heroButton:{marginTop:10,display:"flex",flexDirection:"column",alignItems:"center"}});var ce=function(e){var t=e.subject,n=e.id,i=e.listHeight,c=Object(d.b)(),o=Object(a.useState)(t.name),l=Object(p.a)(o,2),s=l[0],u=l[1],m=Object(a.useState)(t.description||""),y=Object(p.a)(m,2),O=y[0],k=y[1];Object(a.useEffect)(function(){u(t.name)},[t.name]),Object(a.useEffect)(function(){k(t.description)},[t.description]);var T,D,R,_,L=function(e){c(function(e,t){return{date:t,subjectId:e,type:"SET_SUBJECT_DUE_DATE"}}(n,e||void 0))},P={key:"complete-2-level",text:"Mark this and its children as complete",onClick:function(){c(B(n,2))}},J={key:"delete",text:"Delete this",onClick:function(){c(U(n))}},M=t.dueDate?(T=new Date,D=t.dueDate,Math.ceil((D.valueOf()-T.valueOf())/864e5)):"\u221e";return t.completed?(R=r.a.createElement(b.a,{className:ie.header,style:{backgroundColor:re.palette.red}},"Completed ",t.completed.toLocaleString()),_=r.a.createElement(f.a,{text:"Mark as uncomplete",split:!0,onClick:function(){return c(I(n))},menuProps:{directionalHint:h.a.bottomCenter,isBeakVisible:!1,items:[J]},style:{background:re.palette.white}})):(R=r.a.createElement(b.a,{className:ie.header,style:{backgroundColor:re.palette.green}},"Created ",t.created.toLocaleString()),_=r.a.createElement(f.a,{primary:!0,text:"Mark as complete",split:!0,onClick:function(){return c(B(n,1))},menuProps:{directionalHint:h.a.bottomCenter,isBeakVisible:!1,items:[P,J]}})),r.a.createElement(v.a,null,r.a.createElement(g.a,{verticalAlign:"center"},R,r.a.createElement("div",{className:ie.body},r.a.createElement(w,{className:ie.title,value:s,onChange:function(e){u(e.target.value||"Untitled")},onBlur:function(){t.name!==s&&c(N(n,s))}}),r.a.createElement(E.a,{multiline:!0,rows:3,value:O,onChange:function(e,t){k(t||"")},onBlur:function(){t.description!==O&&c(function(e,t){return{description:t,subjectId:e,type:"SET_SUBJECT_DESCRIPTION"}}(n,O))},className:ie.description}),r.a.createElement("div",{className:ie.date},r.a.createElement(j.a,null,"Due date:"),r.a.createElement("div",{className:ie.datePicker},r.a.createElement(C.a,{value:t.dueDate,onSelectDate:L}),t.dueDate?r.a.createElement(x.a,{iconProps:{iconName:"cancel"},title:"Clear date",onClick:function(){L()}}):null)),r.a.createElement("div",{className:ie.daysLeft},r.a.createElement(j.a,null,"".concat(M," days left"))),r.a.createElement("div",{style:{minHeight:"string"===typeof i?i+"".concat(32,"px"):i+32}},r.a.createElement(S,{subjectId:n,maxHeight:i,onRenderCell:ae,getChildren:!0}),r.a.createElement(q,{parent:n})),r.a.createElement("div",{className:ie.heroButton},_))))},oe=n(16),le=Object(l.v)(),de=Object(l.x)({appBar:{backgroundColor:le.palette.themePrimary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",height:48,display:"grid",alignItems:"center"},link:{color:le.palette.black,textDecoration:"none",selectors:{"&:hover":{textDecoration:"none",color:le.palette.neutralLighter}}},title:{paddingLeft:24}}),se=function(){return r.a.createElement("div",{className:de.appBar},r.a.createElement(Y.b,{to:"/",className:de.link},r.a.createElement(b.a,{className:de.title,variant:"xLarge"},"hub")))},ue=n(144),me=Object(l.v)(),pe=Object(l.x)({appCommandBar:{borderBottom:"1px solid "+me.palette.neutralQuaternary,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)"}}),be=function(e,t){var n=[{key:"createSubject",name:"Create subject",iconProps:{iconName:"Add"},ariaLabel:"Create subject",onClick:function(){e(G())}}];return void 0!==t&&n.push({key:"createChildSubject",name:"Create child subject",iconProps:{iconName:"Childof"},ariaLabel:"Create child subject",onClick:function(){e(G({parent:t}))}}),n},fe=function(e){var t=e.match.params.id,n=Object(d.b)();return r.a.createElement(ue.a,{items:be(n,t),className:pe.appCommandBar})},he=Object(l.v)(),ve="calc(100vh-".concat(48,"px-303px-").concat(45,"px)"),ge=Object(l.x)({wrapper:{display:"grid",gridTemplateColumns:"auto ".concat(400,"px")},grid:{height:"calc(100vh - ".concat(48,"px - ").concat(45,"px)"),overflow:"auto",position:"relative"},tile:{textAlign:"center",position:"relative",float:"left"},padding:{padding:5},contents:{border:"1px solid "+he.palette.neutralTertiary,borderRadius:4,boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"},sidebar:{gridColumn:"2",padding:5,boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)"}}),Ee=function(){return 1809},je=function(e){var t,n=e.match,i=Object(a.useRef)(0),c=Object(a.useRef)(0),l=Object(d.c)(function(e){return e.subjects});try{t=m(l,n.params.id,{separateCompletedItems:!0})}catch(p){return r.a.createElement(oe.a,{to:"/"})}var s=null;void 0!==n.params.id&&(s=r.a.createElement("div",{className:ge.sidebar},r.a.createElement(ce,{subject:l[n.params.id],id:n.params.id,listHeight:ve})));var u=r.a.createElement(o.a,{className:ge.grid,items:t,getItemCountForPage:function(e,t){return 0===e&&t&&(i.current=Math.ceil(t.width/400),c.current=Math.floor(t.width/i.current)),3*i.current},getPageHeight:Ee,renderedWindowsAhead:4,onRenderCell:function(e){if(e){var t=e.id,n=e.subject;return r.a.createElement("div",{className:ge.tile,"data-is-focusable":!0,key:t,style:{width:100/i.current+"%",height:603}},r.a.createElement("div",{className:ge.padding},r.a.createElement("div",{className:ge.contents},r.a.createElement(ce,{subject:n,id:t,listHeight:260}))))}}});return s?r.a.createElement("div",{className:ge.wrapper},u,s):u},Ce=function(){return r.a.createElement("div",null,r.a.createElement(se,null),r.a.createElement(oe.b,{path:"/:id?",component:fe}),r.a.createElement(oe.b,{path:"/:id?",component:je}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=n(22),ye=n(89),Oe=n(94),ke=n(47),we=n(90),Te=n.n(we),Se=n(91),Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(Se.a)(e,function(e){switch(t.type){case"SET_SUBJECT_NAME":!function(e,t){var n=t.subjectId,a=t.name;e[n].name=a}(e,t);break;case"SET_SUBJECT_DESCRIPTION":!function(e,t){var n=t.subjectId,a=t.description;e[n].description=a}(e,t);break;case"COMPLETE_SUBJECT":D(e,t);break;case"UNCOMPLETE_SUBJECT":e[t.subjectId].completed=void 0;break;case"DELETE_SUBJECT":!function(e,t){var n=t.subjectId,a=!0,r=!1,i=void 0;try{for(var c,o=e[n].parents[Symbol.iterator]();!(a=(c=o.next()).done);a=!0){var l=c.value;Object(s.remove)(e[l].children,function(e){return e===n})}}catch(f){r=!0,i=f}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}var d=!0,u=!1,m=void 0;try{for(var p,b=e[n].children[Symbol.iterator]();!(d=(p=b.next()).done);d=!0)e[p.value].parents.delete(n)}catch(f){u=!0,m=f}finally{try{d||null==b.return||b.return()}finally{if(u)throw m}}delete e[n]}(e,t);break;case"SET_SUBJECT_DUE_DATE":!function(e,t){var n=t.subjectId,a=t.date;e[n].dueDate=a}(e,t);break;case"CREATE_SUBJECT":!function(e,t){var n=t.subjectType,a=t.parent,r=Object(F.v4)(),i={type:n||"BaseSubject",name:"Untitled",created:new Date,description:"",children:[],parents:new Set};void 0!==a&&(i.parents.add(a),e[a].children.push(r)),e[r]=i}(e,t);break;case"REMOVE_CHILD_SUBJECT":!function(e,t){var n=t.subjectId,a=t.parent;Object(s.remove)(e[a].children,function(e){return e===n}),e[n].parents.delete(a)}(e,t);break;case"APPEND_CHILD_SUBJECT":!function(e,t){var n=t.subjectId,a=t.child;e[n].children.push(a),e[a].parents.add(n)}(e,t)}return e})},Be=Object(xe.combineReducers)({subjects:Ne}),De=n(92),Ie=n(93),Ue=n(95),Re=Object(ke.a)(function(e,t){for(var n={},a=0,r=Object.entries(e);a<r.length;a++){var i=r[a],c=Object(p.a)(i,2),o=c[0],l=c[1];n[o]=Object(z.a)({},l,{parents:Object(Ue.a)(l.parents)})}return n},function(e,t){for(var n={},a=0,r=Object.entries(e);a<r.length;a++){var i=r[a],c=Object(p.a)(i,2),o=c[0],l=c[1],d=l.created,s=l.completed,u=l.dueDate,m=l.parents,b=Object(Ie.a)(l,["created","completed","dueDate","parents"]),f=s?new Date(s):void 0,h=u?new Date(u):void 0;n[o]=Object(z.a)({},b,{parents:new Set(m),created:new Date(d),completed:f,dueDate:h})}return n},{whitelist:["subjects"]}),_e={key:"root",storage:Te.a,transforms:[Re]},Le=Object(ke.b)(_e,Be),Pe=Object(xe.createStore)(Le,Object(ye.composeWithDevTools)()),Je=Object(ke.c)(Pe);Object(Oe.a)(),c.a.render(r.a.createElement(d.a,{store:Pe},r.a.createElement(De.a,{loading:null,persistor:Je},r.a.createElement(Y.a,null,r.a.createElement(Ce,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},99:function(e,t,n){e.exports=n(115)}},[[99,1,2]]]);
//# sourceMappingURL=main.ac587ee2.chunk.js.map